{"version":3,"sources":["Tabs/Logo.js","Tabs/Options.js","Tabs/Extended.js","Tabs/Services.js","Tabs/Enums.js","Tabs/AlexaSmartNames.js","Tabs/AlisaSmartNames.js","Components/TreeTable.js","Tabs/GoogleSmartNames.js","App.js","serviceWorker.js","index.js"],"names":["Logo","evt","f","target","files","r","window","FileReader","onload","e","contents","result","json","JSON","parse","native","common","name","props","onError","I18n","t","onLoad","toString","readAsText","alert","_id","this","instance","stringify","news","titleLang","desc","generateFile","input","document","createElement","setAttribute","addEventListener","handleFileSelect","click","icon","src","className","classes","logo","alt","readme","Fab","size","color","aria-label","buttons","onClick","open","focus","title","upload","download","filename","obj","el","encodeURIComponent","style","display","body","appendChild","removeChild","Component","withStyles","theme","marginRight","marginTop","float","padding","width","Options","onAliveChanged","id","state","adapterName","setState","isInstanceAlive","val","inAction","toast","errorWithPercent","socket","getState","then","subscribeState","unsubscribeState","pass","length","match","attr","type","error","checkPassword","TextField","label","value","helperText","onChange","margin","Card","card","CardActionArea","CardMedia","media","image","CardContent","Utils","renderTextWithA","CardActions","textAlign","Button","forceUserCreate","ack","Promise","resolve","getObject","enabled","setObject","catch","err","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","onClose","ContentProps","message","action","IconButton","key","close","FormControlLabel","Object","assign","paddingTop","controlElement","control","Checkbox","checked","tab","text","errorText","column","columnSettings","renderInput","renderCheckbox","googleHome","newVal","changed","hintUnsaved","variant","button","disabled","resetCerts","fontWeight","columnLogo","renderCard","renderToast","minHeight","minWidth","marginBottom","maxWidth","height","verticalAlign","cannotUse","fontSize","fontStyle","ExtendedOptions","showSelectId","options","FormControl","Select","Input","map","item","MenuItem","FormHelperText","imagePrefix","selected","types","onOk","renderSelect","marginLeft","getSelectIdDialog","Services","running","text2commandList","nightscoutList","addValue","onKeyChangedBound","onKeyChanged","bind","getAdapterInstances","list","nsList","replace","showError","chips","split","filter","a","pos","indexOf","splice","join","push","email","login","secret","nightscoutPass","chipsDiv","onKeyUp","keyCode","onChipsAdd","trim","word","Chip","onDelete","onChipsDelete","chip","reissueUrlKey","fullSize","readOnly","copyToClipboard","renderChips","text2command","nightscout","normalSize","calcNightscoutSecret","amazonAlexaBlood","paddingLeft","amazonAlexaBloodShortAnswer","border","borderRadius","Enums","editId","editedSmartName","funcs","rooms","loading","onEnumUpdateBound","onEnumUpdate","getEnums","res","keys","forEach","subscribeObject","unsubscribeObject","removeChanged","updateObjInState","sendTo","i","find","smartName","getSmartNameFromObj","disableSmartName","noCommon","removeSmartName","addChanged","informInstance","setTimeout","getLanguage","en","getObjectNameFromObj","language","enumLine","background","enumLineName","opacity","enumLineSubName","enumLineId","Switch","enumLineEnabled","onToggleEnum","enumLineEdit","onEdit","renderEnum","startsWith","newObj","updateSmartName","undefined","Dialog","fullWidth","aria-labelledby","aria-describedby","DialogTitle","DialogContent","DialogActions","changeSmartName","autoFocus","CircularProgress","columnHeader","columnDiv","renderEnums","renderMessage","renderEditDialog","overflow","position","right","top","palette","primary","light","contrastText","actionsMapping","turnOn","IconOn","turnOff","setTargetTemperature","IconTemperature","incrementTargetTemperature","IconUp","decrementTargetTemperature","IconDown","setPercentage","IconPercentage","incrementPercentage","decrementPercentage","setColor","IconColor","setColorTemperature","IconBulb","incrementColorTemperature","decrementColorTemperature","getTargetTemperature","IconThermometer","getTemperatureReading","setLockState","IconLock","getLockState","SMARTTYPES","AlexaSmartNames","translated","editedSmartType","editObjectName","deleteId","showListOfDevices","showConfirmation","devices","browse","expanded","lastChanged","timerChanged","browseTimer","browseTimerCount","waitForUpdateID","onReadyUpdateBound","onReadyUpdate","onResultUpdateBound","onResultUpdate","isIndicate","Date","now","lastBrowse","console","log","clearTimeout","devTimer","cb","device","dev","additionalApplianceDetails","friendlyNames","friendlyName","group","smartType","actions","sort","b","Icon","actionIcon","lineNum","items","devSubLineByOn","devSubLineByOnSelect","onParamsChange","devSubLineTypeTitle","byON","renderSelectTypeSelector","channels","names","byONs","smarttypes","smartTypes","c","chan","hasOwnProperty","themeType","devSubLine","devLineActions","channelLineActions","renderActions","devSubLineName","devSubSubLineName","renderSelectType","renderSelectByOn","devSubLineDelete","onAskDelete","nameModified","devModified","devCount","ch","devLine","devLineNumber","devLineExpand","onExpand","Badge","badgeContent","devLineNameBlock","devLineName","devLineDescription","friendlyDescription","devLineProgress","devLineEdit","devLineDelete","renderChannels","preventDefault","editedId","onKeyDown","defaultValue","toLowerCase","renderDevice","role","headerRow","headerCell","tableDiv","tableCell","lines","copy","placeholder","InputProps","endAdornment","renderDevices","renderConfirmDialog","renderListOfDevices","devLineEnabled","left","devSubLineEdit","spacing","main","OnOff","Brightness","RGB","AlisaDevices","iobID","includes","getId","func","toUpperCase","devSubSubLine","setId","devSubLineSetId","attributes","description","getAttr","lookup","shift","TreeTable","opened","localStorage","getItem","Array","isArray","editMode","deleteMode","editData","col","level","editable","field","TableCell","clsx","cell","cellSecondary","cellStyle","component","v","data","parentId","children","it","TableRow","row","rowSecondary","rowMainWithChildren","rowMainWithoutChildren","rowNoEdit","cellExpand","scope","columns","ii","renderCell","cellButton","newData","setAttr","onUpdate","renderLine","tableContainer","Table","table","stickyHeader","TableHead","cellHeader","TableBody","React","paddingBottom","paddingRight","width_name_nicknames","width_ioType","width_type","width_displayTraits","width_roomHint","GoogleSmartNames","myTableRef","createRef","expertMode","helpHidden","searchText","helpHeight","wordBreak","editComponent","rows","resize","helpRef","oldData","displayTraits","ghTraits","ghType","displayAttributes","ghAttributes","conv2GH","ghConv2GH","displayConv2GH","conv2iob","ghConv2iob","displayConv2iob","nicknames","n","roomHint","smallDisplay","manualModeHint","ref","flex","Toolbar","hideHelp","setItem","prevProps","prevState","snapshot","current","h","clientHeight","innerHeight","defaultNames","renderToolbar","renderInstructions","onGHParamsChange","smartEnum","useMediaQuery","App","extendedProps","encryptedFields","translations","require","showAckTempPasswordDialog","selectedTab","amazonAlexa","yandexAlisa","DialogContentText","loaded","default","AppBar","Tabs","getSelectedTab","index","selectTab","parentNode","dataset","scrollButtons","Tab","data-name","isIFrame","tabContentIFrame","tabContent","onLoadConfig","updateNativeValue","onShowError","renderError","renderSaveCloseButtons","renderAckTempPasswordDialog","GenericApp","root","Boolean","location","hostname","themeName","getThemeName","version","host","Sentry","dsn","release","integrations","SentryIntegrations","build","ReactDOM","render","onThemeChange","_theme","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.9b17fdb8.chunk.js","sourcesContent":["import React, {Component} from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport Fab from '@material-ui/core/Fab';\nimport PropTypes from 'prop-types';\n\nimport I18n from '@iobroker/adapter-react/i18n';\n\nimport {MdHelpOutline as IconHelp} from 'react-icons/md';\nimport {FaFileDownload as IconDownload} from 'react-icons/fa';\nimport {FaFileUpload as IconUpload} from 'react-icons/fa';\n\nconst styles = theme => ({\n    buttons: {\n        marginRight: 5,\n        marginTop: 5,\n        float: 'right'\n    },\n    logo: {\n        padding: 8,\n        width: 64\n    }\n});\n\nclass Logo extends Component {\n\n    static generateFile(filename, obj) {\n        const el = window.document.createElement('a');\n        el.setAttribute('href', 'data:application/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(obj, null, 2)));\n        el.setAttribute('download', filename);\n\n        el.style.display = 'none';\n        window.document.body.appendChild(el);\n\n        el.click();\n\n        window.document.body.removeChild(el);\n    }\n\n    handleFileSelect(evt) {\n        const f = evt.target.files[0];\n        if (f) {\n            const r = new window.FileReader();\n            r.onload = e => {\n                const contents = e.target.result;\n                try {\n                    const json = JSON.parse(contents);\n                    if (json.native && json.common) {\n                        if (json.common.name !== this.props.common.name) {\n                            this.props.onError(I18n.t('otherConfig', json.common.name));\n                        } else {\n                            this.props.onLoad(json.native);\n                        }\n                    } else {\n                        this.props.onError(I18n.t('invalidConfig'));\n                    }\n                } catch (e) {\n                    this.props.onError(e.toString());\n                }\n            };\n            r.readAsText(f);\n        } else {\n            alert('Failed to open JSON File');\n        }\n    }\n\n    download() {\n        const result = {\n            _id: 'system.adapter.' + this.props.common.name + '.' + this.props.instance,\n            common: JSON.parse(JSON.stringify(this.props.common)),\n            native: this.props.native\n        };\n        // remove unimportant information\n        if (result.common.news) {\n            delete result.common.news;\n        }\n        if (result.common.titleLang) {\n            delete result.common.titleLang;\n        }\n        if (result.common.desc) {\n            delete result.common.desc;\n        }\n\n        //window.open('data:application/iobroker; content-disposition=attachment; filename=' + result._id + '.json,' + JSON.stringify(result, null, 2));\n        Logo.generateFile(result._id + '.json', result);\n    }\n\n    upload() {\n        const input = window.document.createElement('input');\n        input.setAttribute('type', 'file');\n        input.setAttribute('id', 'files');\n        input.setAttribute('opacity', 0);\n        input.addEventListener('change', e => this.handleFileSelect(e, () => {}), false);\n        (input.click)();\n    }\n\n    render() {\n        return (<div>\n            {this.props.common.icon && (<img src={this.props.common.icon} className={this.props.classes.logo} alt=\"logo\"/>)}\n            {this.props.common.readme &&\n                (<Fab size=\"small\" color=\"primary\" aria-label=\"Help\" className={this.props.classes.buttons} onClick={() => {\n                    const win = window.open(this.props.common.readme, '_blank');\n                    win.focus();\n                }}><IconHelp /></Fab>)}\n            <Fab size=\"small\" color=\"primary\" aria-label=\"Load config\" className={this.props.classes.buttons} title={I18n.t('Load configuration from file')} onClick={() => this.upload()}><IconUpload /></Fab>\n            <Fab size=\"small\" color=\"primary\" aria-label=\"Save config\" className={this.props.classes.buttons} title={I18n.t('Save configuration to file')} onClick={() => this.download()}><IconDownload /></Fab>\n        </div>);\n    }\n}\n\nLogo.propTypes = {\n    common: PropTypes.object.isRequired,\n    native: PropTypes.object.isRequired,\n    instance: PropTypes.number.isRequired,\n    onError: PropTypes.func,\n    onLoad: PropTypes.func,\n};\n\nexport default withStyles(styles)(Logo);\n","import React, {Component} from 'react';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils'\r\n\r\nimport {MdRefresh as IconReload} from 'react-icons/md';\r\nimport {MdClose as IconClose} from 'react-icons/md';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport Logo from './Logo';\r\n\r\nconst styles = theme => ({\r\n    tab: {\r\n        width: '100%',\r\n        minHeight: '100%'\r\n    },\r\n    input: {\r\n        minWidth: 300\r\n    },\r\n    button: {\r\n        marginRight: 20,\r\n        marginBottom: 40,\r\n    },\r\n    card: {\r\n        maxWidth: 345,\r\n        textAlign: 'center'\r\n    },\r\n    media: {\r\n        height: 180,\r\n    },\r\n    column: {\r\n        display: 'inline-block',\r\n        verticalAlign: 'top',\r\n        marginRight: 20\r\n    },\r\n    columnLogo: {\r\n        width: 350,\r\n        marginRight: 0\r\n    },\r\n    columnSettings: {\r\n        width: 'calc(100% - 370px)',\r\n    },\r\n    cannotUse: {\r\n        color: 'red',\r\n        fontWeight: 'bold',\r\n    },\r\n    hintUnsaved: {\r\n        fontSize: 12,\r\n        color: 'red',\r\n        fontStyle: 'italic',\r\n    }\r\n});\r\n\r\nclass Options extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            inAction: false,\r\n            toast: '',\r\n            isInstanceAlive: false,\r\n            errorWithPercent: false,\r\n        };\r\n\r\n        this.props.socket.getState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`).then(state =>\r\n            this.setState({isInstanceAlive: state && state.val}));\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.socket.subscribeState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`, this.onAliveChanged);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.props.socket.unsubscribeState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`, this.onAliveChanged);\r\n    }\r\n\r\n    onAliveChanged = (id, state) => {\r\n        if (id === `system.adapter.${this.props.adapterName}.${this.props.instance}.alive`) {\r\n            this.setState({isInstanceAlive: state && state.val});\r\n        }\r\n    };\r\n\r\n    checkPassword(pass) {\r\n        if (pass.length < 8 || !pass.match(/[a-z]/) || !pass.match(/[A-Z]/) || !pass.match(/\\d/)) {\r\n            return I18n.t('invalid_password_warning');\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    renderInput(title, attr, type) {\r\n        const error = attr === 'pass' && this.checkPassword(this.props.native[attr]);\r\n        return (<TextField\r\n            label={ I18n.t(title) }\r\n            error={ !!error  }\r\n            className={ this.props.classes.input }\r\n            value={ this.props.native[attr] }\r\n            type={ type || 'text' }\r\n            helperText={ error || '' }\r\n            onChange={ e => this.props.onChange(attr, e.target.value) }\r\n            margin=\"normal\"\r\n        />);\r\n    }\r\n\r\n    renderCard() {\r\n        return (<Card className={this.props.classes.card}>\r\n            <CardActionArea>\r\n                <CardMedia\r\n                    className={this.props.classes.media}\r\n                    image=\"alexalogo.png\"\r\n                    title=\"Alexa logo\"\r\n                />\r\n                <CardContent>{Utils.renderTextWithA(I18n.t('amazon link'))}</CardContent>\r\n            </CardActionArea>\r\n            <CardActions style={{textAlign: 'center'}} >\r\n                <Button size=\"small\" color=\"primary\" style={{textAlign: 'center'}} onClick={() => {\r\n                    const win = window.open('http://alexa.amazon.de/spa/index.html#skills/dp/B07L66BFF9/reviews', '_blank');\r\n                    win.focus();\r\n                }}>{I18n.t('Review')}</Button>\r\n            </CardActions>\r\n        </Card>);\r\n    }\r\n\r\n    resetCerts(forceUserCreate) {\r\n        this.setState({ inAction: true });\r\n\r\n        this.props.socket.setState('iot.' + this.props.instance + '.certs.private', {val: '', ack: true})\r\n            .then(() => this.props.socket.setState('iot.' + this.props.instance + '.certs.id', {val: '', ack: true}))\r\n            .then(() => this.props.socket.setState('iot.' + this.props.instance + '.certs.public', {val: '', ack: true}))\r\n            .then(() => this.props.socket.setState('iot.' + this.props.instance + '.certs.certificate', {val: '', ack: true}))\r\n            .then(() => {\r\n                if (forceUserCreate) {\r\n                    return this.props.socket.setState('iot.' + this.props.instance + '.certs.forceUserCreate', {val: true, ack: true});\r\n                } else {\r\n                    return Promise.resolve();\r\n                }\r\n            })\r\n            // read actual instance object\r\n            .then(() => this.props.socket.getObject('system.adapter.iot.' + this.props.instance))\r\n            .then(obj => {\r\n                if (!obj || !obj.common || !obj.common.enabled) {\r\n                    // adapter is disabled, do not restart it\r\n                    return Promise.resolve();\r\n                } else {\r\n                    // restart adapter\r\n                    return this.props.socket.setObject('system.adapter.iot.' + this.props.instance, obj);\r\n                }\r\n            })\r\n            .then(() => this.setState({toast: I18n.t('Certificates will be updated after start')}))\r\n            .catch(err => this.props.onError(err))\r\n            .then(() => this.setState({inAction: false}));\r\n    }\r\n\r\n    renderToast() {\r\n        if (!this.state.toast) return null;\r\n        return (\r\n            <Snackbar\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'left',\r\n                }}\r\n                open={true}\r\n                autoHideDuration={6000}\r\n                onClose={() => this.setState({toast: ''})}\r\n                ContentProps={{\r\n                    'aria-describedby': 'message-id',\r\n                }}\r\n                message={<span id=\"message-id\">{this.state.toast}</span>}\r\n                action={[\r\n                    <IconButton\r\n                        key=\"close\"\r\n                        aria-label=\"Close\"\r\n                        color=\"inherit\"\r\n                        className={this.props.classes.close}\r\n                        onClick={() => this.setState({toast: ''})}\r\n                    >\r\n                        <IconClose />\r\n                    </IconButton>,\r\n                ]}\r\n            />);\r\n    }\r\n\r\n    renderCheckbox(title, attr, style) {\r\n        return (<FormControlLabel key={attr} style={Object.assign({paddingTop: 5}, style)} className={this.props.classes.controlElement}\r\n              control={\r\n                  <Checkbox\r\n                      checked={this.props.native[attr]}\r\n                      onChange={() => this.props.onChange(attr, !this.props.native[attr])}\r\n                      color=\"primary\"\r\n                  />\r\n              }\r\n              label={I18n.t(title)}\r\n        />);\r\n    }\r\n\r\n    render() {\r\n        return <form className={ this.props.classes.tab }>\r\n            <Logo\r\n                instance={ this.props.instance }\r\n                common={ this.props.common }\r\n                native={ this.props.native }\r\n                onError={ text => this.setState({errorText: text}) }\r\n                onLoad={ this.props.onLoad }\r\n            />\r\n            <div className={ this.props.classes.column + ' ' + this.props.classes.columnSettings }>\r\n                { this.renderInput('ioBroker.pro Login', 'login') }<br/>\r\n                { this.renderInput('ioBroker.pro Password', 'pass', 'password') }<br/>\r\n                { this.renderCheckbox('Amazon Alexa', 'amazonAlexa') }\r\n                <FormControlLabel key=\"googleHome\" className={ this.props.classes.controlElement }\r\n                                  style={{ marginTop: 5 }}\r\n                    control={\r\n                      <Checkbox\r\n                          checked={this.props.native.googleHome}\r\n                          onChange={() => {\r\n                              // activate alexa if google home is on (temporary)\r\n                              const newVal = !this.props.native.googleHome;\r\n                              this.props.onChange('googleHome', newVal, () =>\r\n                                  newVal && this.props.onChange('amazonAlexa', true));\r\n                          }}\r\n                          color=\"primary\"\r\n                      />\r\n                    }\r\n                    label={I18n.t('Google Home')}\r\n                />\r\n                {this.renderCheckbox('Yandex ', 'yandexAlisa')}\r\n                <br/>\r\n\r\n                <p>{I18n.t('new_certs_tip')}</p>\r\n                {this.props.changed ? <div className={this.props.classes.hintUnsaved}>{I18n.t('Save settings before pressing this button')}</div> : null}\r\n                <Button variant=\"outlined\"\r\n                        className={ this.props.classes.button }\r\n                        disabled={ this.props.changed || this.state.inAction || !this.state.isInstanceAlive }\r\n                        title={ !this.state.isInstanceAlive ? I18n.t('Instance must be enabled') : '' }\r\n                        onClick={ () => this.resetCerts() }>\r\n                    <IconReload style={{ marginRight: 8 }}/>{ I18n.t('Get new connection certificates') }\r\n                </Button>\r\n\r\n                <p>{I18n.t('new_credentials_tip')}</p>\r\n                {this.props.changed ? <div className={this.props.classes.hintUnsaved}>{I18n.t('Save settings before pressing this button')}</div> : null}\r\n                <Button variant=\"outlined\"\r\n                        className={ this.props.classes.button }\r\n                        disabled={ this.props.changed || this.state.inAction || !this.state.isInstanceAlive }\r\n                        title={ !this.state.isInstanceAlive ? I18n.t('Instance must be enabled') : '' }\r\n                        onClick={ () => this.resetCerts(true) }>\r\n                    <IconReload  style={{ marginRight: 8 }}/>{ I18n.t('Create IoT credentials anew') }\r\n                </Button>\r\n                <p>{ Utils.renderTextWithA(I18n.t('forum_tip')) }</p>\r\n                <p style={{ fontWeight: 'bold' }}>{ Utils.renderTextWithA(I18n.t('help_tip')) }</p>\r\n                <p style={{ fontWeight: 'bold', paddingTop: 20}}>{ Utils.renderTextWithA(I18n.t('help_link_tip1')) }</p>\r\n                <p style={{ fontWeight: 'bold' }}>{ Utils.renderTextWithA(I18n.t('help_link_tip2')) }</p>\r\n                <p style={{ fontWeight: 'bold', color: 'red'}}>{ Utils.renderTextWithA(I18n.t('help_link_tip3')) }</p>\r\n            </div>\r\n            <div className={this.props.classes.column + ' ' + this.props.classes.columnLogo}>{this.renderCard() }</div>\r\n            { this.renderToast() }\r\n        </form>;\r\n    }\r\n}\r\n\r\nOptions.propTypes = {\r\n    common: PropTypes.object.isRequired,\r\n    native: PropTypes.object.isRequired,\r\n    instance: PropTypes.number.isRequired,\r\n    adapterName: PropTypes.string.isRequired,\r\n    onError: PropTypes.func,\r\n    onLoad: PropTypes.func,\r\n    onChange: PropTypes.func,\r\n    changed: PropTypes.bool,\r\n    socket: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(Options);\r\n","import React, {Component} from 'react';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Input from '@material-ui/core/Input';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\n\r\nimport {MdAdd as IconAdd} from 'react-icons/md';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport DialogSelectID from '@iobroker/adapter-react/Dialogs/SelectID';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils'\r\n\r\nconst styles = theme => ({\r\n    tab: {\r\n        width: '100%',\r\n        minHeight: '100%'\r\n    },\r\n    input: {\r\n        marginTop: 0,\r\n        minWidth: 400\r\n    },\r\n    button: {\r\n        marginRight: 20,\r\n    },\r\n    card: {\r\n        maxWidth: 345,\r\n        textAlign: 'center'\r\n    },\r\n    media: {\r\n        height: 180,\r\n    },\r\n    column: {\r\n        display: 'inline-block',\r\n        verticalAlign: 'top',\r\n        marginRight: 20\r\n    },\r\n    columnLogo: {\r\n        width: 350,\r\n        marginRight: 0\r\n    },\r\n    columnSettings: {\r\n        width: 'calc(100% - 370px)',\r\n    },\r\n    controlElement: {\r\n        //background: '#d2d2d2',\r\n        marginBottom: 5\r\n    }\r\n});\r\n\r\nclass ExtendedOptions extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            showSelectId: false,\r\n        };\r\n\r\n    }\r\n\r\n    renderInput(title, attr, type) {\r\n        return (<TextField\r\n            label={I18n.t(title)}\r\n            className={this.props.classes.input + ' ' + this.props.classes.controlElement}\r\n            value={this.props.native[attr]}\r\n            type={type || 'text'}\r\n            onChange={e => this.props.onChange(attr, e.target.value)}\r\n            margin=\"normal\"\r\n        />);\r\n    }\r\n\r\n    renderSelect(title, attr, options, style) {\r\n        return (<FormControl className={this.props.classes.input + ' ' + this.props.classes.controlElement} style={Object.assign({paddingTop: 5}, style)}>\r\n            <Select\r\n                value={this.props.native[attr] || '_'}\r\n                onChange={e => this.props.onChange(attr, e.target.value === '_' ? '' : e.target.value)}\r\n                input={<Input name={attr} id={attr + '-helper'} />}\r\n            >\r\n                {options.map(item => (<MenuItem key={'key-' + item.value} value={item.value || '_'}>{I18n.t(item.title)}</MenuItem>))}\r\n            </Select>\r\n            <FormHelperText>{I18n.t(title)}</FormHelperText>\r\n        </FormControl>);\r\n    }\r\n\r\n    renderCheckbox(title, attr, style) {\r\n        return (<FormControlLabel key={attr} style={Object.assign({paddingTop: 5}, style)} className={this.props.classes.controlElement}\r\n            control={\r\n                <Checkbox\r\n                    checked={this.props.native[attr]}\r\n                    onChange={() => this.props.onChange(attr, !this.props.native[attr])}\r\n                    color=\"primary\"\r\n                />\r\n            }\r\n            label={I18n.t(title)}\r\n        />);\r\n    }\r\n\r\n    getSelectIdDialog(attr) {\r\n        if (this.state.showSelectId) {\r\n            return <DialogSelectID\r\n                key=\"dialogSelectID2\"\r\n                imagePrefix={'../..'}\r\n                socket={this.props.socket}\r\n                selected={this.props.native[attr]}\r\n                types={['state']}\r\n                onClose={() => this.setState({showSelectId: false})}\r\n                onOk={selected => {\r\n                    this.setState({showSelectId: false});\r\n                    this.props.onChange(attr, selected);\r\n                }}\r\n            />;\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <form className={this.props.classes.tab}>\r\n                {this.renderInput('Cloud URL', 'cloudUrl')}<br/>\r\n                {this.renderSelect('Language', 'language', [\r\n                    {title: 'default', value: ''},\r\n                    {title: 'english', value: 'en'},\r\n                    {title: 'Deutsch', value: 'de'},\r\n                    {title: '', value: 'ru'}\r\n                ], {marginTop: 10})}<br/>\r\n                {this.renderCheckbox('Place function in names first', 'functionFirst', {marginTop: 10})}<br/>\r\n                {this.renderInput('Concatenate words with', 'concatWord')}<br/>\r\n                {this.renderInput('Replace in names', 'replaces')}<br/>\r\n                <div className={this.props.classes.controlElement} style={{marginTop: 15}}>\r\n                    {this.renderInput('OFF level for switches in %', 'deviceOffLevel')}\r\n                    <FormHelperText>{I18n.t('(Set to 0 if behavior not desired)')}</FormHelperText>\r\n                </div>\r\n                <div className={this.props.classes.controlElement}>\r\n                    {this.renderInput('Write response to', 'responseOID')}\r\n                    <Fab size=\"small\" color=\"secondary\" onClick={() => this.setState({showSelectId: true})} aria-label=\"Add\" style={{marginLeft: 5, marginTop: 10}}><IconAdd /></Fab><br/>\r\n                </div>\r\n                <div className={this.props.classes.controlElement}>\r\n                    {this.renderCheckbox('Personal settings (only pro)', 'noCommon')}\r\n                    <FormHelperText>{Utils.renderTextWithA(I18n.t('help_tip'))}</FormHelperText><br/>\r\n                </div>\r\n                {this.renderCheckbox('Debug outputs', 'debug')}\r\n                {this.getSelectIdDialog('responseOID')}\r\n            </form>\r\n        );\r\n    }\r\n}\r\n\r\nExtendedOptions.propTypes = {\r\n    common: PropTypes.object.isRequired,\r\n    native: PropTypes.object.isRequired,\r\n    instance: PropTypes.number.isRequired,\r\n    onError: PropTypes.func,\r\n    onLoad: PropTypes.func,\r\n    onChange: PropTypes.func,\r\n    socket: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(ExtendedOptions);\r\n","import React, {Component} from 'react';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Input from '@material-ui/core/Input';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Button from '@material-ui/core/Button';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\n\r\nimport {MdRefresh as IconRefresh} from 'react-icons/md';\r\nimport {MdClose as IconClose} from 'react-icons/md';\r\nimport {MdAdd as IconAdd} from 'react-icons/md';\r\n\r\nimport IconCopy from '@iobroker/adapter-react/Components/CopyIcon';\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\nimport DialogSelectID from '@iobroker/adapter-react/Dialogs/SelectID';\r\n\r\nconst styles = theme => ({\r\n    tab: {\r\n        width: '100%',\r\n        minHeight: '100%'\r\n    },\r\n    input: {\r\n        marginTop: 0,\r\n        minWidth: 400\r\n    },\r\n    fullSize: {\r\n        width: 'calc(100% - 64px)'\r\n    },\r\n    normalSize: {\r\n        width: 'calc(30% - 64px)',\r\n        marginLeft: 10\r\n    },\r\n    button: {\r\n        marginRight: 20,\r\n    },\r\n    card: {\r\n        maxWidth: 345,\r\n        textAlign: 'center'\r\n    },\r\n    media: {\r\n        height: 180,\r\n    },\r\n    column: {\r\n        display: 'inline-block',\r\n        verticalAlign: 'top',\r\n        marginRight: 20\r\n    },\r\n    columnLogo: {\r\n        width: 350,\r\n        marginRight: 0\r\n    },\r\n    columnSettings: {\r\n        width: 'calc(100% - 370px)',\r\n    },\r\n    controlElement: {\r\n        //background: '#d2d2d2',\r\n        marginBottom: 5\r\n    },\r\n    chips: {\r\n        border: '1px solid #DDD',\r\n        borderRadius: 1,\r\n        width: 'calc(100% - 250px)',\r\n        display: 'inline-block',\r\n        padding: 5,\r\n        minHeight: 32,\r\n        marginLeft: 10,\r\n        marginTop: 20\r\n    },\r\n    chip: {\r\n        marginRight: 5\r\n    }\r\n});\r\n\r\nclass Services extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            running: false,\r\n            toast: '',\r\n            showSelectId: false,\r\n            text2commandList: [],\r\n            nightscoutList: [],\r\n            addValue: '',\r\n            isInstanceAlive: false\r\n        };\r\n        this.onKeyChangedBound = this.onKeyChanged.bind(this);\r\n\r\n        this.props.socket.getAdapterInstances('text2command')\r\n            .then(list =>\r\n                this.props.socket.getAdapterInstances('nightscout')\r\n                    .then(nsList => this.setState({\r\n                        nightscoutList: nsList.map(obj => obj._id.replace('system.adapter.nightscout.', '')),\r\n                        text2commandList: list.map(obj => obj._id.replace('system.adapter.text2command.', ''))\r\n                    })));\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.socket.subscribeState('iot.' + this.props.instance + '.certs.urlKey', this.onKeyChangedBound);\r\n\r\n        this.props.socket.getObject(`system.adapter.${this.props.adapterName}.${this.props.instance}`).then(obj =>\r\n            this.props.socket.getState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`).then(state =>\r\n                this.setState({isInstanceAlive: obj && obj.common && state && state.val})));\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.props.socket.unsubscribeState('iot.' + this.props.instance + '.certs.urlKey', this.onKeyChangedBound);\r\n    }\r\n\r\n    onKeyChanged(id, state) {\r\n        state && this.setState({key: state.val});\r\n    }\r\n\r\n    renderInput(title, attr, type) {\r\n        return (<TextField\r\n            label={I18n.t(title)}\r\n            className={this.props.classes.input + ' ' + this.props.classes.controlElement}\r\n            value={this.props.native[attr]}\r\n            type={type || 'text'}\r\n            onChange={e => this.props.onChange(attr, e.target.value)}\r\n            margin=\"normal\"\r\n        />);\r\n    }\r\n\r\n    reissueUrlKey() {\r\n        this.setState({running: true});\r\n        return this.props.socket.setState('iot.' + this.props.instance + '.certs.urlKey', {val: '', ack: true})\r\n            .then(() => this.props.socket.getObject('system.adapter.iot.' + this.props.instance))\r\n            .then(obj => {\r\n                if (!obj || !obj.common || !obj.common.enabled) {\r\n                    this.setState({running: false, toast: I18n.t('Key will be updated after start')});\r\n                } else {\r\n                    return this.props.socket.setObject('system.adapter.iot.' + this.props.instance, obj);\r\n                }\r\n            })\r\n            .then(() => this.setState({running: false, toast: I18n.t('Certificates will be updated after initiated restart')}))\r\n            .catch(err => {\r\n                this.setState({running: false});\r\n                this.props.showError(err);\r\n            });\r\n    }\r\n\r\n    renderToast() {\r\n        if (!this.state.toast) return null;\r\n        return (\r\n            <Snackbar\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'left',\r\n                }}\r\n                open={true}\r\n                autoHideDuration={6000}\r\n                onClose={() => this.setState({toast: ''})}\r\n                ContentProps={{\r\n                    'aria-describedby': 'message-id',\r\n                }}\r\n                message={<span id=\"message-id\">{this.state.toast}</span>}\r\n                action={[\r\n                    <IconButton\r\n                        key=\"close\"\r\n                        aria-label=\"Close\"\r\n                        color=\"inherit\"\r\n                        className={this.props.classes.close}\r\n                        onClick={() => this.setState({toast: ''})}\r\n                    >\r\n                        <IconClose />\r\n                    </IconButton>,\r\n                ]}\r\n            />);\r\n    }\r\n\r\n    onChipsDelete(attr, value) {\r\n        const chips = (this.props.native[attr] || '').split(/[,;\\s]/).filter(a => !!a);\r\n        const pos = chips.indexOf(value);\r\n        if (pos !== -1) {\r\n            chips.splice(pos, 1);\r\n            this.props.onChange(attr, chips.join(' '));\r\n        }\r\n    }\r\n\r\n    onChipsAdd(attr) {\r\n        const chips = (this.props.native[attr] || '').split(/[,;\\s]/).filter(a => !!a);\r\n        const pos = chips.indexOf(this.state.addValue);\r\n        if (pos === -1) {\r\n            chips.push(this.state.addValue);\r\n            this.setState({addValue: ''}, () => this.props.onChange(attr, chips.join(' ')));\r\n        }\r\n    }\r\n\r\n    calcNightscoutSecret() {\r\n        const email = this.props.native.login.replace(/[^\\w\\d-_]/g, '_');\r\n        const secret = this.props.native.nightscoutPass;\r\n        return email + (secret ? '-' + secret : '');\r\n    }\r\n\r\n    getSelectIdDialog(attr) {\r\n        if (this.state.showSelectId) {\r\n            return <DialogSelectID\r\n                key=\"dialogSelectID3\"\r\n                imagePrefix={'../..'}\r\n                socket={this.props.socket}\r\n                selected={this.props.native[attr]}\r\n                types={['state']}\r\n                onClose={() => this.setState({showSelectId: false})}\r\n                onOk={selected => {\r\n                    this.setState({showSelectId: false});\r\n                    this.props.onChange(attr, selected);\r\n                }}\r\n            />;\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    renderChips(label, attr) {\r\n        return (<div className={this.props.classes.chipsDiv}>\r\n            <FormHelperText>{Utils.renderTextWithA(I18n.t(label))}</FormHelperText>\r\n            <TextField\r\n                label={I18n.t('Add service')}\r\n                style={{width: 150}}\r\n                type={'text'}\r\n                value={this.state.addValue}\r\n                onKeyUp={e => e.keyCode === 13 && this.onChipsAdd(attr)}\r\n                onChange={e => this.setState({addValue: e.target.value.trim()})}\r\n                margin=\"normal\"\r\n            />\r\n\r\n            <Fab size=\"small\" color=\"secondary\" disabled={!this.state.addValue} onClick={() => this.onChipsAdd(attr)} style={{marginLeft: 5, marginTop: -15}}><IconAdd /></Fab>\r\n\r\n            <div className={this.props.classes.chips}>\r\n                {(this.props.native[attr] || '').split(/[,;\\s]/).filter(a => !!a)\r\n                .map(word =>\r\n                    (<Chip\r\n                        key={word}\r\n                        size=\"small\"\r\n                        label={word}\r\n                        onDelete={() => this.onChipsDelete(attr, word)}\r\n                        className={this.props.classes.chip}\r\n                    />))}\r\n            </div>\r\n        </div>);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <form className={this.props.classes.tab}>\r\n                <Button\r\n                    variant=\"outlined\"\r\n                    disabled={!this.state.isInstanceAlive || this.state.running}\r\n                    color=\"primary\"\r\n                    title={!this.state.isInstanceAlive ? I18n.t('Instance must be enabled') : ''}\r\n                    onClick={() => this.reissueUrlKey()}>\r\n                    <IconRefresh />{I18n.t('Get new service URL key')}\r\n                </Button><br/>\r\n\r\n                {this.renderInput('IFTTT key', 'iftttKey')}<br/>\r\n\r\n                <TextField\r\n                    style={{marginTop: 10}}\r\n                    label={I18n.t('Use following link for IFTTT')}\r\n                    className={this.props.classes.input + ' ' + this.props.classes.controlElement + ' ' + this.props.classes.fullSize}\r\n                    value={`https://service.iobroker.in/v1/iotService?service=ifttt&key=${this.state.key}&user=${encodeURIComponent(this.props.native.login)}`}\r\n                    type=\"text\"\r\n                    readOnly={true}\r\n                    margin=\"normal\"\r\n                />\r\n                <Fab size=\"small\" style={{marginTop: 10, marginLeft: 5}} onClick={() => Utils.copyToClipboard(`https://service.iobroker.in/v1/iotService?service=ifttt&key=${this.state.key}&user=${encodeURIComponent(this.props.native.login)}`)} ><IconCopy /></Fab><br/>\r\n                <br/>\r\n\r\n                {this.renderChips('White list for services', 'allowedServices')}<br/>\r\n\r\n                <TextField\r\n                    style={{marginTop: 10}}\r\n                    label={I18n.t('Use following link for custom service')}\r\n                    className={this.props.classes.input + ' ' + this.props.classes.controlElement + ' ' + this.props.classes.fullSize}\r\n                    value={`https://service.iobroker.in/v1/iotService?service=custom_<SERVICE_NAME>&key=${this.state.key}&user=${encodeURIComponent(this.props.native.login)}&data=<SOME_TEXT>`}\r\n                    type=\"text\"\r\n                    readOnly={true}\r\n                    margin=\"normal\"\r\n                />\r\n                <Fab size=\"small\" style={{marginTop: 10, marginLeft: 5}} onClick={() => Utils.copyToClipboard(`https://service.iobroker.in/v1/iotService?service=custom_<SERVICE_NAME>&key=${this.state.key}&user=${encodeURIComponent(this.props.native.login)}&data=<SOME_TEXT>`)}><IconCopy /></Fab><br/>\r\n\r\n                <FormControl className={this.props.classes.input + ' ' + this.props.classes.controlElement} style={{paddingTop: 20}}>\r\n                    <Select\r\n                        value={this.props.native.text2command || '_'}\r\n                        onChange={e => this.props.onChange('text2command', e.target.value === '_' ? '' : e.target.value)}\r\n                        input={<Input name=\"text2command\" id=\"text2command-helper\" />}\r\n                    >\r\n                        <MenuItem key=\"key-default\" value={'_'}>{I18n.t('disabled')}</MenuItem>\r\n                        {this.state.text2commandList.map(item => (<MenuItem key={'key-' + item} value={item}>text2command.{item}</MenuItem>))}\r\n                    </Select>\r\n                    <FormHelperText>{I18n.t('Use text2command instance')}</FormHelperText>\r\n                </FormControl>\r\n                <br/>\r\n                <FormControl className={this.props.classes.input + ' ' + this.props.classes.controlElement} style={{paddingTop: 20}}>\r\n                    <Select\r\n                        value={this.props.native.nightscout || '_'}\r\n                        onChange={e => this.props.onChange('nightscout', e.target.value === '_' ? '' : e.target.value)}\r\n                        input={<Input name=\"nightscout\" id=\"nightscout-helper\" />}\r\n                    >\r\n                        <MenuItem key=\"key-default\" value={'_'}>{I18n.t('disabled')}</MenuItem>\r\n                        {this.state.nightscoutList.map(item => (<MenuItem key={'key-' + item} value={item}>nightscout.{item}</MenuItem>))}\r\n                    </Select>\r\n                    <FormHelperText>{I18n.t('Use Nightscout instance')}</FormHelperText>\r\n                </FormControl>\r\n                {this.props.native.nightscout ? (<TextField\r\n                    style={{marginTop: 3.5}}\r\n                    label={I18n.t('Nightscout password')}\r\n                    onChange={e => this.props.onChange('nightscoutPass', e.target.value.replace(/[^\\w\\d-_]/g, '_'))}\r\n                    className={this.props.classes.input + ' ' + this.props.classes.controlElement + ' ' + this.props.classes.normalSize}\r\n                    value={this.props.native.nightscoutPass}\r\n                    type=\"text\"\r\n                    margin=\"normal\"\r\n                />) : null}\r\n                {this.props.native.nightscout ? (<TextField\r\n                    style={{marginTop: 3.5}}\r\n                    label={I18n.t('Nightscout api-secret')}\r\n                    className={this.props.classes.input + ' ' + this.props.classes.controlElement + ' ' + this.props.classes.normalSize}\r\n                    value={this.calcNightscoutSecret()}\r\n                    type=\"text\"\r\n                    readOnly={true}\r\n                    margin=\"normal\"\r\n                />) : null}\r\n                <br/>\r\n                <br/>\r\n                <div className={this.props.classes.controlElement}>\r\n                    <TextField\r\n                        label={I18n.t('Read blood sugar from')}\r\n                        className={this.props.classes.input + ' ' + this.props.classes.controlElement}\r\n                        value={this.props.native.amazonAlexaBlood || ''}\r\n                        type=\"text\"\r\n                        onChange={e => this.props.onChange('amazonAlexaBlood', e.target.value)}\r\n                        margin=\"normal\"\r\n                    />\r\n                    <Fab size=\"small\" color=\"secondary\" onClick={() => this.setState({showSelectId: true})} aria-label=\"Add\" style={{marginLeft: 5, marginTop: 10}}><IconAdd /></Fab>\r\n                    <FormControlLabel  className={this.props.classes.controlElement}\r\n                        control={\r\n                            <Checkbox\r\n                                style={{paddingLeft: 30}}\r\n                                checked={this.props.native.amazonAlexaBloodShortAnswer || false}\r\n                                onChange={e => this.props.onChange('amazonAlexaBloodShortAnswer', e.target.checked)}\r\n                                color=\"primary\"\r\n                            />\r\n                        }\r\n                        label={I18n.t('Short answer for blood sugar')}\r\n                    />\r\n                </div>\r\n                <br/>\r\n                {this.renderToast()}\r\n                {this.getSelectIdDialog('amazonAlexaBlood')}\r\n            </form>\r\n        );\r\n    }\r\n}\r\n\r\nServices.propTypes = {\r\n    common: PropTypes.object.isRequired,\r\n    native: PropTypes.object.isRequired,\r\n    instance: PropTypes.number.isRequired,\r\n    adapterName: PropTypes.string.isRequired,\r\n    onError: PropTypes.func,\r\n    onLoad: PropTypes.func,\r\n    onChange: PropTypes.func,\r\n    socket: PropTypes.object.isRequired,\r\n    onShowError: PropTypes.func,\r\n};\r\n\r\nexport default withStyles(styles)(Services);\r\n","import React, {Component} from 'react';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport {MdEdit as IconEdit} from 'react-icons/md';\r\n\r\nimport Utils from '@iobroker/adapter-react/Components/Utils'\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport MessageDialog from '@iobroker/adapter-react/Dialogs/Message';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nconst CHANGED_COLOR = '#e7000040';\r\n\r\nconst styles = theme => ({\r\n    tab: {\r\n        width: '100%',\r\n        height: '100%'\r\n    },\r\n    column: {\r\n        display: 'inline-block',\r\n        verticalAlign: 'top',\r\n        marginRight: 20,\r\n        height: '100%',\r\n        overflow: 'hidden',\r\n        width: 'calc(50% - 20px)',\r\n        minWidth: 300,\r\n        maxWidth: 450\r\n    },\r\n    columnDiv: {\r\n        height: 'calc(100% - 60px)',\r\n        overflow: 'auto',\r\n        minWidth: 300\r\n    },\r\n    enumLineEnabled: {\r\n        position: 'absolute',\r\n        right: 0,\r\n        top: 0,\r\n    },\r\n    enumLineEdit: {\r\n        //float: 'right'\r\n        position: 'absolute',\r\n        top: 5,\r\n        right: 50\r\n    },\r\n    enumLineName: {\r\n\r\n    },\r\n    enumLineSubName:{\r\n        fontStyle: 'italic',\r\n    },\r\n    enumLine: {\r\n        height: 48,\r\n        width: '100%',\r\n        position: 'relative'\r\n    },\r\n    enumLineId: {\r\n        display: 'block',\r\n        fontStyle: 'italic',\r\n        fontSize: 12\r\n    },\r\n    columnHeader: {\r\n        background: theme.palette.primary.light,\r\n        padding: 10,\r\n        color: theme.palette.primary.contrastText\r\n    }\r\n});\r\n\r\nclass Enums extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            inAction: false,\r\n            editId: '',\r\n            editedSmartName: '',\r\n            funcs: [],\r\n            rooms: [],\r\n            changed: [],\r\n            message: '',\r\n            loading: true,\r\n        };\r\n\r\n        this.onEnumUpdateBound = this.onEnumUpdate.bind(this);\r\n\r\n        this.props.socket.getEnums()\r\n            .then(res => {\r\n                const funcs = [];\r\n                const rooms = [];\r\n                Object.keys(res).forEach(id => {\r\n                    if (id.match(/^enum\\.rooms\\./)) {\r\n                        rooms.push(res[id]);\r\n                    } else\r\n                    if (id.match(/^enum\\.functions\\./)) {\r\n                        funcs.push(res[id]);\r\n                    }\r\n                });\r\n\r\n                this.setState({funcs, rooms, loading: false});\r\n                return this.props.socket.subscribeObject('enum.*', this.onEnumUpdateBound);\r\n            });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.props.socket.unsubscribeObject('enum.*', this.onEnumUpdateBound).then(() => {});\r\n    }\r\n\r\n    onEnumUpdate(id, obj) {\r\n        this.removeChanged(id);\r\n        this.updateObjInState(id, obj);\r\n    }\r\n\r\n    informInstance(id) {\r\n        this.props.socket.sendTo(this.props.adapterName + '.' + this.props.instance, 'update', id);\r\n    }\r\n\r\n    addChanged(id) {\r\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\r\n        if (changed.indexOf(id) === -1) {\r\n            changed.push(id);\r\n            this.setState({changed});\r\n        }\r\n    }\r\n\r\n    removeChanged(id) {\r\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\r\n        const pos = changed.indexOf(id);\r\n\r\n        if (pos !== -1) {\r\n            changed.splice(pos, 1);\r\n            this.setState({changed});\r\n        }\r\n    }\r\n\r\n    updateObjInState(id, obj) {\r\n        // update obj\r\n        if (id.match(/^enum\\.functions\\./)) {\r\n            for (let i = this.state.funcs.length - 1; i >= 0 ; i--) {\r\n                if (this.state.funcs[i]._id === id) {\r\n                    const funcs = JSON.parse(JSON.stringify(this.state.funcs));\r\n                    if (obj) {\r\n                        funcs[i] = obj;\r\n                    } else {\r\n                        funcs.splice(i, 1);\r\n                    }\r\n                    this.setState({funcs});\r\n                    break;\r\n                }\r\n            }\r\n        } else\r\n        if (id.match(/^enum\\.rooms\\./)) {\r\n            for (let i = this.state.rooms.length - 1; i >= 0; i--) {\r\n                if (this.state.rooms[i]._id === id) {\r\n                    const rooms = JSON.parse(JSON.stringify(this.state.rooms));\r\n                    if (obj) {\r\n                        rooms[i] = obj;\r\n                    } else {\r\n                        rooms.splice(i, 1);\r\n                    }\r\n                    this.setState({rooms});\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    onToggleEnum(id) {\r\n        let obj = this.state.funcs.find(e => e._id === id) || this.state.rooms.find(e => e._id === id);\r\n\r\n        let smartName = Utils.getSmartNameFromObj(obj);\r\n        obj = JSON.parse(JSON.stringify(obj));\r\n        if (smartName !== false) {\r\n            Utils.disableSmartName(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\r\n        } else {\r\n            Utils.removeSmartName(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\r\n        }\r\n\r\n        this.addChanged(id);\r\n\r\n        this.props.socket.setObject(id, obj)\r\n            .then(() => {\r\n                // update obj\r\n                this.updateObjInState(id, obj);\r\n                this.informInstance(id);\r\n\r\n                setTimeout(() => this.removeChanged(id), 500);\r\n            });\r\n    }\r\n\r\n    onEdit(id) {\r\n        const obj = this.state.funcs.find(e => e._id === id) || this.state.rooms.find(e => e._id === id);\r\n        let smartName = Utils.getSmartNameFromObj(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\r\n        if (typeof smartName === 'object' && smartName) {\r\n            smartName = smartName[I18n.getLanguage()] || smartName.en;\r\n        }\r\n        smartName = smartName || Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()});\r\n        this.setState({editId: id, editedSmartName: smartName});\r\n    }\r\n\r\n    renderEnum(obj) {\r\n        let smartName = Utils.getSmartNameFromObj(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\r\n        // convert old format\r\n        if (smartName && typeof smartName === 'object') {\r\n            smartName = smartName[I18n.getLanguage()] || smartName.en || '';\r\n        }\r\n        let name = Utils.getObjectNameFromObj(obj);\r\n\r\n        return (<div key={obj._id} className={this.props.classes.enumLine} style={{background: this.state.changed.indexOf(obj._id) !== -1 ? CHANGED_COLOR : 'inherit'}}>\r\n            <span className={this.props.classes.enumLineName} style={{opacity: smartName === false ? 0.5: 1}}>{smartName || null}{smartName ? (<span className={this.props.classes.enumLineSubName}> ({name})</span>) : name}</span>\r\n            <span className={this.props.classes.enumLineId} style={{opacity: smartName === false ? 0.5: 1}}>{obj._id}</span>\r\n            <Switch\r\n                className={this.props.classes.enumLineEnabled}\r\n                checked={smartName !== false}\r\n                onChange={() => this.onToggleEnum(obj._id)}\r\n            />\r\n            <IconButton aria-label=\"Edit\" className={this.props.classes.enumLineEdit} onClick={() => this.onEdit(obj._id)}>\r\n                <IconEdit fontSize=\"small\" />\r\n            </IconButton>\r\n\r\n        </div>);\r\n    }\r\n\r\n    renderEnums(name) {\r\n        return this.state[name].map(e => this.renderEnum(e));\r\n    }\r\n\r\n    renderMessage() {\r\n        if (this.state.message) {\r\n            return (<MessageDialog text={this.state.message} onClose={() => this.setState({message: ''})}/>);\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    changeSmartName() {\r\n        // Check if the name is duplicate\r\n        let enums = this.state.editId.startsWith('enum.functions.') ? this.state.funcs : this.state.rooms;\r\n        if (enums.find(obj =>\r\n            this.state.editId !== obj._id && (\r\n            this.state.editedSmartName === Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()}) ||\r\n            this.state.editedSmartName === Utils.getSmartNameFromObj(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon)))) {\r\n            this.setState({message: I18n.t('Duplicate name')});\r\n        } else {\r\n            this.addChanged(this.state.editId);\r\n            setTimeout(() => this.removeChanged(this.state.editId), 500);\r\n            const id = this.state.editId;\r\n            this.setState({editId: ''});\r\n            let newObj;\r\n            this.props.socket.getObject(id)\r\n                .then(obj => {\r\n                    Utils.updateSmartName(obj, this.state.editedSmartName, undefined, undefined, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\r\n                    newObj = obj;\r\n                    return this.props.socket.setObject(id, obj);\r\n                })\r\n                .then(() => {\r\n                    // update obj\r\n                    this.updateObjInState(id, newObj);\r\n                    this.informInstance(id);\r\n                })\r\n                .catch(err => this.props.onError(err));\r\n        }\r\n    }\r\n\r\n    renderEditDialog() {\r\n        if (this.state.editId) {\r\n            const obj = this.state.funcs.find(e => e._id === this.state.editId) || this.state.rooms.find(e => e._id === this.state.editId);\r\n\r\n            return (<Dialog\r\n                open={true}\r\n                maxWidth=\"sm\"\r\n                fullWidth={true}\r\n                onClose={() => this.setState({editId: ''})}\r\n                aria-labelledby=\"message-dialog-title\"\r\n                aria-describedby=\"message-dialog-description\"\r\n            >\r\n                <DialogTitle id=\"message-dialog-title\">{this.props.title || I18n.t('Smart name for %s', Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()}))}</DialogTitle>\r\n                <DialogContent>\r\n                    <TextField\r\n                        style={{width: '100%'}}\r\n                        label={I18n.t('Smart name')}\r\n                        onChange={e => this.setState({editedSmartName: e.target.value})}\r\n                        value={this.state.editedSmartName}\r\n                        helperText={I18n.t('You can enter several names divided by comma')}\r\n                        margin=\"normal\"\r\n                    />\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={() => this.changeSmartName()} color=\"primary\" autoFocus>{I18n.t('Ok')}</Button>\r\n                    <Button onClick={() => this.setState({editId: ''})}>{I18n.t('Cancel')}</Button>\r\n                </DialogActions>\r\n            </Dialog>)\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (this.state.loading) {\r\n            return (<CircularProgress />);\r\n        }\r\n        return (\r\n            <form className={this.props.classes.tab}>\r\n                <div className={this.props.classes.column}>\r\n                    <h5 className={this.props.classes.columnHeader}>{I18n.t('Rooms')}</h5>\r\n                    <div className={this.props.classes.columnDiv}>{this.renderEnums('rooms')}</div>\r\n                </div>\r\n                <div className={this.props.classes.column}>\r\n                    <h5 className={this.props.classes.columnHeader}>{I18n.t('Functions')}</h5>\r\n                    <div className={this.props.classes.columnDiv}>{this.renderEnums('funcs')}</div>\r\n                </div>\r\n                {this.renderMessage()}\r\n                {this.renderEditDialog()}\r\n            </form>\r\n        );\r\n    }\r\n}\r\n\r\nEnums.propTypes = {\r\n    common: PropTypes.object.isRequired,\r\n    native: PropTypes.object.isRequired,\r\n    instance: PropTypes.number.isRequired,\r\n    adapterName: PropTypes.string.isRequired,\r\n    onError: PropTypes.func,\r\n    onLoad: PropTypes.func,\r\n    onChange: PropTypes.func,\r\n    socket: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(Enums);\r\n","import React, {Component} from 'react';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Badge from '@material-ui/core/Badge';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\n\r\nimport {MdEdit as IconEdit} from 'react-icons/md';\r\nimport {MdAdd as IconAdd} from 'react-icons/md';\r\nimport {MdRefresh as IconRefresh} from 'react-icons/md';\r\nimport {MdClear as IconClear} from 'react-icons/md';\r\nimport {MdDelete as IconDelete} from 'react-icons/md';\r\nimport {MdFormatAlignJustify as IconExpand} from 'react-icons/md';\r\nimport {MdDragHandle as IconCollapse} from 'react-icons/md';\r\nimport {MdList as IconList} from 'react-icons/md';\r\nimport {FaPowerOff as IconOn} from 'react-icons/fa';\r\nimport {FaThermometerHalf as IconTemperature} from 'react-icons/fa';\r\nimport {FaLongArrowAltUp as IconUp} from 'react-icons/fa';\r\nimport {FaLongArrowAltDown as IconDown} from 'react-icons/fa';\r\nimport {FaPercentage as IconPercentage} from 'react-icons/fa';\r\nimport {FaPalette as IconColor} from 'react-icons/fa';\r\nimport {FaLightbulb as IconBulb} from 'react-icons/fa';\r\nimport {FaLockOpen as IconLock} from 'react-icons/fa';\r\nimport {FaThermometer as IconThermometer} from 'react-icons/fa';\r\n\r\n\r\nimport Utils from '@iobroker/adapter-react/Components/Utils'\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport MessageDialog from '@iobroker/adapter-react/Dialogs/Message';\r\nimport DialogSelectID from '@iobroker/adapter-react/Dialogs/SelectID';\r\nimport copy from \"copy-to-clipboard\";\r\n\r\nconst colorOn = '#aba613';\r\nconst colorOff = '#444';\r\nconst colorSet = '#00c6ff';\r\nconst colorRead = '#00bc00';\r\nconst CHANGED_COLOR = '#e7000040';\r\nconst DEFAULT_CHANNEL_COLOR_DARK = '#4f4f4f';\r\nconst DEFAULT_CHANNEL_COLOR_LIGHT = '#e9e9e9';\r\nconst LAST_CHANGED_COLOR_DARK = '#5c8f65';\r\nconst LAST_CHANGED_COLOR_LIGHT = '#b4ffbe';\r\nconst actionsMapping = {\r\n    turnOn: {color: colorOn, icon: IconOn, desc: 'Turn on'},\r\n    turnOff: {color: colorOff, icon: IconOn, desc: 'Turn off'},\r\n\r\n    setTargetTemperature: {color: colorSet, icon: IconTemperature, desc: 'Set target temperature'},\r\n    incrementTargetTemperature: {color: colorOn, icon: IconUp, desc: 'Increment target temperature'},\r\n    decrementTargetTemperature: {color: colorOff, icon: IconDown, desc: 'Decrement target temperature'},\r\n\r\n    setPercentage: {color: colorSet, icon: IconPercentage, desc: 'Set percentage'},\r\n    incrementPercentage: {color: colorOn, icon: IconUp, desc: 'Increment percentage'},\r\n    decrementPercentage: {color: colorOff, icon: IconDown, desc: 'Decrement percentage'},\r\n\r\n    setColor: {color: colorSet, icon: IconColor, desc: 'Set color'},\r\n\r\n    setColorTemperature: {color: colorSet, icon: IconBulb, desc: 'Set color temperature'},\r\n    incrementColorTemperature: {color: colorOn, icon: IconUp, desc: 'Increment color temperature'},\r\n    decrementColorTemperature: {color: colorOff, icon: IconDown, desc: 'Decrement color temperature'},\r\n\r\n    getTargetTemperature: {color: colorRead, icon: IconThermometer, desc: 'Get target temperature'},\r\n    getTemperatureReading: {color: colorRead, icon: IconThermometer, desc: 'Get actual temperature'},\r\n\r\n    setLockState: {color: colorSet, icon: IconLock, desc: 'Set lock state'},\r\n    getLockState: {color: colorRead, icon: IconLock, desc: 'Read lock state'},\r\n};\r\n\r\nconst SMARTTYPES = ['LIGHT', 'SWITCH', 'THERMOSTAT', 'ACTIVITY_TRIGGER', 'SCENE_TRIGGER', 'SMARTPLUG', 'SMARTLOCK', 'CAMERA'];\r\n\r\nconst styles = theme => ({\r\n    tab: {\r\n        width: '100%',\r\n        height: '100%'\r\n    },\r\n    column: {\r\n        display: 'inline-block',\r\n        verticalAlign: 'top',\r\n        marginRight: 20,\r\n        height: '100%',\r\n        overflow: 'hidden'\r\n    },\r\n    columnDiv: {\r\n        height: 'calc(100% - 40px)',\r\n        overflow: 'auto',\r\n        minWidth: 300\r\n    },\r\n    filter: {\r\n        margin: 0\r\n    },\r\n    button: {\r\n        marginRight: 20\r\n    },\r\n    devLineExpand: {\r\n        marginRight: 10,\r\n    },\r\n    devLineEnabled: {\r\n        position: 'absolute',\r\n        right: 0,\r\n        top: 0,\r\n    },\r\n    devLineEdit: {\r\n        position: 'absolute',\r\n        top: 5,\r\n        right: 50\r\n    },\r\n    devLineDelete: {\r\n        position: 'absolute',\r\n        top: 5,\r\n        right: 0\r\n    },\r\n    devLineName: {\r\n\r\n    },\r\n    devLineNumber:{\r\n        display: 'inline-block',\r\n        verticalAlign: 'middle',\r\n        width: 15,\r\n    },\r\n    editedId: {\r\n        fontStyle: 'italic'\r\n    },\r\n    enumLineSubName:{\r\n        fontStyle: 'italic',\r\n    },\r\n    devLine: {\r\n        height: 48,\r\n        width: '100%',\r\n        position: 'relative'\r\n    },\r\n    devLineDescription: {\r\n        display: 'block',\r\n        fontStyle: 'italic',\r\n        fontSize: 12\r\n    },\r\n    devLineActions: {\r\n        fontStyle: 'italic',\r\n        fontSize: 12,\r\n        paddingLeft: 50,\r\n        display: 'inline-block',\r\n    },\r\n    devLineProgress: {\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n    },\r\n    channelLineActions: {\r\n        width: 80\r\n    },\r\n    devLineNameBlock: {\r\n        display: 'inline-block',\r\n        width: 'calc(100% - 350px)'\r\n    },\r\n    columnHeader: {\r\n        background: theme.palette.primary.light,\r\n        padding: 10,\r\n        color: theme.palette.primary.contrastText\r\n    },\r\n    devModified: {\r\n        fontStyle: 'italic'\r\n    },\r\n    actionIcon: {\r\n        width: 16\r\n    },\r\n\r\n    devSubLine: {\r\n        position: 'relative',\r\n        height: 48\r\n    },\r\n    devSubLineName: {\r\n        marginLeft: 5,\r\n        marginTop: 14,\r\n        display: 'inline-block',\r\n        fontSize: 13,\r\n        width: 'calc(100% - 400px)'\r\n    },\r\n    devSubSubLineName:  {\r\n        fontSize: 8,\r\n        fontStyle: 'italic',\r\n        display: 'block'\r\n    },\r\n    devSubLineByOn: {\r\n        marginLeft: 5\r\n    },\r\n    devSubLineDelete: {\r\n        position: 'absolute',\r\n        top: 12,\r\n        right: 12,\r\n        padding: 0\r\n    },\r\n    devSubLineEdit: {\r\n        position: 'absolute',\r\n        top: 12,\r\n        right: 62,\r\n        padding: 0\r\n    },\r\n    devSubLineTypeTitle: {\r\n        marginTop: 0\r\n    },\r\n    headerRow: {\r\n        paddingLeft: theme.spacing(1),\r\n        background: theme.palette.primary.main,\r\n    },\r\n    headerCell: {\r\n        display: 'inline-block',\r\n        verticalAlign: 'top',\r\n        width: '100%'\r\n    },\r\n    tableCell: {\r\n        display: 'inline-block',\r\n        verticalAlign: 'top',\r\n        width: '100%'\r\n    },\r\n});\r\n\r\nclass AlexaSmartNames extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        if (!actionsMapping.translated) {\r\n            Object.keys(actionsMapping).forEach(a => actionsMapping[a].desc = I18n.t(actionsMapping[a].desc));\r\n            actionsMapping.translated = true;\r\n        }\r\n\r\n        this.state = {\r\n            editedSmartName: '',\r\n            editId: '',\r\n            editedSmartType: null,\r\n            editObjectName: '',\r\n            deleteId: '',\r\n\r\n            showListOfDevices: false,\r\n            showSelectId: false,\r\n            showConfirmation: '',\r\n            changed: [],\r\n            devices: [],\r\n            message: '',\r\n            filter: '',\r\n            loading: true,\r\n            browse: false,\r\n            expanded: [],\r\n            lastChanged: ''\r\n        };\r\n\r\n        this.timerChanged = null;\r\n        this.browseTimer = null;\r\n        this.browseTimerCount = 0;\r\n        this.editedSmartName = '';\r\n\r\n        this.waitForUpdateID = null;\r\n        this.onReadyUpdateBound = this.onReadyUpdate.bind(this);\r\n        this.onResultUpdateBound = this.onResultUpdate.bind(this);\r\n\r\n        this.props.socket.getObject(`system.adapter.${this.props.adapterName}.${this.props.instance}`).then(obj => {\r\n            this.props.socket.getState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`).then(state => {\r\n                if (!obj || !obj.common || (!obj.common.enabled && (!state || !state.val))) {\r\n                    this.setState({message: I18n.t('Instance must be enabled'), loading: false, devices: []});\r\n                } else {\r\n                    this.browse();\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    browse(isIndicate) {\r\n        if (Date.now() - this.lastBrowse < 500) return;\r\n        this.lastBrowse = Date.now();\r\n        if (isIndicate) {\r\n            this.setState({loading: true, browse: true});\r\n        } else {\r\n            this.setState({browse: true});\r\n        }\r\n        console.log('Send BROWSE!');\r\n        this.browseTimer = setTimeout(() => {\r\n            console.log('Browse timeout!');\r\n            this.browseTimer = null;\r\n            this.browseTimerCount++;\r\n            if (this.browseTimerCount < 5) {\r\n                this.browse(isIndicate);\r\n            } else {\r\n                this.setState({message: I18n.t('Cannot read devices!')});\r\n            }\r\n        }, 10000);\r\n\r\n        this.props.socket.sendTo(this.props.adapterName + '.' + this.props.instance, 'browse', null)\r\n            .then(list => {\r\n                this.browseTimer && clearTimeout(this.browseTimer);\r\n                this.browseTimerCount = 0;\r\n                this.browseTimer = null;\r\n                if (list && list.error) {\r\n                    this.setState({message: I18n.t(list.error)});\r\n                } else {\r\n                    if (this.waitForUpdateID) {\r\n                        if (!this.onEdit(this.waitForUpdateID, list)) {\r\n                            this.setState({message: I18n.t('Device %s was not added', this.waitForUpdateID)});\r\n                        }\r\n                        this.waitForUpdateID = null;\r\n                    }\r\n                    console.log('BROWSE received.');\r\n\r\n                    this.setState({devices: list, loading: false, changed: [], browse: false});\r\n                }\r\n            })\r\n            .catch(e => this.setState({message: I18n.t('Error %s', e)}));\r\n    }\r\n\r\n    onReadyUpdate(id, state) {\r\n        console.log('Update ' + id + ' ' + (state ? state.val + '/' + state.ack : 'null'));\r\n        if (state && state.ack === true && state.val === true) {\r\n            this.devTimer && clearTimeout(this.devTimer);\r\n            this.devTimer = setTimeout(() => {\r\n                this.devTimer = null;\r\n                this.browse();\r\n            }, 300);\r\n        }\r\n    }\r\n\r\n    onResultUpdate(id, state) {\r\n        state && state.ack === true && state.val && this.setState({message: state.val});\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.socket.subscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updates`, this.onReadyUpdateBound);\r\n        this.props.socket.subscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updatesResult`, this.onResultUpdateBound);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.props.socket.unsubscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updates`, this.onReadyUpdateBound);\r\n        this.props.socket.unsubscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updatesResult`, this.onResultUpdateBound);\r\n        if (this.timerChanged) {\r\n            clearTimeout(this.timerChanged);\r\n            this.timerChanged = null;\r\n        }\r\n    }\r\n\r\n    informInstance(id) {\r\n        this.props.socket.sendTo(this.props.adapterName + '.' + this.props.instance, 'update', id);\r\n    }\r\n\r\n    addChanged(id, cb) {\r\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\r\n        if (changed.indexOf(id) === -1) {\r\n            changed.push(id);\r\n            this.setState({changed}, () => cb && cb());\r\n        } else {\r\n            cb && cb();\r\n        }\r\n    }\r\n\r\n    removeChanged(id) {\r\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\r\n        const pos = changed.indexOf(id);\r\n\r\n        if (pos !== -1) {\r\n            changed.splice(pos, 1);\r\n            this.setState({changed});\r\n        }\r\n    }\r\n\r\n    onEdit(id, devices) {\r\n        devices = devices || this.state.devices;\r\n        const device = devices.find(dev => dev.additionalApplianceDetails.id === id);\r\n        if (device) {\r\n            this.props.socket.getObject(id)\r\n                .then(obj => {\r\n                    let smartName = device.additionalApplianceDetails.friendlyNames ? device.additionalApplianceDetails.friendlyNames : device.friendlyName;\r\n                    if (typeof smartName === 'object' && smartName) {\r\n                        smartName = smartName[I18n.getLanguage()] || smartName.en;\r\n                    }\r\n                    this.editedSmartName = smartName;\r\n                    let editedSmartType = null;\r\n                    if (!device.additionalApplianceDetails.group) {\r\n                        editedSmartType = device.additionalApplianceDetails.smartType;\r\n                    }\r\n\r\n                    this.setState({editId: id, editedSmartType, editedSmartName: smartName, editObjectName: Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()})});\r\n                });\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    onAskDelete(deleteId) {\r\n        this.setState({deleteId, showConfirmation: true});\r\n    }\r\n\r\n    onDelete() {\r\n        let id = this.state.deleteId;\r\n        // const device = this.state.devices.find(dev => dev.additionalApplianceDetails.id === id);\r\n        this.addChanged(id, () => {\r\n            this.props.socket.getObject(id)\r\n                .then(obj => {\r\n                    Utils.disableSmartName(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\r\n                    return this.props.socket.setObject(id, obj);\r\n                })\r\n                .then(() => {\r\n                    this.setState({deleteId: '', showConfirmation: false, lastChanged: id});\r\n\r\n                    this.timerChanged && clearTimeout(this.timerChanged);\r\n                    this.timerChanged = setTimeout(() => {\r\n                        this.setState({lastChanged: ''});\r\n                        this.timerChanged = null;\r\n                    }, 30000);\r\n\r\n                    // update obj\r\n                    this.informInstance(id);\r\n                })\r\n                .catch(err => this.props.onError(err));\r\n        });\r\n    }\r\n\r\n    renderActions(dev) {\r\n        // Type\r\n        const actions = [];\r\n        if (!dev.actions) {\r\n            console.log('Something went wrong');\r\n            return null;\r\n        }\r\n        dev.actions.sort((a, b) => {\r\n            if (a === b) return 0;\r\n            if (a === 'turnOn') return -1;\r\n            if (b === 'turnOn') return 1;\r\n\r\n            if (a === 'turnOff') return -1;\r\n            if (b === 'turnOff') return 1;\r\n            return 0;\r\n        });\r\n\r\n        Object.keys(actionsMapping).forEach(action => {\r\n            if (dev.actions.indexOf(action) !== -1) {\r\n                const Icon = actionsMapping[action].icon;\r\n                actions.push((<span key={action} title={actionsMapping[action].desc}><Icon className={this.props.classes.actionIcon} style={{color: actionsMapping[action].color}}/></span>));\r\n            }\r\n        });\r\n        // add unknown actions\r\n        for (let a = 0; a < dev.actions.length; a++) {\r\n            if (!actionsMapping[dev.actions[a]]) {\r\n                actions.push((<span key={dev.actions[a]}>{dev.actions[a]}</span>));\r\n            }\r\n        }\r\n        return actions;\r\n    }\r\n\r\n    onExpand(lineNum) {\r\n        const expanded = JSON.parse(JSON.stringify(this.state.expanded));\r\n        const pos = expanded.indexOf(this.state.devices[lineNum].friendlyName);\r\n        if (pos === -1) {\r\n            expanded.push(this.state.devices[lineNum].friendlyName);\r\n        } else {\r\n            expanded.splice(pos, 1);\r\n        }\r\n        this.setState({expanded});\r\n    }\r\n\r\n    renderSelectByOn(dev, lineNum, id, type) {\r\n        // type = '-', 'stored', false or number [5-100]\r\n        if (type !== false) {\r\n            const items = [\r\n                (<MenuItem key=\"_\" value=\"\"><em>{I18n.t('Default')}</em></MenuItem>),\r\n                (<MenuItem key=\"last\" value=\"stored\">{I18n.t('last value')}</MenuItem>)\r\n            ];\r\n            for (let i = 5; i <= 100; i += 5) {\r\n                items.push((<MenuItem  key={i.toString()} value={i.toString()}>{i}%</MenuItem>));\r\n            }\r\n            return (<FormControl className={this.props.classes.devSubLineByOn}>\r\n                <Select className={this.props.classes.devSubLineByOnSelect} value={(type || '').toString()} onChange={e => this.onParamsChange(id, e.target.value)}>{items}</Select>\r\n                <FormHelperText className={this.props.classes.devSubLineTypeTitle}>{I18n.t('by ON')}</FormHelperText>\r\n            </FormControl>);\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    onParamsChange(id, byON, type) {\r\n        this.addChanged(id, () => {\r\n            this.props.socket.getObject(id)\r\n                .then(obj => {\r\n                    Utils.updateSmartName(obj, undefined, byON, type, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\r\n\r\n                    if (this.state.lastChanged !== id) {\r\n                        this.setState({lastChanged: id});\r\n                        this.timerChanged && clearTimeout(this.timerChanged);\r\n                        this.timerChanged = setTimeout(() => {\r\n                            this.setState({lastChanged: ''});\r\n                            this.timerChanged = null;\r\n                        }, 30000);\r\n                    }\r\n\r\n                    return this.props.socket.setObject(id, obj);\r\n                })\r\n                .then(() => {\r\n                    // update obj\r\n                    this.informInstance(id);\r\n                })\r\n                .catch(err => this.props.onError(err));\r\n        });\r\n    }\r\n\r\n    renderSelectTypeSelector(type, onChange) {\r\n        if (type !== false) {\r\n            const items = [\r\n                (<MenuItem key=\"_\" value=\"_\"><em>{I18n.t('no type')}</em></MenuItem>)\r\n            ];\r\n            for (let i = 0; i < SMARTTYPES.length; i++) {\r\n                items.push((<MenuItem  key={SMARTTYPES[i]} value={SMARTTYPES[i]}><em>{I18n.t(SMARTTYPES[i])}</em></MenuItem>));\r\n            }\r\n            return (\r\n                <FormControl>\r\n                    <Select value={type || '_'} onChange={e => onChange(e.target.value === '_' ? '' : e.target.value)}>{items}</Select>\r\n                    <FormHelperText className={this.props.classes.devSubLineTypeTitle}>{I18n.t('Types')}</FormHelperText>\r\n                </FormControl>);\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n\r\n    renderSelectType(dev, lineNum, id, type) {\r\n        return this.renderSelectTypeSelector(type, value => this.onParamsChange(id, undefined, value));\r\n    }\r\n\r\n    renderChannels(dev, lineNum) {\r\n        const result = [];\r\n        const classes = this.props.classes;\r\n\r\n        if (dev.additionalApplianceDetails.group) {\r\n            const channels   = dev.additionalApplianceDetails.channels;\r\n            const names      = dev.additionalApplianceDetails.names;\r\n            const types      = dev.additionalApplianceDetails.byONs;\r\n            const smarttypes = dev.additionalApplianceDetails.smartTypes;\r\n\r\n            let c = 0;\r\n            for (const chan in channels) {\r\n                if (channels.hasOwnProperty(chan)) {\r\n                    for (let i = 0; i < channels[chan].length; i++) {\r\n                        const id = channels[chan][i].id;\r\n                        let background = this.state.changed.indexOf(id) !== -1 ? CHANGED_COLOR : this.props.themeType === 'dark' ? DEFAULT_CHANNEL_COLOR_DARK : DEFAULT_CHANNEL_COLOR_LIGHT;\r\n                        if (this.state.lastChanged === id && (background === DEFAULT_CHANNEL_COLOR_DARK || background === DEFAULT_CHANNEL_COLOR_LIGHT)) {\r\n                            background = this.props.themeType === 'dark' ? LAST_CHANGED_COLOR_DARK : LAST_CHANGED_COLOR_LIGHT;\r\n                        }\r\n                        result.push((<div key={'sub' + id} className={classes.devSubLine} style={(c % 2) ? {} : {background}}>\r\n                            <div className={this.props.classes.devLineActions + ' ' + this.props.classes.channelLineActions}>{this.renderActions(channels[chan][i])}</div>\r\n                            <div className={classes.devSubLineName} title={id}>{(names[id] || id)}\r\n                                {id !== names[id] ? (<span className={classes.devSubSubLineName}>{id}</span>) : null}\r\n                            </div>\r\n                            {this.renderSelectType(dev, lineNum, id, smarttypes[id])}\r\n                            {this.renderSelectByOn(dev, lineNum, id, types[id])}\r\n                            <IconButton aria-label=\"Delete\" className={this.props.classes.devSubLineDelete} onClick={() => this.onAskDelete(id, lineNum)}><IconDelete fontSize=\"middle\" /></IconButton>\r\n                        </div>));\r\n                        c++;\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            const id = dev.additionalApplianceDetails.id;\r\n            const name = dev.additionalApplianceDetails.name || id;\r\n            let background = this.state.changed.indexOf(id) !== -1 ? CHANGED_COLOR : this.props.themeType === 'dark' ? DEFAULT_CHANNEL_COLOR_DARK : DEFAULT_CHANNEL_COLOR_LIGHT;\r\n            if (this.state.lastChanged === id && (background === DEFAULT_CHANNEL_COLOR_DARK || background === DEFAULT_CHANNEL_COLOR_LIGHT)) {\r\n                background = this.props.themeType === 'dark' ? LAST_CHANGED_COLOR_DARK : LAST_CHANGED_COLOR_LIGHT;\r\n            }\r\n            result.push((<div key={'sub' + id} className={classes.devSubLine} style={{background}}>\r\n                <div className={this.props.classes.devLineActions + ' ' + this.props.classes.channelLineActions} style={{width: 80}}>{this.renderActions(dev)}</div>\r\n                <div className={classes.devSubLineName} title={(id || '')}>{name}</div>\r\n                {this.renderSelectType(dev, lineNum, id, dev.additionalApplianceDetails.smartType)}\r\n                {this.renderSelectByOn(dev, lineNum, id, dev.additionalApplianceDetails.byON)}\r\n            </div>));\r\n        }\r\n        return result;\r\n    }\r\n\r\n    renderDevice(dev, lineNum) {\r\n        let friendlyName = dev.friendlyName;\r\n        let title;\r\n        if (!dev.additionalApplianceDetails.group && dev.additionalApplianceDetails.nameModified) {\r\n            title = friendlyName;\r\n        } else {\r\n            title = (<span className={this.props.classes.devModified} title={I18n.t('modified')}>{friendlyName}</span>);\r\n        }\r\n\r\n        let devCount = 0;\r\n        for (const ch in dev.additionalApplianceDetails.channels) {\r\n            if (dev.additionalApplianceDetails.channels.hasOwnProperty(ch)) {\r\n                devCount += dev.additionalApplianceDetails.channels[ch].length;\r\n            }\r\n        }\r\n        devCount = devCount || 1;\r\n        const expanded = this.state.expanded.indexOf(friendlyName) !== -1;\r\n        const id = dev.additionalApplianceDetails.id;\r\n\r\n        let background = (lineNum % 2) ? (this.props.themeType === 'dark' ? '#272727' : '#f1f1f1') : 'inherit';\r\n        const changed = this.state.changed.indexOf(id) !== -1;\r\n        if (changed) {\r\n            background = CHANGED_COLOR;\r\n        } else if (id === this.state.lastChanged) {\r\n            background = this.props.themeType === 'dark' ? LAST_CHANGED_COLOR_DARK : LAST_CHANGED_COLOR_LIGHT;\r\n        }\r\n\r\n        // If some of sub channels in change list or in last changed\r\n        if (dev.additionalApplianceDetails.group && !changed && id !== this.state.lastChanged) {\r\n            const channels = dev.additionalApplianceDetails.channels;\r\n            try {\r\n                channels && Object.keys(channels).forEach(chan =>\r\n                    chan && channels[chan].forEach(el => {\r\n                        if (this.state.changed.indexOf(el.id) !== -1) {\r\n                            background = CHANGED_COLOR;\r\n                        } else if (this.state.lastChanged === el.id) {\r\n                            background = this.props.themeType === 'dark' ? LAST_CHANGED_COLOR_DARK : LAST_CHANGED_COLOR_LIGHT;\r\n                        }\r\n                    })\r\n                );\r\n            } catch (error) {\r\n                console.log(error)\r\n            }\r\n        }\r\n\r\n        return [\r\n            (<div key={'line' + lineNum} className={this.props.classes.devLine} style={{background}}>\r\n                <div className={this.props.classes.devLineNumber}>{lineNum + 1}.</div>\r\n                <IconButton className={this.props.classes.devLineExpand} onClick={() => this.onExpand(lineNum)}>\r\n                    {devCount > 1 ?\r\n                        (<Badge badgeContent={devCount} color=\"primary\">\r\n                            {expanded ? (<IconCollapse/>) : (<IconExpand />)}\r\n                        </Badge>) :\r\n                        (expanded ? (<IconCollapse/>) : (<IconExpand />))}\r\n                </IconButton>\r\n                <div className={this.props.classes.devLineNameBlock} style={{display: 'inline-block', position: 'relative'}}>\r\n                    <span className={this.props.classes.devLineName}>{title}</span>\r\n                    <span className={this.props.classes.devLineDescription}>{dev.friendlyDescription}</span>\r\n                    {changed ? (<CircularProgress className={this.props.classes.devLineProgress} size={20}/>) : null}\r\n                </div>\r\n                <span className={this.props.classes.devLineActions}>{this.renderActions(dev)}</span>\r\n                {!dev.additionalApplianceDetails.group ?\r\n                    (<IconButton aria-label=\"Edit\" className={this.props.classes.devLineEdit} onClick={() => this.onEdit(id)}><IconEdit fontSize=\"middle\" /></IconButton>) : null}\r\n                {!dev.additionalApplianceDetails.group ?\r\n                    (<IconButton aria-label=\"Delete\" className={this.props.classes.devLineDelete} onClick={() => this.onAskDelete(id)}><IconDelete fontSize=\"middle\" /></IconButton>) : null}\r\n            </div>),\r\n            expanded ? this.renderChannels(dev, lineNum) : null\r\n        ];\r\n    }\r\n\r\n    renderMessage() {\r\n        if (this.state.message) {\r\n            return (<MessageDialog text={this.state.message} onClose={() => this.setState({message: ''})}/>);\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    changeSmartName(e) {\r\n        e && e.preventDefault();\r\n        // Check if the name is duplicate\r\n        this.addChanged(this.state.editId, () => {\r\n            const id = this.state.editId;\r\n            const editedSmartType = this.state.editedSmartType;\r\n\r\n            this.setState({editId: '', editObjectName: '', lastChanged: id, editedSmartType: null});\r\n\r\n            this.timerChanged && clearTimeout(this.timerChanged);\r\n            this.timerChanged = setTimeout(() => {\r\n                this.setState({lastChanged: ''});\r\n                this.timerChanged = null;\r\n            }, 30000);\r\n\r\n            this.props.socket.getObject(id)\r\n                .then(obj => {\r\n                    Utils.updateSmartName(obj, this.editedSmartName, undefined, editedSmartType === null ? undefined : editedSmartType, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\r\n\r\n                    return this.props.socket.setObject(id, obj);\r\n                })\r\n                .then(() => {\r\n                    // update obj\r\n                    this.informInstance(id);\r\n                })\r\n                .catch(err => this.props.onError(err));\r\n        });\r\n    }\r\n\r\n    renderEditDialog() {\r\n        if (this.state.editId) {\r\n            return (<Dialog\r\n                open={true}\r\n                maxWidth=\"sm\"\r\n                fullWidth={true}\r\n                onClose={() => {\r\n                    this.editedSmartName = null;\r\n                    this.setState({editId: '', editedSmartName: ''});\r\n                }}\r\n                aria-labelledby=\"message-dialog-title\"\r\n                aria-describedby=\"message-dialog-description\"\r\n            >\r\n                <DialogTitle id=\"message-dialog-title\">{this.props.title || I18n.t('Smart name for %s', this.state.editObjectName)}</DialogTitle>\r\n                <DialogContent>\r\n                    <p><span>ID:</span> <span className={this.props.classes.editedId}>{this.state.editId}</span></p>\r\n                    <TextField\r\n                        style={{width: '100%'}}\r\n                        label={I18n.t('Smart name')}\r\n                        onKeyDown={e =>\r\n                            e.keyCode === 13 && this.changeSmartName(e)}\r\n                        onChange={e => this.editedSmartName = e.target.value}\r\n                        defaultValue={this.state.editedSmartName}\r\n                        helperText={I18n.t('You can enter several names divided by comma')}\r\n                        margin=\"normal\"\r\n                    />\r\n                    {this.state.editedSmartType !== null ? this.renderSelectTypeSelector(this.state.editedSmartType, value => this.setState({editedSmartType: value})) : null}\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={() => this.changeSmartName()} color=\"primary\" autoFocus>{I18n.t('Ok')}</Button>\r\n                    <Button onClick={() => {\r\n                        this.editedSmartName = null;\r\n                        this.setState({editId: '', editedSmartName: ''});\r\n                    }}>{I18n.t('Cancel')}</Button>\r\n                </DialogActions>\r\n            </Dialog>)\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    renderConfirmDialog() {\r\n        if (this.state.showConfirmation) {\r\n            return (<Dialog\r\n                open={true}\r\n                maxWidth=\"sm\"\r\n                fullWidth={true}\r\n                onClose={() => this.setState({showConfirmation: ''})}\r\n                aria-labelledby=\"confirmation-dialog-title\"\r\n                aria-describedby=\"confirmation-dialog-description\"\r\n            >\r\n                <DialogTitle id=\"confirmation-dialog-title\">{this.props.title || I18n.t('Device %s will be disabled.', this.state.deleteId)}</DialogTitle>\r\n                <DialogContent>\r\n                    <p>{I18n.t('Are you sure?')}</p>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={() => this.onDelete()} color=\"primary\" autoFocus>{I18n.t('Ok')}</Button>\r\n                    <Button onClick={() => this.setState({showConfirmation: ''})}>{I18n.t('Cancel')}</Button>\r\n                </DialogActions>\r\n            </Dialog>)\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    getSelectIdDialog() {\r\n        if (this.state.showSelectId) {\r\n            return <DialogSelectID\r\n                key=\"dialogSelectID1\"\r\n                imagePrefix={'../..'}\r\n                socket={this.props.socket}\r\n                selected={''}\r\n                types={['state']}\r\n                onClose={() => this.setState({showSelectId: false})}\r\n                onOk={(selected, name) => {\r\n                    this.setState({showSelectId: false});\r\n\r\n                    this.props.socket.getObject(selected)\r\n                        .then(obj => {\r\n                            if (obj) {\r\n                                const name = Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()});\r\n                                Utils.updateSmartName(obj, (name || I18n.t('Device name')).replace(/[-_.]+/g, ' '), undefined, undefined, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\r\n                                this.addChanged(obj._id);\r\n                                this.waitForUpdateID = obj._id;\r\n\r\n                                if (this.state.lastChanged !== obj._id) {\r\n                                    this.setState({lastChanged: obj._id});\r\n                                    this.timerChanged && clearTimeout(this.timerChanged);\r\n                                    this.timerChanged = setTimeout(() => {\r\n                                        this.setState({lastChanged: ''});\r\n                                        this.timerChanged = null;\r\n                                    }, 30000);\r\n                                }\r\n\r\n                                this.props.socket.setObject(obj._id, obj)\r\n                                    .then(() => this.informInstance(obj._id))\r\n                                    .catch(err => this.setState({message: err}));\r\n                            } else {\r\n                                this.setState({message: I18n.t('Invalid ID')});\r\n                            }\r\n                        });\r\n                }}\r\n            />;\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    renderDevices() {\r\n        const filter = this.state.filter.toLowerCase();\r\n        const result = [];\r\n        for (let i = 0; i < this.state.devices.length; i++) {\r\n            if (this.state.filter && this.state.devices[i].friendlyName.toLowerCase().indexOf(filter) === -1 ) continue;\r\n            result.push(this.renderDevice(this.state.devices[i], i));\r\n        }\r\n        return (<div key=\"listDevices\" className={this.props.classes.columnDiv}>{result}</div>);\r\n    }\r\n\r\n    renderListOfDevices() {\r\n        if (!this.state.showListOfDevices) {\r\n            return null;\r\n        }\r\n        const classes = this.props.classes;\r\n\r\n        return <Dialog\r\n            open={true}\r\n            maxWidth=\"xl\"\r\n            fullWidth\r\n            onClose={() => this.setState({showListOfDevices: false})}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n        >\r\n            <DialogTitle id=\"alert-dialog-title\">{I18n.t('List of devices to print out, e.g. to give all device names to your partner.')} <span role=\"img\" aria-label=\"smile\"></span></DialogTitle>\r\n            <DialogContent>\r\n                <div className={ classes.headerRow } >\r\n                    <div className={ classes.headerCell }>{ I18n.t('Name') }</div>\r\n                </div>\r\n                <div className={ this.props.classes.tableDiv } >\r\n                    { this.state.devices.map((item, i) => <div key={i}>\r\n                        <div className={ classes.tableCell }>{ item.friendlyName }</div>\r\n                    </div>)\r\n                    }\r\n                </div>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={() => {\r\n                    this.setState({showListOfDevices: false});\r\n                    const lines = this.state.devices.map(item => item.friendlyName);\r\n                    copy(lines.join('\\n'));\r\n                }} color=\"primary\">{I18n.t('Copy to clipboard')}</Button>\r\n                <Button onClick={() => this.setState({showListOfDevices: false})} autoFocus>{I18n.t('Close')}</Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    }\r\n\r\n    render() {\r\n        if (this.state.loading) {\r\n            return (<CircularProgress  key=\"alexaProgress\" />);\r\n        }\r\n\r\n        return (\r\n            <form key=\"alexa\" className={this.props.classes.tab}>\r\n                <Fab size=\"small\" color=\"secondary\" aria-label=\"Add\" className={this.props.classes.button} onClick={() => this.setState({showSelectId: true})}><IconAdd /></Fab>\r\n                <Fab size=\"small\" color=\"primary\" aria-label=\"Refresh\" className={this.props.classes.button}\r\n                      onClick={() => this.browse(true)} disabled={this.state.browse}>{this.state.browse ? (<CircularProgress size={20} />) : (<IconRefresh/>)}</Fab>\r\n                <Fab style={{marginLeft: '1rem'}}\r\n                     title={I18n.t('Show all devices for print out')}\r\n                     size=\"small\" aria-label=\"List of devices\" className={this.props.classes.button}\r\n                     onClick={() => this.setState({showListOfDevices: true})} disabled={this.state.browse}><IconList/></Fab>\r\n                <TextField\r\n                    placeholder={I18n.t('Filter')}\r\n                    className={this.state.filter}\r\n                    value={this.state.filter}\r\n                    onChange={e => this.setState({filter: e.target.value})}\r\n                    InputProps={{\r\n                        endAdornment: this.state.filter ? (\r\n                            <IconButton onClick={() => this.setState({ filter: '' })}>\r\n                                <IconClear />\r\n                            </IconButton>\r\n                        ) : undefined,\r\n                    }}\r\n                />\r\n                {this.renderDevices()}\r\n                {this.renderMessage()}\r\n                {this.renderEditDialog()}\r\n                {this.getSelectIdDialog()}\r\n                {this.renderConfirmDialog()}\r\n                {this.renderListOfDevices()}\r\n            </form>\r\n        );\r\n    }\r\n}\r\n\r\nAlexaSmartNames.propTypes = {\r\n    common: PropTypes.object.isRequired,\r\n    native: PropTypes.object.isRequired,\r\n    instance: PropTypes.number.isRequired,\r\n    adapterName: PropTypes.string.isRequired,\r\n    onError: PropTypes.func,\r\n    onLoad: PropTypes.func,\r\n    onChange: PropTypes.func,\r\n    socket: PropTypes.object.isRequired,\r\n    themeType: PropTypes.string,\r\n};\r\n\r\nexport default withStyles(styles)(AlexaSmartNames);\r\n","import React, {Component} from 'react';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Badge from '@material-ui/core/Badge';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\n\r\nimport {MdEdit as IconEdit} from 'react-icons/md';\r\nimport {MdAdd as IconAdd} from 'react-icons/md';\r\nimport {MdRefresh as IconRefresh} from 'react-icons/md';\r\nimport {MdClear as IconClear} from 'react-icons/md';\r\nimport {MdDelete as IconDelete} from 'react-icons/md';\r\nimport {MdFormatAlignJustify as IconExpand} from 'react-icons/md';\r\nimport {MdDragHandle as IconCollapse} from 'react-icons/md';\r\nimport {MdList as IconList} from 'react-icons/md';\r\n\r\nimport {FaPowerOff as IconOn} from 'react-icons/fa';\r\nimport {FaThermometerHalf as IconTemperature} from 'react-icons/fa';\r\nimport {FaLongArrowAltUp as IconUp} from 'react-icons/fa';\r\nimport {FaLongArrowAltDown as IconDown} from 'react-icons/fa';\r\nimport {FaPalette as IconColor} from 'react-icons/fa';\r\nimport {FaLightbulb as IconBulb} from 'react-icons/fa';\r\nimport {FaLockOpen as IconLock} from 'react-icons/fa';\r\nimport {FaThermometer as IconThermometer} from 'react-icons/fa';\r\n\r\nimport Utils from '@iobroker/adapter-react/Components/Utils'\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport MessageDialog from '@iobroker/adapter-react/Dialogs/Message';\r\nimport DialogSelectID from '@iobroker/adapter-react/Dialogs/SelectID';\r\nimport copy from \"copy-to-clipboard\";\r\n\r\nconst colorOn = '#aba613';\r\nconst colorOff = '#444';\r\nconst colorSet = '#00c6ff';\r\nconst colorRGB = '#ff7ee3';\r\nconst colorRead = '#00bc00';\r\n//const colorThermometer = '#bc1600';\r\nconst CHANGED_COLOR = '#e7000040';\r\nconst DEFAULT_CHANNEL_COLOR_DARK = '#4f4f4f';\r\nconst DEFAULT_CHANNEL_COLOR_LIGHT = '#e9e9e9';\r\nconst LAST_CHANGED_COLOR_DARK = '#5c8f65';\r\nconst LAST_CHANGED_COLOR_LIGHT = '#b4ffbe';\r\n\r\nconst actionsMapping = {\r\n    OnOff: {color: colorOn, icon: IconOn, desc: 'On/Off'},\r\n    Brightness: {color: colorSet, icon: IconBulb, desc: 'Dimmer'},\r\n    RGB: {color: colorRGB, icon: IconBulb, desc: 'Set color'},\r\n\r\n    setTargetTemperature: {color: colorSet, icon: IconTemperature, desc: 'Set target temperature'},\r\n    incrementTargetTemperature: {color: colorOn, icon: IconUp, desc: 'Increment target temperature'},\r\n    decrementTargetTemperature: {color: colorOff, icon: IconDown, desc: 'Decrement target temperature'},\r\n\r\n    incrementPercentage: {color: colorOn, icon: IconUp, desc: 'Increment percentage'},\r\n    decrementPercentage: {color: colorOff, icon: IconDown, desc: 'Decrement percentage'},\r\n\r\n    setColor: {color: colorSet, icon: IconColor, desc: 'Set color'},\r\n\r\n    incrementColorTemperature: {color: colorOn, icon: IconUp, desc: 'Increment color temperature'},\r\n    decrementColorTemperature: {color: colorOff, icon: IconDown, desc: 'Decrement color temperature'},\r\n\r\n    getTargetTemperature: {color: colorRead, icon: IconThermometer, desc: 'Get target temperature'},\r\n    getTemperatureReading: {color: colorRead, icon: IconThermometer, desc: 'Get actual temperature'},\r\n\r\n    setLockState: {color: colorSet, icon: IconLock, desc: 'Set lock state'},\r\n    getLockState: {color: colorRead, icon: IconLock, desc: 'Read lock state'},\r\n};\r\n\r\nconst SMARTTYPES = ['LIGHT', 'SWITCH', 'THERMOSTAT', 'ACTIVITY_TRIGGER', 'SCENE_TRIGGER', 'SMARTPLUG', 'SMARTLOCK', 'CAMERA', 'THERMOSTAT.AC', 'VACUUM_CLEANER'];\r\n\r\nconst styles = theme => ({\r\n    tab: {\r\n        width: '100%',\r\n        height: '100%'\r\n    },\r\n    column: {\r\n        display: 'inline-block',\r\n        verticalAlign: 'top',\r\n        marginRight: 20,\r\n        height: '100%',\r\n        overflow: 'hidden'\r\n    },\r\n    columnDiv: {\r\n        height: 'calc(100% - 40px)',\r\n        overflow: 'auto',\r\n        minWidth: 300\r\n    },\r\n    filter: {\r\n        margin: 0\r\n    },\r\n    button: {\r\n        marginRight: 20\r\n    },\r\n    devLineExpand: {\r\n        marginRight: 10,\r\n    },\r\n    devLineEnabled: {\r\n        position: 'absolute',\r\n        right: 0,\r\n        top: 0,\r\n    },\r\n    devLineEdit: {\r\n        position: 'absolute',\r\n        top: 5,\r\n        right: 50\r\n    },\r\n    devLineDelete: {\r\n        position: 'absolute',\r\n        top: 5,\r\n        right: 0\r\n    },\r\n    devLineName: {\r\n\r\n    },\r\n    devLineNumber:{\r\n        display: 'inline-block',\r\n        verticalAlign: 'middle',\r\n        width: 15,\r\n    },\r\n    editedId: {\r\n        fontStyle: 'italic'\r\n    },\r\n    enumLineSubName:{\r\n        fontStyle: 'italic',\r\n    },\r\n    devLine: {\r\n        height: 48,\r\n        width: '100%',\r\n        position: 'relative'\r\n    },\r\n    devLineDescription: {\r\n        display: 'block',\r\n        fontStyle: 'italic',\r\n        fontSize: 12\r\n    },\r\n    devLineActions: {\r\n        fontStyle: 'italic',\r\n        fontSize: 12,\r\n        paddingLeft: 50,\r\n        display: 'inline-block',\r\n    },\r\n    devLineProgress: {\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n    },\r\n    channelLineActions: {\r\n        width: 80\r\n    },\r\n    devLineNameBlock: {\r\n        display: 'inline-block',\r\n        width: 'calc(100% - 350px)'\r\n    },\r\n    columnHeader: {\r\n        background: theme.palette.primary.light,\r\n        padding: 10,\r\n        color: theme.palette.primary.contrastText\r\n    },\r\n    devModified: {\r\n        fontStyle: 'italic'\r\n    },\r\n    actionIcon: {\r\n        width: 16\r\n    },\r\n\r\n    devSubLine: {\r\n        position: 'relative',\r\n        height: 48\r\n    },\r\n    devSubLineName: {\r\n        marginLeft: 5,\r\n        marginTop: 14,\r\n        minWidth: 100,\r\n        display: 'inline-block',\r\n        fontSize: 13,\r\n        paddingLeft: 70,\r\n        //width: 'calc(100% - 400px)'\r\n    },\r\n    devSubSubLine:  {\r\n        fontSize: 10,\r\n        fontStyle: 'italic',\r\n        display: 'inline-block',\r\n        marginLeft: 15\r\n    },\r\n    devSubLineSetId:  {\r\n        fontStyle: 'italic',\r\n        display: 'block',\r\n        color: '#999'\r\n    },\r\n    devSubLineByOn: {\r\n        marginLeft: 5\r\n    },\r\n    devSubLineDelete: {\r\n        position: 'absolute',\r\n        top: 12,\r\n        right: 12,\r\n        padding: 0\r\n    },\r\n    devSubLineEdit: {\r\n        position: 'absolute',\r\n        top: 12,\r\n        right: 62,\r\n        padding: 0\r\n    },\r\n    devSubLineTypeTitle: {\r\n        marginTop: 0\r\n    },\r\n    headerRow: {\r\n        paddingLeft: theme.spacing(1),\r\n        background: theme.palette.primary.main,\r\n    },\r\n    headerCell: {\r\n        display: 'inline-block',\r\n        verticalAlign: 'top',\r\n        width: '100%'\r\n    },\r\n    tableCell: {\r\n        display: 'inline-block',\r\n        verticalAlign: 'top',\r\n        width: '100%'\r\n    },\r\n});\r\n\r\nclass AlisaDevices extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        if (!actionsMapping.translated) {\r\n            Object.keys(actionsMapping).forEach(a => actionsMapping[a].desc = I18n.t(actionsMapping[a].desc));\r\n            actionsMapping.translated = true;\r\n        }\r\n\r\n        this.state = {\r\n            editedSmartName: '',\r\n            editId: '',\r\n            editObjectName: '',\r\n            deleteId: '',\r\n\r\n            showSelectId: false,\r\n            showConfirmation: '',\r\n            changed: [],\r\n            devices: [],\r\n            message: '',\r\n            filter: '',\r\n            loading: true,\r\n            browse: false,\r\n            expanded: [],\r\n            lastChanged: ''\r\n        };\r\n\r\n        this.timerChanged = null;\r\n        this.browseTimer = null;\r\n        this.browseTimerCount = 0;\r\n        this.editedSmartName = '';\r\n\r\n        this.waitForUpdateID = null;\r\n        this.onReadyUpdateBound = this.onReadyUpdate.bind(this);\r\n        this.onResultUpdateBound = this.onResultUpdate.bind(this);\r\n\r\n        this.props.socket.getObject(`system.adapter.${this.props.adapterName}.${this.props.instance}`).then(obj => {\r\n            this.props.socket.getState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`).then(state => {\r\n                if (!obj || !obj.common || (!obj.common.enabled && (!state || !state.val))) {\r\n                    this.setState({message: I18n.t('Instance must be enabled'), loading: false, devices: []});\r\n                } else {\r\n                    this.browse();\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    browse(isIndicate) {\r\n        if (Date.now() - this.lastBrowse < 500) {\r\n            return;\r\n        }\r\n\r\n        this.lastBrowse = Date.now();\r\n\r\n        if (isIndicate) {\r\n            this.setState({loading: true, browse: true});\r\n        } else {\r\n            this.setState({browse: true});\r\n        }\r\n\r\n        this.browseTimer = setTimeout(() => {\r\n            this.browseTimer = null;\r\n            this.browseTimerCount++;\r\n            if (this.browseTimerCount < 5) {\r\n                this.browse(isIndicate);\r\n            } else {\r\n                this.setState({message: I18n.t('Cannot read devices!')});\r\n            }\r\n        }, 10000);\r\n\r\n        this.props.socket.sendTo(this.props.adapterName + '.' + this.props.instance, 'browseAlisa', null)\r\n            .then(list => {\r\n                this.browseTimer && clearTimeout(this.browseTimer);\r\n                this.browseTimerCount = 0;\r\n                this.browseTimer = null;\r\n\r\n                if (list && list.error) {\r\n                    this.setState({message: I18n.t(list.error)});\r\n                } else {\r\n                    if (this.waitForUpdateID) {\r\n                        if (!this.onEdit(this.waitForUpdateID, list)) {\r\n                            this.setState({message: I18n.t('Device %s was not added', this.waitForUpdateID)});\r\n                        }\r\n                        this.waitForUpdateID = null;\r\n                    }\r\n\r\n                    this.setState({devices: list, loading: false, changed: [], browse: false});\r\n                }\r\n            });\r\n    }\r\n\r\n    onReadyUpdate(id, state) {\r\n        if (state && state.ack === true && state.val === true) {\r\n            if (this.devTimer) clearTimeout(this.devTimer);\r\n            this.devTimer = setTimeout(() => {\r\n                this.devTimer = null;\r\n                this.browse();\r\n            }, 300);\r\n        }\r\n    }\r\n\r\n    onResultUpdate(id, state) {\r\n        state && state.ack === true && state.val && this.setState({message: state.val});\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.socket.subscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updates`, this.onReadyUpdateBound);\r\n        this.props.socket.subscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updatesResult`, this.onResultUpdateBound);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.props.socket.unsubscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updates`, this.onReadyUpdateBound);\r\n        this.props.socket.unsubscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updatesResult`, this.onResultUpdateBound);\r\n        if (this.timerChanged) {\r\n            clearTimeout(this.timerChanged);\r\n            this.timerChanged = null;\r\n        }\r\n    }\r\n\r\n    informInstance(id) {\r\n        this.props.socket.sendTo(this.props.adapterName + '.' + this.props.instance, 'update', id);\r\n    }\r\n\r\n    addChanged(id, cb) {\r\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\r\n        if (changed.indexOf(id) === -1) {\r\n            changed.push(id);\r\n            this.setState({changed}, () => cb && cb());\r\n        } else {\r\n            cb && cb();\r\n        }\r\n    }\r\n\r\n    removeChanged(id) {\r\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\r\n        const pos = changed.indexOf(id);\r\n\r\n        if (pos !== -1) {\r\n            changed.splice(pos, 1);\r\n            this.setState({changed});\r\n        }\r\n    }\r\n\r\n    onEdit(id, devices) {\r\n        devices = devices || this.state.devices;\r\n        const device = devices.find(dev => dev.iobID === id);\r\n        if (device) {\r\n            this.props.socket.getObject(id)\r\n                .then(obj => {\r\n                    let smartName = device.name;\r\n                    if (typeof smartName === 'object' && smartName) {\r\n                        smartName = smartName[I18n.getLanguage()] || smartName.en;\r\n                    }\r\n                    this.editedSmartName = smartName;\r\n                    this.setState({editId: id, editedSmartName: smartName, editObjectName: smartName/* Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()})*/});\r\n                });\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    onAskDelete(deleteId) {\r\n        this.setState({deleteId, showConfirmation: true});\r\n    }\r\n\r\n    onDelete() {\r\n        let id = this.state.deleteId;\r\n        // const device = this.state.devices.find(dev => dev.additionalApplianceDetails.id === id);\r\n        this.addChanged(id, () => {\r\n            this.props.socket.getObject(id)\r\n                .then(obj => {\r\n                    Utils.disableSmartName(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\r\n                    return this.props.socket.setObject(id, obj);\r\n                })\r\n                .then(() => {\r\n                    this.setState({deleteId: '', showConfirmation: false, lastChanged: id});\r\n\r\n                    this.timerChanged && clearTimeout(this.timerChanged);\r\n                    this.timerChanged = setTimeout(() => {\r\n                        this.setState({lastChanged: ''});\r\n                        this.timerChanged = null;\r\n                    }, 30000);\r\n\r\n                    // update obj\r\n                    this.informInstance(id);\r\n                })\r\n                .catch(err => this.props.onError(err));\r\n        });\r\n    }\r\n\r\n    renderActions(dev) {\r\n        // Type\r\n        const actions = [];\r\n        if (!dev.actions) {\r\n            console.log('Something went wrong');\r\n            return null;\r\n        }\r\n\r\n        dev.actions.sort((a, b) => {\r\n            if (a === b) {\r\n                return 0;\r\n            }\r\n            if (a === 'OnOff') {\r\n                return -1;\r\n            }\r\n            if (b === 'OnOff') {\r\n                return 1;\r\n            }\r\n            return 0;\r\n        });\r\n\r\n        Object.keys(actionsMapping).forEach(action => {\r\n            if (dev.actions.includes(action)) {\r\n                const Icon = actionsMapping[action].icon;\r\n                actions.push(<span key={action} title={actionsMapping[action].desc}>\r\n                    <Icon className={this.props.classes.actionIcon} style={{color: actionsMapping[action].color}}/>\r\n                </span>);\r\n            }\r\n        });\r\n        // add unknown actions\r\n        for (let a = 0; a < dev.actions.length; a++) {\r\n            if (!actionsMapping[dev.actions[a]]) {\r\n                actions.push(<span key={dev.actions[a]}>{dev.actions[a]}</span>);\r\n            }\r\n        }\r\n        return actions;\r\n    }\r\n\r\n    onExpand(lineNum) {\r\n        const expanded = JSON.parse(JSON.stringify(this.state.expanded));\r\n        const pos = expanded.indexOf(this.state.devices[lineNum].name);\r\n        if (pos === -1) {\r\n            expanded.push(this.state.devices[lineNum].name);\r\n        } else {\r\n            expanded.splice(pos, 1);\r\n        }\r\n        this.setState({expanded});\r\n    }\r\n\r\n    onParamsChange(id, byON, type) {\r\n        this.addChanged(id, () => {\r\n            this.props.socket.getObject(id)\r\n                .then(obj => {\r\n                    Utils.updateSmartName(obj, undefined, byON, type, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\r\n\r\n                    if (this.state.lastChanged !== id) {\r\n                        this.setState({lastChanged: id});\r\n                        this.timerChanged && clearTimeout(this.timerChanged);\r\n                        this.timerChanged = setTimeout(() => {\r\n                            this.setState({lastChanged: ''});\r\n                            this.timerChanged = null;\r\n                        }, 30000);\r\n                    }\r\n\r\n                    return this.props.socket.setObject(id, obj);\r\n                })\r\n                .then(() => {\r\n                    // update obj\r\n                    this.informInstance(id);\r\n                })\r\n                .catch(err => this.props.onError(err));\r\n        });\r\n    }\r\n\r\n    renderSelectType(dev, lineNum, id, type) {\r\n        if (type !== false) {\r\n            const items = [\r\n                (<MenuItem key=\"_\" value=\"_\"><em>{I18n.t('no type')}</em></MenuItem>)\r\n            ];\r\n            for (let i = 0; i < SMARTTYPES.length; i++) {\r\n                items.push((<MenuItem  key={SMARTTYPES[i]} value={SMARTTYPES[i]}><em>{I18n.t(SMARTTYPES[i])}</em></MenuItem>));\r\n            }\r\n            return (\r\n                <FormControl>\r\n                    <Select value={type || '_'} onChange={e => this.onParamsChange(id, undefined, e.target.value)}>{items}</Select>\r\n                    <FormHelperText className={this.props.classes.devSubLineTypeTitle}>{I18n.t('Types')}</FormHelperText>\r\n                </FormControl>);\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n\r\n    renderChannels(dev, lineNum) {\r\n        const result = [];\r\n        const classes = this.props.classes;\r\n\r\n        const id = dev.main.getId;\r\n        const name = dev.func;\r\n        let background = this.props.themeType === 'dark' ? DEFAULT_CHANNEL_COLOR_DARK : DEFAULT_CHANNEL_COLOR_LIGHT;/*this.state.changed.indexOf(id) !== -1 ? CHANGED_COLOR : DEFAULT_CHANNEL_COLOR;\r\n        if (this.state.lastChanged === id && background === DEFAULT_CHANNEL_COLOR) {\r\n            background = LAST_CHANGED_COLOR;\r\n        }*/\r\n        result.push((<div key={'sub' + id} className={classes.devSubLine} style={{background}}>\r\n            <div className={classes.devSubLineName}>{name.toUpperCase()}</div>\r\n            <div className={classes.devSubSubLine}>\r\n                <div>{dev.main.getId}</div>\r\n                {dev.main.setId && dev.main.setId !== dev.main.getId ? (<div className={classes.devSubLineSetId}>{dev.main.setId}</div>) : null}\r\n            </div>\r\n\r\n        </div>));\r\n\r\n        dev.attributes.forEach(attr => {\r\n            result.push((<div key={'sub' + attr.getId} className={classes.devSubLine} style={{background}}>\r\n                <div className={classes.devSubLineName}>{attr.name.toUpperCase()}</div>\r\n                <div className={classes.devSubSubLine}>\r\n                    <div>{attr.getId}</div>\r\n                    {attr.setId && attr.setId !== attr.getId ? (<div className={classes.devSubLineSetId}>{attr.setId}</div>) : null}\r\n                </div>\r\n            </div>));\r\n        });\r\n\r\n        /*if (dev.additionalApplianceDetails.group) {\r\n            const channels   = dev.additionalApplianceDetails.channels;\r\n            const names      = dev.additionalApplianceDetails.names;\r\n            const types      = dev.additionalApplianceDetails.byONs;\r\n            const smarttypes = dev.additionalApplianceDetails.smartTypes;\r\n\r\n            let c = 0;\r\n            for (const chan in channels) {\r\n                if (channels.hasOwnProperty(chan)) {\r\n                    for (let i = 0; i < channels[chan].length; i++) {\r\n                        const id = channels[chan][i].id;\r\n                        let background = this.state.changed.indexOf(id) !== -1 ? CHANGED_COLOR : DEFAULT_CHANNEL_COLOR;\r\n                        if (this.state.lastChanged === id && background === DEFAULT_CHANNEL_COLOR) {\r\n                            background = LAST_CHANGED_COLOR;\r\n                        }\r\n                        result.push((<div key={'sub' + id} className={classes.devSubLine} style={(c % 2) ? {} : {background}}>\r\n                            <div className={this.props.classes.devLineActions + ' ' + this.props.classes.channelLineActions}>{this.renderActions(channels[chan][i])}</div>\r\n                            <div className={classes.devSubLineName} title={id}>{(names[id] || id)}\r\n                                {id !== names[id] ? (<span className={classes.devSubSubLineName}>{id}</span>) : null}\r\n                            </div>\r\n                            {this.renderSelectType(dev, lineNum, id, smarttypes[id])}\r\n                            {this.renderSelectByOn(dev, lineNum, id, types[id])}\r\n                            <IconButton aria-label=\"Delete\" className={this.props.classes.devSubLineDelete} onClick={() => this.onAskDelete(id, lineNum)}><IconDelete fontSize=\"middle\" /></IconButton>\r\n                        </div>));\r\n                        c++;\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n        }*/\r\n        return result;\r\n    }\r\n\r\n    renderDevice(dev, lineNum) {\r\n        //return (<div key={lineNum}>{JSON.stringify(dev)}</div>);\r\n        const expanded = this.state.expanded.indexOf(dev.name) !== -1;\r\n        let background = (lineNum % 2) ? (this.props.themeType === 'dark' ? '#272727' : '#f1f1f1') : 'inherit';\r\n        const changed = this.state.changed.indexOf(dev.iobID) !== -1;\r\n        if (changed) {\r\n            background = CHANGED_COLOR;\r\n        } else if (dev.iobID === this.state.lastChanged) {\r\n            background = this.props.themeType === 'dark' ? LAST_CHANGED_COLOR_DARK : LAST_CHANGED_COLOR_LIGHT;\r\n        }\r\n\r\n        //const isComplex = dev.\r\n\r\n        return [\r\n            (<div key={'line' + lineNum} className={this.props.classes.devLine} style={{background}}>\r\n                <div className={this.props.classes.devLineNumber}>{lineNum + 1}.</div>\r\n                <IconButton className={this.props.classes.devLineExpand} onClick={() => this.onExpand(lineNum)}>\r\n                    {dev.attributes.length ?\r\n                        (<Badge badgeContent={dev.attributes.length} color=\"primary\">{expanded ? (<IconCollapse/>) : (<IconExpand />)}</Badge>) :\r\n                        (expanded ? (<IconCollapse/>) : (<IconExpand />))}\r\n                </IconButton>\r\n                <div className={this.props.classes.devLineNameBlock} style={{display: 'inline-block', position: 'relative'}}>\r\n                    <span className={this.props.classes.devLineName}>{dev.name}</span>\r\n                    <span className={this.props.classes.devLineDescription}>{dev.description}</span>\r\n                    {changed ? (<CircularProgress className={this.props.classes.devLineProgress} size={20}/>) : null}\r\n                </div>\r\n                <span className={this.props.classes.devLineActions}>{this.renderActions(dev)}</span>\r\n                <IconButton aria-label=\"Edit\" className={this.props.classes.devLineEdit} onClick={() => this.onEdit(dev.iobID)}><IconEdit fontSize=\"middle\" /></IconButton>\r\n                <IconButton aria-label=\"Delete\" className={this.props.classes.devLineDelete} onClick={() => this.onAskDelete(dev.iobID)}><IconDelete fontSize=\"middle\" /></IconButton>\r\n\r\n            </div>),\r\n            expanded ? this.renderChannels(dev, lineNum) : null\r\n        ];\r\n    }\r\n\r\n    renderMessage() {\r\n        if (this.state.message) {\r\n            return <MessageDialog text={this.state.message} onClose={() => this.setState({message: ''})}/>;\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    changeSmartName(e) {\r\n        e && e.preventDefault();\r\n        // Check if the name is duplicate\r\n        this.addChanged(this.state.editId, () => {\r\n            const id = this.state.editId;\r\n            this.setState({editId: '', editObjectName: '', lastChanged: id});\r\n\r\n            this.timerChanged && clearTimeout(this.timerChanged);\r\n            this.timerChanged = setTimeout(() => {\r\n                this.setState({lastChanged: ''});\r\n                this.timerChanged = null;\r\n            }, 30000);\r\n\r\n            this.props.socket.getObject(id)\r\n                .then(obj => {\r\n                    Utils.updateSmartName(obj, this.editedSmartName, undefined, undefined, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\r\n                    return this.props.socket.setObject(id, obj);\r\n                })\r\n                .then(() => {\r\n                    // update obj\r\n                    this.informInstance(id);\r\n                })\r\n                .catch(err => this.props.onError(err));\r\n        });\r\n    }\r\n\r\n    renderEditDialog() {\r\n        if (this.state.editId) {\r\n            return (<Dialog\r\n                open={true}\r\n                maxWidth=\"sm\"\r\n                fullWidth={true}\r\n                onClose={() => {\r\n                    this.editedSmartName = null;\r\n                    this.setState({editId: '', editedSmartName: ''});\r\n                }}\r\n                aria-labelledby=\"message-dialog-title\"\r\n                aria-describedby=\"message-dialog-description\"\r\n            >\r\n                <DialogTitle id=\"message-dialog-title\">{this.props.title || I18n.t('Smart name for %s', this.state.editObjectName)}</DialogTitle>\r\n                <DialogContent>\r\n                    <p><span>ID:</span> <span className={this.props.classes.editedId}>{this.state.editId}</span></p>\r\n                    <TextField\r\n                        style={{width: '100%'}}\r\n                        label={I18n.t('Smart name')}\r\n                        onKeyDown={e =>\r\n                            e.keyCode === 13 && this.changeSmartName(e)}\r\n                        onChange={e => this.editedSmartName = e.target.value}\r\n                        defaultValue={this.state.editedSmartName}\r\n                        helperText={I18n.t('You can enter several names divided by comma')}\r\n                        margin=\"normal\"\r\n                    />\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={() => this.changeSmartName()} color=\"primary\" autoFocus>{I18n.t('Ok')}</Button>\r\n                    <Button onClick={() => {\r\n                        this.editedSmartName = null;\r\n                        this.setState({editId: '', editedSmartName: ''});\r\n                    }}>{I18n.t('Cancel')}</Button>\r\n                </DialogActions>\r\n            </Dialog>)\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    renderConfirmDialog() {\r\n        if (this.state.showConfirmation) {\r\n            return (<Dialog\r\n                open={true}\r\n                maxWidth=\"sm\"\r\n                fullWidth={true}\r\n                onClose={() => this.setState({showConfirmation: ''})}\r\n                aria-labelledby=\"confirmation-dialog-title\"\r\n                aria-describedby=\"confirmation-dialog-description\"\r\n            >\r\n                <DialogTitle id=\"confirmation-dialog-title\">{this.props.title || I18n.t('Device %s will be disabled.', this.state.deleteId)}</DialogTitle>\r\n                <DialogContent>\r\n                    <p>{I18n.t('Are you sure?')}</p>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={() => this.onDelete()} color=\"primary\" autoFocus>{I18n.t('Ok')}</Button>\r\n                    <Button onClick={() => this.setState({showConfirmation: ''})}>{I18n.t('Cancel')}</Button>\r\n                </DialogActions>\r\n            </Dialog>)\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    getSelectIdDialog() {\r\n        if (this.state.showSelectId) {\r\n            return <DialogSelectID\r\n                key=\"dialogSelectAlisa\"\r\n                imagePrefix={'../..'}\r\n                socket={this.props.socket}\r\n                selected={''}\r\n                types={['state']}\r\n                onClose={() => this.setState({showSelectId: false})}\r\n                onOk={(selected, name) => {\r\n                    this.setState({showSelectId: false});\r\n\r\n                    this.props.socket.getObject(selected)\r\n                        .then(obj => {\r\n                            if (obj) {\r\n                                const name = Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()});\r\n                                Utils.updateSmartName(obj, (name || I18n.t('Device name')).replace(/[-_.]+/g, ' '), undefined, undefined, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\r\n                                this.addChanged(obj._id);\r\n                                this.waitForUpdateID = obj._id;\r\n\r\n                                if (this.state.lastChanged !== obj._id) {\r\n                                    this.setState({lastChanged: obj._id});\r\n                                    this.timerChanged && clearTimeout(this.timerChanged);\r\n                                    this.timerChanged = setTimeout(() => {\r\n                                        this.setState({lastChanged: ''});\r\n                                        this.timerChanged = null;\r\n                                    }, 30000);\r\n                                }\r\n\r\n                                this.props.socket.setObject(obj._id, obj)\r\n                                    .then(() => this.informInstance(obj._id))\r\n                                    .catch(err => this.setState({message: err}));\r\n                            } else {\r\n                                this.setState({message: I18n.t('Invalid ID')});\r\n                            }\r\n                        });\r\n                }}\r\n            />;\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    renderDevices() {\r\n        const filter = this.state.filter.toLowerCase();\r\n        const result = [];\r\n        for (let i = 0; i < this.state.devices.length; i++) {\r\n            if (this.state.filter && this.state.devices[i].name.toLowerCase().indexOf(filter) === -1 ) continue;\r\n            result.push(this.renderDevice(this.state.devices[i], i));\r\n        }\r\n        return (<div key=\"listDevices\" className={this.props.classes.columnDiv}>{result}</div>);\r\n    }\r\n\r\n    renderListOfDevices() {\r\n        if (!this.state.showListOfDevices) {\r\n            return null;\r\n        }\r\n        const classes = this.props.classes;\r\n\r\n        return <Dialog\r\n            open={true}\r\n            maxWidth=\"xl\"\r\n            fullWidth\r\n            onClose={() => this.setState({showListOfDevices: false})}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n        >\r\n            <DialogTitle id=\"alert-dialog-title\">{I18n.t('List of devices to print out, e.g. to give all device names to your partner.')} <span role=\"img\" aria-label=\"smile\"></span></DialogTitle>\r\n            <DialogContent>\r\n                <div className={ classes.headerRow } >\r\n                    <div className={ classes.headerCell }>{ I18n.t('Name') }</div>\r\n                </div>\r\n                <div className={ this.props.classes.tableDiv } >\r\n                    { this.state.devices.map((item, i) => <div key={i}>\r\n                        <div className={ classes.tableCell }>{ item.name }</div>\r\n                    </div>)\r\n                    }\r\n                </div>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={() => {\r\n                    this.setState({showListOfDevices: false});\r\n                    const lines = this.state.devices.map(item => item.name);\r\n                    copy(lines.join('\\n'));\r\n                }} color=\"primary\">{I18n.t('Copy to clipboard')}</Button>\r\n                <Button onClick={() => this.setState({showListOfDevices: false})} autoFocus>{I18n.t('Close')}</Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    }\r\n\r\n    render() {\r\n        if (this.state.loading) {\r\n            return (<CircularProgress  key=\"alexaProgress\" />);\r\n        }\r\n\r\n        return (\r\n            <form key=\"alexa\" className={this.props.classes.tab}>\r\n                <Fab size=\"small\" color=\"secondary\" aria-label=\"Add\" className={this.props.classes.button} onClick={() => this.setState({showSelectId: true})}><IconAdd /></Fab>\r\n                <Fab size=\"small\" color=\"primary\" aria-label=\"Refresh\" className={this.props.classes.button}\r\n                      onClick={() => this.browse(true)} disabled={this.state.browse}>{this.state.browse ? (<CircularProgress size={20} />) : (<IconRefresh/>)}</Fab>\r\n                <Fab style={{marginLeft: '1rem'}}\r\n                     title={I18n.t('Show all devices for print out')}\r\n                     size=\"small\" aria-label=\"List of devices\" className={this.props.classes.button}\r\n                     onClick={() => this.setState({showListOfDevices: true})} disabled={this.state.browse}><IconList/></Fab>\r\n                <TextField\r\n                    placeholder={I18n.t('Filter')}\r\n                    className={this.state.filter}\r\n                    value={this.state.filter}\r\n                    onChange={e => this.setState({filter: e.target.value})}\r\n                    InputProps={{\r\n                        endAdornment: this.state.filter ? (\r\n                            <IconButton onClick={() => this.setState({ filter: '' })}>\r\n                                <IconClear />\r\n                            </IconButton>\r\n                        ) : undefined,\r\n                    }}\r\n                />\r\n                {this.renderDevices()}\r\n                {this.renderMessage()}\r\n                {this.renderEditDialog()}\r\n                {this.getSelectIdDialog()}\r\n                {this.renderConfirmDialog()}\r\n                {this.renderListOfDevices()}\r\n            </form>\r\n        );\r\n    }\r\n}\r\n\r\nAlisaDevices.propTypes = {\r\n    common: PropTypes.object.isRequired,\r\n    native: PropTypes.object.isRequired,\r\n    instance: PropTypes.number.isRequired,\r\n    adapterName: PropTypes.string.isRequired,\r\n    onError: PropTypes.func,\r\n    onLoad: PropTypes.func,\r\n    onChange: PropTypes.func,\r\n    socket: PropTypes.object.isRequired,\r\n    themeType: PropTypes.string,\r\n};\r\n\r\nexport default withStyles(styles)(AlisaDevices);\r\n","import React from 'react';\r\n\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport clsx from 'clsx';\r\n\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport IconEdit from '@material-ui/icons/Edit';\r\nimport IconDelete from '@material-ui/icons/Delete';\r\nimport IconExpand from '@material-ui/icons/NavigateNext';\r\nimport IconCollapse from '@material-ui/icons/ExpandMore';\r\nimport IconCheck from '@material-ui/icons/Check';\r\nimport IconClose from '@material-ui/icons/Close';\r\n\r\nfunction getAttr(obj, attr, lookup) {\r\n    if (typeof attr === 'string') {\r\n        attr = attr.split('.');\r\n    }\r\n\r\n    if (!obj) {\r\n        return null;\r\n    }\r\n\r\n    if (attr.length === 1) {\r\n        if (lookup && lookup[obj[attr[0]]]) {\r\n            return lookup[obj[attr[0]]];\r\n        } else {\r\n            return obj[attr[0]];\r\n        }\r\n    } else {\r\n        const name = attr.shift();\r\n        return getAttr(obj[name], attr);\r\n    }\r\n}\r\n\r\nfunction setAttr(obj, attr, value) {\r\n    if (typeof attr === 'string') {\r\n        attr = attr.split('.');\r\n    }\r\n\r\n    if (attr.length === 1) {\r\n        return obj[attr[0]] = value;\r\n    } else {\r\n        const name = attr.shift();\r\n        if (obj[name] === null || obj[name] === undefined) {\r\n            obj[name] = {};\r\n        }\r\n        return setAttr(obj[name], attr, value);\r\n    }\r\n}\r\n\r\nconst styles = theme => ({\r\n    tableContainer: {\r\n        width: '100%',\r\n        height: '100%',\r\n        overflow: 'auto'\r\n    },\r\n    table: {\r\n        width: '100%',\r\n        minWidth: 800,\r\n        maxWidth: 1920,\r\n    },\r\n    cell: {\r\n        paddingTop: 0,\r\n        paddingBottom: 0,\r\n        paddingLeft: 4,\r\n        paddingRight: 4,\r\n    },\r\n    rowMainWithChildren: {\r\n\r\n    },\r\n    rowMainWithoutChildren: {\r\n\r\n    },\r\n    rowNoEdit: {\r\n        opacity: 0.3\r\n    },\r\n    cellExpand: {\r\n        width: 30,\r\n    },\r\n    cellButton: {\r\n        width: 30,\r\n    },\r\n    cellHeader: {\r\n        fontWeight: 'bold',\r\n        background: theme.palette.type === 'dark' ? '#888' : '#888',\r\n        color: theme.palette.type === 'dark' ? '#EEE' : '#111',\r\n        height: 48,\r\n    },\r\n    width_name_nicknames: {\r\n        maxWidth: 150,\r\n    },\r\n    width_ioType: {\r\n        maxWidth: 100,\r\n    },\r\n    width_type: {\r\n        maxWidth: 100,\r\n    },\r\n    width_displayTraits: {\r\n        maxWidth: 100,\r\n    },\r\n    width_roomHint: {\r\n        maxWidth: 100,\r\n    },\r\n    rowSecondary: {\r\n        fontStyle: 'italic',\r\n    },\r\n    cellSecondary: {\r\n        fontSize: 10,\r\n    }\r\n});\r\n\r\nclass TreeTable extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let opened = window.localStorage.getItem('iot.ghome.opened') || '[]';\r\n        try {\r\n            opened = JSON.parse(opened) || [];\r\n        } catch (e) {\r\n            opened = [];\r\n        }\r\n        if (!Array.isArray(opened)) {\r\n            opened = [];\r\n        }\r\n\r\n        this.state = {\r\n            opened,\r\n            editMode: false,\r\n            deleteMode: false,\r\n            editData: null,\r\n        }\r\n    }\r\n\r\n    renderCell(item, col, level, i) {\r\n        if (this.state.editMode === i && col.editable !== 'never') {\r\n            let val = getAttr(item, col.field);\r\n            if (Array.isArray(val)) {\r\n                val = val[0];\r\n            }\r\n            return <TableCell\r\n                key={col.field}\r\n                className={clsx(this.props.classes.cell, level && this.props.classes.cellSecondary)}\r\n                style={col.cellStyle}\r\n                component=\"th\" >{\r\n                    col.lookup ?\r\n                        <Select\r\n                            onChange={e => {\r\n                                const editData = this.state.editData ? {...this.state.editData} : {};\r\n                                if (e.target.value === val) {\r\n                                    delete editData[col.field];\r\n                                } else {\r\n                                    editData[col.field] = e.target.value;\r\n                                }\r\n                                this.setState({editData});\r\n                            }}\r\n                            value={(this.state.editData && this.state.editData[col.field]) || val}\r\n                        >\r\n                            {Object.keys(col.lookup).map(v => <MenuItem value={v}>{col.lookup[v]}</MenuItem>)}\r\n                        </Select>\r\n                        :\r\n                        <TextField\r\n                            value={this.state.editData && this.state.editData[col.field] !== undefined ? this.state.editData[col.field] : val}\r\n                            onChange={e => {\r\n                                const editData = this.state.editData ? {...this.state.editData} : {};\r\n                                if (e.target.value === val) {\r\n                                    delete editData[col.field];\r\n                                } else {\r\n                                    editData[col.field] = e.target.value;\r\n                                }\r\n                                this.setState({editData});\r\n                            }}\r\n                        />\r\n            }</TableCell>;\r\n        } else {\r\n            return <TableCell\r\n                key={col.field}\r\n                className={clsx(this.props.classes.cell, level && this.props.classes.cellSecondary)}\r\n                style={col.cellStyle}\r\n                component=\"th\" >{getAttr(item, col.field, col.lookup)}</TableCell>;\r\n        }\r\n    }\r\n\r\n    renderLine(item, level) {\r\n        level = level || 0;\r\n        const i = this.props.data.indexOf(item);\r\n        if (!item) {\r\n            return null;\r\n        }\r\n        if (!level && item.parentId) {\r\n            return null;\r\n        } else if (level && !item.parentId) {\r\n            return null; // should never happens\r\n        } else {\r\n            // try to find children\r\n            const children = this.props.data.filter(it => it.parentId === item.id);\r\n            const opened = this.state.opened.includes(item.id);\r\n\r\n            return [\r\n                <TableRow\r\n                    key={item.id}\r\n                    className={clsx(\r\n                        this.props.classes.row,\r\n                        level  && this.props.classes.rowSecondary,\r\n                        !level && children.length && this.props.classes.rowMainWithChildren,\r\n                        !level && !children.length && this.props.classes.rowMainWithoutChildren,\r\n                        this.state.editMode !== false && this.state.editMode !== i && this.props.classes.rowNoEdit,\r\n                        this.state.deleteMode !== false && this.state.deleteMode !== i && this.props.classes.rowNoEdit,\r\n                    )}\r\n                >\r\n                    <TableCell className={clsx(this.props.classes.cell, this.props.classes.cellExpand, level && this.props.classes.cellSecondary)}>\r\n                        {children.length ? <IconButton onClick={() => {\r\n                            const opened = [...this.state.opened];\r\n                            const pos = opened.indexOf(item.id);\r\n                            if (pos === -1) {\r\n                                opened.push(item.id);\r\n                                opened.sort();\r\n                            } else {\r\n                                opened.splice(pos, 1);\r\n                            }\r\n\r\n                            this.setState({opened});\r\n                        }}>\r\n                                {opened ? <IconCollapse/> : <IconExpand/>}\r\n                            </IconButton>  : null}\r\n                    </TableCell>\r\n                    <TableCell scope=\"row\"\r\n                       className={clsx(this.props.classes.cell, level && this.props.classes.cellSecondary)}\r\n                       style={this.props.columns[0].cellStyle}>\r\n                        {getAttr(item, this.props.columns[0].field, this.props.columns[0].lookup)}\r\n                    </TableCell>\r\n                    {this.props.columns.map((col, ii) =>\r\n                        !ii ? null : this.renderCell(item, col, level, i))}\r\n                    <TableCell className={clsx(this.props.classes.cell, this.props.classes.cellButton)}>\r\n                        {this.state.editMode === i || this.state.deleteMode === i ?\r\n                            <IconButton\r\n                                disabled={\r\n                                    this.state.editMode !== false && (!this.state.editData || !Object.keys(this.state.editData).length)\r\n                                }\r\n                                onClick={() => {\r\n                                if (this.state.editMode !== false) {\r\n                                    const newData = JSON.parse(JSON.stringify(item));\r\n                                    Object.keys(this.state.editData).forEach(attr => setAttr(newData, attr, this.state.editData[attr]));\r\n                                    this.setState({editMode: false}, () => this.props.onUpdate(newData, item))\r\n                                } else {\r\n                                    this.setState({deleteMode: false}, () => this.props.onDelete(item))\r\n                                }\r\n                            }}>\r\n                                <IconCheck/>\r\n                            </IconButton>\r\n                            :\r\n                            <IconButton\r\n                                disabled={this.state.editMode !== false}\r\n                                onClick={() => this.setState({editMode: i, editData: null})}>\r\n                                <IconEdit/>\r\n                            </IconButton>}\r\n                    </TableCell>\r\n                    <TableCell className={clsx(this.props.classes.cell, this.props.classes.cellButton)}>\r\n                        {this.state.editMode === i || this.state.deleteMode === i ?\r\n                            <IconButton onClick={() => this.setState({editMode: false, deleteMode: false})}>\r\n                                <IconClose/>\r\n                            </IconButton>\r\n                            :\r\n                            <IconButton\r\n                                disabled={this.state.deleteMode !== false}\r\n                                onClick={() => this.setState({deleteMode: i})}>\r\n                                <IconDelete/>\r\n                            </IconButton>\r\n                        }\r\n                    </TableCell>\r\n                </TableRow>,\r\n                !level && this.state.opened.includes(item.id) ? children.map(item => this.renderLine(item, level + 1)) : null,\r\n            ];\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return <div className={clsx(this.props.classes.tableContainer, this.props.className)}>\r\n            <Table className={this.props.classes.table} aria-label=\"simple table\" size=\"small\" stickyHeader={true}>\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <TableCell component=\"th\" className={clsx(this.props.classes.cell, this.props.classes.cellHeader, this.props.classes.cellExpand)}/>\r\n                        <TableCell component=\"th\"\r\n                                   className={clsx(this.props.classes.cell, this.props.classes.cellHeader, this.props.classes['width_' + this.props.columns[0].field.replace(/\\./g, '_')])}\r\n                                   style={this.props.columns[0].cellStyle}>\r\n                            {this.props.columns[0].title}\r\n                        </TableCell>\r\n                        {this.props.columns.map((col, i) =>\r\n                            !i ? null : <TableCell\r\n                                key={col.field}\r\n                                className={clsx(this.props.classes.cell, this.props.classes.cellHeader, this.props.classes['width_' + col.field.replace(/\\./g, '_')])}\r\n                                style={col.cellStyle}\r\n                                component=\"th\"\r\n                                >{col.title}</TableCell>)}\r\n                        <TableCell component=\"th\" className={clsx(this.props.classes.cell, this.props.classes.cellHeader, this.props.classes.cellButton)}/>\r\n                        <TableCell component=\"th\" className={clsx(this.props.classes.cell, this.props.classes.cellHeader, this.props.classes.cellButton)}/>\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    {this.props.data.map(item => this.renderLine(item))}\r\n                </TableBody>\r\n            </Table>\r\n        </div>;\r\n    }\r\n}\r\n\r\nTreeTable.propTypes = {\r\n    data: PropTypes.array.isRequired,\r\n    className: PropTypes.string,\r\n    loading: PropTypes.bool,\r\n    columns: PropTypes.array,\r\n    onUpdate: PropTypes.func,\r\n    onDelete: PropTypes.func,\r\n    themeType: PropTypes.string,\r\n};\r\n\r\nexport default withStyles(styles)(TreeTable);\r\n\r\n","import React, {Component} from 'react';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\r\nimport PropTypes from 'prop-types';\r\nimport copy from 'copy-to-clipboard';\r\n\r\nimport Fab from '@material-ui/core/Fab';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport MessageDialog from '@iobroker/adapter-react/Dialogs/Message';\r\nimport DialogSelectID from '@iobroker/adapter-react/Dialogs/SelectID';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils'\r\nimport ExpertIcon from '@iobroker/adapter-react/Components/ExpertIcon'\r\nimport TreeTable from '../Components/TreeTable';\r\n\r\nimport {MdAdd as IconAdd} from 'react-icons/md';\r\nimport {MdRefresh as IconRefresh} from 'react-icons/md';\r\nimport {MdHelpOutline as IconHelp} from 'react-icons/md';\r\nimport {MdList as IconList} from 'react-icons/md';\r\nimport {MdClear as IconClear} from 'react-icons/md';\r\n\r\nconst styles = theme => ({\r\n    tab: {\r\n        height: '100%',\r\n        overflow: 'hidden',\r\n    },\r\n    tableDiv: {\r\n        width: '100%',\r\n        overflow: 'hidden',\r\n        height: 'calc(100% - 48px)',\r\n    },\r\n    searchText: {\r\n        width: 150,\r\n        marginLeft: theme.spacing(1),\r\n        verticalAlign: 'middle'\r\n    },\r\n    headerRow: {\r\n        paddingLeft: theme.spacing(1),\r\n        background: theme.palette.primary.main,\r\n    },\r\n    headerCell: {\r\n        display: 'inline-block',\r\n        verticalAlign: 'top',\r\n        width: '30%'\r\n    },\r\n    tableCell: {\r\n        display: 'inline-block',\r\n        verticalAlign: 'top',\r\n        width: '30%'\r\n    }\r\n});\r\n\r\nconst MOBILE_HEIGHT = 400;\r\nconst MOBILE_WIDTH = 400;\r\n\r\nclass GoogleSmartNames extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.myTableRef =  React.createRef();\r\n        this.state = {\r\n            editedSmartName: '',\r\n            editId: '',\r\n            editObjectName: '',\r\n            deleteId: '',\r\n\r\n            expertMode: window.localStorage.getItem('App.expertMode') !== 'true',\r\n            helpHidden: window.localStorage.getItem('App.helpHidden') === 'true',\r\n            showSelectId: false,\r\n            searchText: '',\r\n            showConfirmation: '',\r\n            changed: [],\r\n            devices: [],\r\n            message: '',\r\n            filter: '',\r\n            loading: true,\r\n            browse: false,\r\n            expanded: [],\r\n            lastChanged: '',\r\n            helpHeight: 0,\r\n            columns: [\r\n                {title: I18n.t('ID'), field: 'id', editable: 'never', cellStyle: {\r\n                    maxWidth: '12rem',\r\n                    overflow: 'hidden',\r\n                    wordBreak: 'break-all'\r\n                }},\r\n                {title: I18n.t('Smart names'), field: 'name.nicknames'},\r\n                {title: I18n.t('ioBType'), field: 'ioType', editable: 'never', cellStyle: {\r\n                    maxWidth: '4rem',\r\n                    overflow: 'hidden',\r\n                    wordBreak: 'break-all'\r\n                }},\r\n                {title: I18n.t('Type'), field: 'type',  lookup: {\r\n                    'action.devices.types.AC_UNIT':         'Air conditioning unit',\r\n                    'action.devices.types.AIRFRESHENER':    'Air Freshener',\r\n                    'action.devices.types.AIRPURIFIER':     'Air purifier',\r\n                    'action.devices.types.AWNING':          'Awning',\r\n                    'action.devices.types.BLINDS':          'Blinds',\r\n                    'action.devices.types.BOILER':          'Boiler',\r\n                    'action.devices.types.CAMERA':          'Camera',\r\n                    'action.devices.types.COFFEE_MAKER':    'Coffee maker',\r\n                    'action.devices.types.CURTAIN':         'Curtain',\r\n                    'action.devices.types.DISHWASHER':      'Dishwasher',\r\n                    'action.devices.types.DOOR':            'Door',\r\n                    'action.devices.types.DRYER':           'Dryer',\r\n                    'action.devices.types.FAN':             'Fan',\r\n                    'action.devices.types.FIREPLACE':       'Fireplace',\r\n                    'action.devices.types.GARAGE':          'Garage',\r\n                    'action.devices.types.GATE':            'Gate',\r\n                    'action.devices.types.HEATER':          'Heater',\r\n                    'action.devices.types.HOOD':            'Hood',\r\n                    'action.devices.types.KETTLE':          'Kettle',\r\n                    'action.devices.types.LIGHT':           'Light',\r\n                    'action.devices.types.LOCK':            'Lock',\r\n                    'action.devices.types.MOP':             'Mop',\r\n                    'action.devices.types.MICROWAVE':       'Microwave',\r\n                    'action.devices.types.OUTLET':          'Outlet',\r\n                    'action.devices.types.OVEN':            'Oven',\r\n                    'action.devices.types.PERGOLA':         'Pergola',\r\n                    'action.devices.types.REFRIGERATOR':    'Refrigerator',\r\n                    'action.devices.types.SCENE':           'Scene',\r\n                    'action.devices.types.SECURITYSYSTEM':  'Security System',\r\n                    'action.devices.types.SENSOR':          'Sensor',\r\n                    'action.devices.types.SHUTTER':         'Shutter',\r\n                    'action.devices.types.SHOWER':          'Shower',\r\n                    'action.devices.types.SPEAKER':         'Speaker',\r\n                    'action.devices.types.SPRINKLER':       'Sprinkler',\r\n                    'action.devices.types.SWITCH':          'Switch',\r\n                    'action.devices.types.THERMOSTAT':      'Thermostat',\r\n                    'action.devices.types.VACUUM':          'Vacuum',\r\n                    'action.devices.types.VALVE':           'Valve',\r\n                    'action.devices.types.WASHER':          'Washer',\r\n                    'action.devices.types.WATERHEATER':     'Water heater',\r\n                    'action.devices.types.WINDOW':          'Window'\r\n                }},\r\n                {title: I18n.t('Function/Trait'), field: 'displayTraits',  lookup: {\r\n                    // 'action.devices.traits.ArmDisarm':   'ArmDisarm',\r\n                    'action.devices.traits.Brightness':     'Brightness',\r\n                    // 'action.devices.traits.CameraStream': 'CameraStream',\r\n                    'action.devices.traits.ColorSetting_temperature': 'ColorSetting_Temperature',\r\n                    'action.devices.traits.ColorSetting_spectrumRGB': 'ColorSetting_RGB',\r\n                    // 'action.devices.traits.Dock':        'Dock',\r\n                    'action.devices.traits.FanSpeed':       'FanSpeed',\r\n                    // 'action.devices.traits.LightEffects': 'LightEffects',\r\n                    // 'action.devices.traits.Locator':     'Locator',\r\n                    'action.devices.traits.LockUnlock':     'LockUnlock',\r\n                    'action.devices.traits.Modes':          'Modes',\r\n                    'action.devices.traits.OnOff':          'OnOff',\r\n                    'action.devices.traits.OpenClose':      'OpenClose',\r\n                    // 'action.devices.traits.RunCycle':    'RunCycle',\r\n                    'action.devices.traits.Scene':          'Scene',\r\n                    // 'action.devices.traits.Sensor':      'Sensor',\r\n                    'action.devices.traits.StartStop':      'StartStop',\r\n                    'action.devices.traits.TemperatureControl_temperatureSetpointCelsius':      'Oven_SetTemp',\r\n                    'action.devices.traits.TemperatureControl_temperatureAmbientCelsius':       'Oven_StatusTemp',\r\n                    'action.devices.traits.TemperatureSetting_thermostatMode':                  'Thermostat_Mode',\r\n                    'action.devices.traits.TemperatureSetting_thermostatTemperatureSetpoint':   'Thermostat_SetTemp',\r\n                    'action.devices.traits.TemperatureSetting_thermostatTemperatureAmbient':    'Thermostat_StatusTemp',\r\n                    'action.devices.traits.TemperatureSetting_thermostatHumidityAmbient':       'Thermostat_StatusHumidity',\r\n                    // 'action.devices.traits.Timer':       'Timer',\r\n                    'action.devices.traits.Toggles':        'Toggles',\r\n                    'action.devices.traits.Volume':         'Volume',\r\n                    }},\r\n\r\n                {title: I18n.t('Attributes'), field: 'displayAttributes',   cellStyle: {\r\n                        maxWidth: '12rem',\r\n                        overflow: 'hidden',\r\n                        wordBreak: 'break-all'\r\n                    },\r\n                    expertMode: true,\r\n                    editComponent: props => (<textarea rows={4} style={{width: '100%', resize: 'vertical'}}\r\n                          value={props.value}\r\n                          onChange={e => props.onChange(e.target.value)}\r\n                        />)\r\n                },\r\n                {title: I18n.t('Room'), field: 'roomHint', editable: 'never'},\r\n                {title: I18n.t('Auto'), field: 'smartEnum', editable: 'never',\r\n                    cellStyle: {\r\n                        maxWidth: '3rem',\r\n                        overflow: 'hidden',\r\n                        wordBreak: 'break-all'\r\n                    },\r\n                    expertMode: true,\r\n                },\r\n                {title: I18n.t('Conversation to GH'), field: 'displayConv2GH',  cellStyle: {\r\n                        maxWidth: '4rem',\r\n                        overflow: 'hidden',\r\n                        wordBreak: 'break-all'\r\n                    },\r\n                    expertMode: true,\r\n                    editComponent: props => (\r\n                        <div>Conversation to Google Home = function(value)&#123; <br/>\r\n                            <textarea rows={4} style={{width: '100%', resize: 'vertical'}}\r\n                                value={props.value}\r\n                                onChange={e => props.onChange(e.target.value)}\r\n                            />\r\n                            &#125;\r\n                        </div>\r\n                    )\r\n                },\r\n                { title: I18n.t('Conversation to ioB'), field: 'displayConv2iob', cellStyle: {\r\n                    maxWidth: '4rem',\r\n                    overflow: 'hidden',\r\n                    wordBreak: 'break-all'\r\n                    },\r\n                    expertMode: true,\r\n                    editComponent: props => (\r\n                        <div>Conversation to ioBroker = function(value)&#123; <br/>\r\n                            <textarea rows={4} style={{width: '100%', resize: 'vertical'}}\r\n                                value={props.value}\r\n                                onChange={e => props.onChange(e.target.value)}\r\n                            />\r\n                            &#125;\r\n                        </div>\r\n                    )},\r\n              ]\r\n        };\r\n\r\n        this.timerChanged        = null;\r\n        this.browseTimer         = null;\r\n        this.browseTimerCount    = 0;\r\n        this.editedSmartName     = '';\r\n\r\n        this.waitForUpdateID     = null;\r\n        this.onReadyUpdateBound  = this.onReadyUpdate.bind(this);\r\n        this.onResultUpdateBound = this.onResultUpdate.bind(this);\r\n        this.helpRef             = React.createRef();\r\n\r\n        this.props.socket.getObject(`system.adapter.${this.props.adapterName}.${this.props.instance}`).then(obj => {\r\n            this.props.socket.getState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`).then(state => {\r\n                if (!obj || !obj.common || (!obj.common.enabled && (!state || !state.val))) {\r\n                    this.setState({message: I18n.t('Instance must be enabled'), loading: false, devices: []});\r\n                } else {\r\n                    this.browse();\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    browse(isIndicate) {\r\n        if (Date.now() - this.lastBrowse < 500) return;\r\n        this.lastBrowse = Date.now();\r\n        if (isIndicate) {\r\n            this.setState({loading: true, browse: true});\r\n        } else {\r\n            this.setState({browse: true});\r\n        }\r\n\r\n        this.browseTimer = setTimeout(() => {\r\n            console.log('Browse timeout!');\r\n            this.browseTimer = null;\r\n            this.browseTimerCount++;\r\n            if (this.browseTimerCount < 5) {\r\n                this.browse(isIndicate);\r\n            } else {\r\n                this.setState({message: I18n.t('Cannot read devices!')});\r\n            }\r\n        }, 10000);\r\n\r\n        this.props.socket.sendTo(this.props.adapterName + '.' + this.props.instance, 'browseGH', null)\r\n            .then(list => {\r\n                this.browseTimer && clearTimeout(this.browseTimer);\r\n                this.browseTimerCount = 0;\r\n                this.browseTimer = null;\r\n\r\n                if (list && list.error) {\r\n                    this.setState({message: I18n.t(list.error)});\r\n                } else {\r\n                    if (this.waitForUpdateID) {\r\n                        if (!this.onEdit(this.waitForUpdateID, list)) {\r\n                            this.setState({message: I18n.t('Device %s was not added', this.waitForUpdateID)});\r\n                        }\r\n                        this.waitForUpdateID = null;\r\n                    }\r\n\r\n                    this.setState({devices: list, loading: false, changed: [], browse: false});\r\n                }\r\n            })\r\n            .catch(error => {\r\n                this.setState({message: I18n.t(error)});\r\n            });\r\n    }\r\n\r\n    onReadyUpdate(id, state) {\r\n        console.log(`Update ${id} ${state ? state.val + '/' + state.ack : 'null'}`);\r\n        if (state && state.ack === true && state.val === true) {\r\n            if (this.devTimer) clearTimeout(this.devTimer);\r\n            this.devTimer = setTimeout(() => {\r\n                this.devTimer = null;\r\n                this.browse();\r\n            }, 10);\r\n        }\r\n    }\r\n\r\n    onResultUpdate(state) {\r\n        state && state.ack === true && state.val && this.setState({message: state.val});\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.socket.subscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updatesGH`,     this.onReadyUpdateBound);\r\n        this.props.socket.subscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updatesResult`, this.onResultUpdateBound);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.props.socket.unsubscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updatesGH`,     this.onReadyUpdateBound);\r\n        this.props.socket.unsubscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updatesResult`, this.onResultUpdateBound);\r\n        if (this.timerChanged) {\r\n            clearTimeout(this.timerChanged);\r\n            this.timerChanged = null;\r\n        }\r\n    }\r\n\r\n    informInstance(id) {\r\n        this.props.socket.sendTo(this.props.adapterName + '.' + this.props.instance, 'update', id);\r\n    }\r\n\r\n    addChanged(id, cb) {\r\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\r\n        if (changed.indexOf(id) === -1) {\r\n            changed.push(id);\r\n            this.setState({changed}, () => cb && cb());\r\n        } else {\r\n            cb && cb();\r\n        }\r\n    }\r\n\r\n    removeChanged(id) {\r\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\r\n        const pos = changed.indexOf(id);\r\n\r\n        if (pos !== -1) {\r\n            changed.splice(pos, 1);\r\n            this.setState({changed});\r\n        }\r\n    }\r\n\r\n    onEdit(id, devices) {\r\n        devices = devices || this.state.devices;\r\n        const device = devices.find(dev => dev.id === id);\r\n        if (device) {\r\n            this.props.socket.getObject(id)\r\n                .then(obj => {\r\n                    let smartName = device.common && device.common.smartName ? device.common.smartName : device._id;\r\n                    if (typeof smartName === 'object' && smartName) {\r\n                        smartName = smartName[I18n.getLanguage()] || smartName.en;\r\n                    }\r\n                    this.editedSmartName = smartName;\r\n                    this.setState({editId: id, editedSmartName: smartName, editObjectName: Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()})});\r\n                });\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    onDelete() {\r\n        let id = this.state.deleteId;\r\n        // const device = this.state.devices.find(dev => dev.additionalApplianceDetails.id === id);\r\n        this.addChanged(id, () => {\r\n            this.props.socket.getObject(id)\r\n                .then(obj => {\r\n                    Utils.disableSmartName(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\r\n                    return this.props.socket.setObject(id, obj);\r\n                })\r\n                .then(() => {\r\n                    this.setState({deleteId: '', showConfirmation: false, lastChanged: id});\r\n\r\n                    this.timerChanged && clearTimeout(this.timerChanged);\r\n                    this.timerChanged = setTimeout(() => {\r\n                        this.setState({lastChanged: ''});\r\n                        this.timerChanged = null;\r\n                    }, 30000);\r\n\r\n                    // update obj\r\n                    this.informInstance(id);\r\n                })\r\n                .catch(err => this.props.onError(err));\r\n        });\r\n    }\r\n\r\n    renderSelectByOn(id, type) {\r\n        // type = '-', 'stored', false or number [5-100]\r\n        if (type !== false) {\r\n            const items = [\r\n                (<MenuItem key=\"_\" value=\"\"><em>{I18n.t('Default')}</em></MenuItem>),\r\n                (<MenuItem key=\"last\" value=\"stored\">{I18n.t('last value')}</MenuItem>)\r\n            ];\r\n            for (let i = 5; i <= 100; i += 5) {\r\n                items.push((<MenuItem  key={i.toString()} value={i.toString()}>{i}%</MenuItem>));\r\n            }\r\n            return (<FormControl className={this.props.classes.devSubLineByOn}>\r\n                <Select className={this.props.classes.devSubLineByOnSelect} value={(type || '').toString()} onChange={e => this.onParamsChange(id, e.target.value)}>{items}</Select>\r\n                <FormHelperText className={this.props.classes.devSubLineTypeTitle}>{I18n.t('by ON')}</FormHelperText>\r\n            </FormControl>);\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    onParamsChange(id, byON, type) {\r\n        this.addChanged(id, () => {\r\n            this.props.socket.getObject(id)\r\n                .then(obj => {\r\n                    Utils.updateSmartName(obj, undefined, byON, type, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\r\n\r\n                    if (this.state.lastChanged !== id) {\r\n                        this.setState({lastChanged: id});\r\n                        this.timerChanged && clearTimeout(this.timerChanged);\r\n                        this.timerChanged = setTimeout(() => {\r\n                            this.setState({lastChanged: ''});\r\n                            this.timerChanged = null;\r\n                        }, 30000);\r\n                    }\r\n\r\n                    return this.props.socket.setObject(id, obj);\r\n                })\r\n                .then(() => {\r\n                    // update obj\r\n                    this.informInstance(id);\r\n                })\r\n                .catch(err => this.props.onError(err));\r\n        });\r\n    }\r\n\r\n    onGHParamsChange(newData, oldData) {\r\n        this.addChanged(newData.id, () => {\r\n            this.props.socket.getObject(newData.id)\r\n                .then(obj => {\r\n                    if (!obj || !obj.common) {\r\n                        return this.setState({message: I18n.t(`Object %s is invalid. No common found.`, newData.id)});\r\n                    }\r\n                    //  id, newData.type, newData.displayTraits, newData.displayAttributes\r\n                    Utils.updateSmartName(obj, this.editedSmartName, undefined, undefined, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\r\n\r\n                    if (JSON.stringify(newData.displayTraits) !== JSON.stringify(oldData.displayTraits)) {\r\n                        if (!Array.isArray(newData.displayTraits)) {\r\n                            newData.displayTraits=[newData.displayTraits]\r\n                        }\r\n\r\n                        obj.common.smartName.ghTraits = newData.displayTraits;\r\n                    }\r\n                    if (newData.type !== oldData.type) {\r\n                        obj.common.smartName.ghType = newData.type;\r\n                    }\r\n                    if (newData.displayAttributes !== oldData.displayAttributes ) {\r\n                        obj.common.smartName.ghAttributes = newData.displayAttributes;\r\n                        try {\r\n                            if (obj.common.smartName.ghAttributes) {\r\n                                JSON.parse(obj.common.smartName.ghAttributes)\r\n                            }\r\n                        } catch (error) {\r\n                            this.setState({message: I18n.t('Attributes has not correct JSON format.')});\r\n                        }\r\n                    }\r\n                    if (newData.conv2GH) {\r\n                        obj.common.smartName.ghConv2GH = newData.displayConv2GH;\r\n                    }\r\n                    if (newData.conv2iob) {\r\n                        obj.common.smartName.ghConv2iob = newData.displayConv2iob;\r\n                    }\r\n                    return this.props.socket.setObject(newData.id, obj);\r\n                })\r\n                .then(() => {\r\n                    // update obj\r\n                    this.informInstance(newData.id);\r\n                })\r\n                .catch(err => this.props.onError(err));\r\n        });\r\n    }\r\n\r\n    renderMessage() {\r\n        if (this.state.message) {\r\n            return <MessageDialog text={this.state.message} onClose={() => this.setState({message: ''})}/>;\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    changeSmartName(e) {\r\n        e && e.preventDefault();\r\n        // Check if the name is duplicate\r\n        this.addChanged(this.state.editId, () => {\r\n            const id = this.state.editId;\r\n            this.setState({editId: '', editObjectName: '', lastChanged: id});\r\n\r\n            this.timerChanged && clearTimeout(this.timerChanged);\r\n            this.timerChanged = setTimeout(() => {\r\n                this.setState({lastChanged: ''});\r\n                this.timerChanged = null;\r\n            }, 30000);\r\n\r\n            this.props.socket.getObject(id)\r\n                .then(obj => {\r\n                    Utils.updateSmartName(obj, this.editedSmartName, undefined, undefined, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\r\n                    return this.props.socket.setObject(id, obj);\r\n                })\r\n                .then(() => {\r\n                    // update obj\r\n                    this.informInstance(id);\r\n                })\r\n                .catch(err => this.props.onError(err));\r\n        });\r\n    }\r\n\r\n    getSelectIdDialog() {\r\n        if (this.state.showSelectId) {\r\n            return <DialogSelectID\r\n                key=\"dialogSelectGoogle\"\r\n                imagePrefix={'../..'}\r\n                socket={this.props.socket}\r\n                selected={''}\r\n                types={['state']}\r\n                onClose={() => this.setState({showSelectId: false})}\r\n                onOk={(selected) => {\r\n                    this.setState({showSelectId: false});\r\n\r\n                    this.props.socket.getObject(selected)\r\n                        .then(obj => {\r\n                            if (obj) {\r\n                                if (!obj.common) {\r\n                                    return this.setState({message: I18n.t(`Object %s is invalid. No common found.`, selected)});\r\n                                }\r\n\r\n                                const name = Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()});\r\n                                Utils.updateSmartName(obj, (name || I18n.t('Device name')).replace(/[-_.]+/g, ' '), undefined, undefined, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\r\n                                this.addChanged(obj._id);\r\n                                this.waitForUpdateID = obj._id;\r\n\r\n                                if (this.state.lastChanged !== obj._id) {\r\n                                    this.setState({lastChanged: obj._id});\r\n                                    this.timerChanged && clearTimeout(this.timerChanged);\r\n                                    this.timerChanged = setTimeout(() => {\r\n                                        this.setState({lastChanged: ''});\r\n                                        this.timerChanged = null;\r\n                                    }, 30000);\r\n                                }\r\n\r\n                                if (!obj.common.smartName) {\r\n                                    obj.common.smartName = {ghType: 'action.devices.types.LIGHT'};\r\n                                    obj.common.smartName = {ghTraits: ['action.devices.traits.OnOff']}\r\n                                } else {\r\n                                    obj.common.smartName.ghType = 'action.devices.types.LIGHT';\r\n                                    obj.common.smartName.ghTraits = ['action.devices.traits.OnOff'];\r\n                                }\r\n\r\n                                this.props.socket.setObject(obj._id, obj)\r\n                                    .then(() => {\r\n                                        this.informInstance(obj._id);\r\n                                        this.setState({message: I18n.t('Please add type and trait to complete the Google Home state.')});\r\n                                    })\r\n                                    .catch(err => this.setState({message: err}));\r\n                            } else {\r\n                                this.setState({message: I18n.t('Invalid ID')});\r\n                            }\r\n                        });\r\n                }}\r\n            />;\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    renderListOfDevices() {\r\n        if (!this.state.showListOfDevices) {\r\n            return null;\r\n        }\r\n        const classes = this.props.classes;\r\n\r\n        return <Dialog\r\n            open={true}\r\n            maxWidth=\"xl\"\r\n            fullWidth\r\n            onClose={() => this.setState({showListOfDevices: false})}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n        >\r\n            <DialogTitle id=\"alert-dialog-title\">{I18n.t('List of devices to print out, e.g. to give all device names to your partner.')} <span role=\"img\" aria-label=\"smile\"></span></DialogTitle>\r\n            <DialogContent>\r\n                <div className={ classes.headerRow } >\r\n                    <div className={ classes.headerCell }>{ I18n.t('Name') }</div>\r\n                    <div className={ classes.headerCell }>{ I18n.t('Function') }</div>\r\n                    <div className={ classes.headerCell }>{ I18n.t('Room') }</div>\r\n                </div>\r\n                <div className={ this.props.classes.tableDiv } >\r\n                    { this.state.devices.map((item, i) => <div key={i}>\r\n                            <div className={ classes.tableCell }>{ item.name.nicknames.join(', ') }</div>\r\n                            <div className={ classes.tableCell }>{ item.displayTraits.map(n => n.replace('action.devices.traits.', '')).join(', ') }</div>\r\n                            <div className={ classes.tableCell }>{ item.roomHint }</div>\r\n                        </div>)\r\n                    }\r\n                </div>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={() => {\r\n                    this.setState({showListOfDevices: false});\r\n                    const lines = this.state.devices.map(item => item.name.nicknames.join(', ') + '\\t' + item.displayTraits + '\\t' + item.roomHint);\r\n                    copy(lines.join('\\n'));\r\n                }} color=\"primary\">{I18n.t('Copy to clipboard')}</Button>\r\n                <Button onClick={() => this.setState({showListOfDevices: false})} autoFocus>{I18n.t('Close')}</Button>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n\r\n    renderInstructions() {\r\n        const desktop = true || window.innerHeight > MOBILE_HEIGHT && window.innerWidth > MOBILE_WIDTH;\r\n\r\n        if (this.state.helpHidden || this.props.smallDisplay || !desktop) {\r\n            return null;\r\n        }\r\n\r\n        const manualModeHint = I18n.t('manualModeHint');\r\n        return <div style={{width: '100%'}} ref={this.helpRef}>\r\n            <div style={{marginTop: '4rem', display: 'flex'}}>\r\n                <div style={{flex: '50%'}}>\r\n                    <div style={{fontWeight:\"bold\"}}>{I18n.t('Auto Mode')}</div>\r\n                    <div style={{marginTop: \"0.8rem\", marginRight: \"0.8rem\",}}>{I18n.t('To auto detect devices please assign a room and function to the channel if no channel available than assign to a device. Not only to the state or device. And enable them under SmartEnum/Intelligente Aufzhlung')}</div>\r\n                </div>\r\n                <div style={{flex: '50%'}}>\r\n                    <div style={{fontWeight: 'bold'}}>{I18n.t('Manual Mode')}</div>\r\n                    <span>{Utils.renderTextWithA(manualModeHint)}</span>\r\n                </div>\r\n            </div>\r\n            <br/>\r\n            <div style={{flex: '100%'}}>\r\n                <div style={{fontWeight: \"bold\"}}>{Utils.renderTextWithA(I18n.t(\"For help use this forum <a target='_blank' rel='noopener noreferrer' href='https://forum.iobroker.net/topic/24061/google-home-assistant-iobroker-einrichten-nutzen/'>thread</a>\"))}</div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    renderToolbar() {\r\n        const desktop = true || window.innerHeight > MOBILE_HEIGHT && window.innerWidth > MOBILE_WIDTH;\r\n\r\n        return <Toolbar variant=\"dense\">\r\n            <Fab size=\"small\" color=\"secondary\" aria-label=\"Add\" className={this.props.classes.button} onClick={() => this.setState({showSelectId: true})}><IconAdd /></Fab>\r\n            <Fab style={{marginLeft: '1rem'}} size=\"small\" color=\"primary\" aria-label=\"Refresh\" className={this.props.classes.button}\r\n                 onClick={() => this.browse(true)} disabled={this.state.browse}>{this.state.browse ? <CircularProgress size={20} /> : <IconRefresh/>}</Fab>\r\n            {desktop && !this.state.hideHelp ? <Fab style={{marginLeft: '1rem'}} size=\"small\" color={this.state.helpHidden ? 'default' : 'primary'} aria-label=\"Help\" className={this.props.classes.button}\r\n                 title={I18n.t('Show/Hide help')}\r\n                 onClick={() => {\r\n                     window.localStorage.setItem('App.helpHidden', this.state.helpHidden ? 'false' : 'true');\r\n                     this.setState({helpHidden: !this.state.helpHidden});\r\n                 }} disabled={this.state.browse}><IconHelp/></Fab> : null }\r\n            <Fab style={{marginLeft: '1rem'}}\r\n                 size=\"small\"\r\n                 color={this.state.expertMode ? 'primary' : 'default'} aria-label=\"Help\" className={this.props.classes.button}\r\n                 title={I18n.t('Toggle expert mode')}\r\n                 onClick={() => {\r\n                     window.localStorage.setItem('App.expertMode', this.state.expertMode ? 'false' : 'true');\r\n                     this.setState({expertMode: !this.state.expertMode});\r\n                 }} disabled={this.state.browse}><ExpertIcon/></Fab>\r\n            <Fab style={{marginLeft: '1rem'}}\r\n                 title={I18n.t('Show all devices for print out')}\r\n                 size=\"small\" aria-label=\"List of devices\" className={this.props.classes.button}\r\n                 onClick={() => this.setState({showListOfDevices: true})} disabled={this.state.browse}><IconList/></Fab>\r\n            {!this.props.smallDisplay ? <TextField\r\n                className={this.props.classes.searchText}\r\n                label={I18n.t('Filter')}\r\n                value={this.state.searchText} onChange={e => this.setState({searchText: e.target.value})}\r\n                InputProps={{\r\n                    endAdornment: this.state.searchText ? (\r\n                        <IconButton onClick={() => this.setState({ searchText: '' })}>\r\n                            <IconClear />\r\n                        </IconButton>\r\n                    ) : undefined,\r\n                }}\r\n            /> : null}\r\n        </Toolbar>;\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        if (this.helpRef.current) {\r\n            const h = this.helpRef.current.clientHeight;\r\n            if (this.state.helpHeight !== h) {\r\n                if (!this.state.helpHidden && h + 64 + 48 + 200 > window.innerHeight) {\r\n                    setTimeout(() => this.setState({helpHeight: h, helpHidden: true, hideHelp: true}), 50);\r\n                } else {\r\n                    setTimeout(() => this.setState({helpHeight: h}), 50);\r\n                }\r\n            }\r\n        } else if (this.state.helpHeight) {\r\n            setTimeout(() => this.setState({helpHeight: 0}), 50);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (this.state.loading) {\r\n            return <CircularProgress  key=\"alexaProgress\" />;\r\n        }\r\n        const searchText = this.state.searchText.toLowerCase();\r\n        const devices = this.state.searchText ? this.state.devices.filter(item =>\r\n            item.name?.name?.toLowerCase().includes(searchText) ||\r\n            item.name?.defaultNames?.find(n => n.toLowerCase().includes(searchText)) ||\r\n            item.name?.nicknames?.find(n => n.toLowerCase().includes(searchText)))\r\n            : this.state.devices;\r\n\r\n        return <form key=\"gh\" className={this.props.classes.tab}>\r\n            {this.renderToolbar()}\r\n            {this.renderInstructions()}\r\n            <div className={this.props.classes.tableDiv} style={{height: `calc(100% - ${48 + (this.state.helpHeight ? this.state.helpHeight + 64 : 0)}px)`}}>\r\n                <TreeTable\r\n                    columns={this.state.expertMode ? this.state.columns : this.state.columns.filter(item => !item.expertMode)}\r\n                    data={devices}\r\n                    onUpdate={(newData, oldData) => {\r\n                        if (newData.name.nicknames && Array.isArray(newData.name.nicknames)) {\r\n                            newData.name.nicknames = newData.name.nicknames.join(',');\r\n                        }\r\n                        this.editedSmartName = newData.name.nicknames;\r\n                        this.setState({editId: newData.id}, () => {\r\n                            if (!newData.type || !newData.displayTraits) {\r\n                                this.setState({browse: true, message: I18n.t('Please add action and trait to complete the Google Home state.')});\r\n                            } else {\r\n                                this.setState({browse: true});\r\n                            }\r\n\r\n                            this.onGHParamsChange(newData, oldData);\r\n                            const devices = [...this.state.devices];\r\n                            devices[devices.indexOf(oldData)] = newData;\r\n                            this.setState({ ...this.state, devices});\r\n                        });\r\n                    }}\r\n\r\n                    onDelete={oldData => {\r\n                        // if smartenum set smartname on false if not delete/reset smartname content\r\n                        if (oldData.smartEnum === 'X') {\r\n                            this.setState({deleteId: oldData.id});\r\n                        } else {\r\n                            this.props.socket.getObject(oldData.id)\r\n                                .then(obj => {\r\n                                    if (obj && obj.common && obj.common['smartName']) {\r\n                                        delete obj.common['smartName']['ghTraits'];\r\n                                        delete obj.common['smartName']['ghType'];\r\n                                        delete obj.common['smartName']['ghAttributes'];\r\n                                    }\r\n                                    return this.props.socket.setObject(oldData.id, obj);\r\n                                });\r\n                        }\r\n\r\n                        return new Promise(resolve => {\r\n                            setTimeout(() => {\r\n                                if (this.state.deleteId) {\r\n                                    this.onDelete();\r\n                                } else {\r\n                                    this.informInstance(oldData.id);\r\n                                }\r\n                                resolve();\r\n                                const devices = [...this.state.devices];\r\n                                devices.splice(devices.indexOf(oldData), 1);\r\n                                this.setState({ ...this.state, devices });\r\n                            }, 600);\r\n                        })\r\n                    }}\r\n                />\r\n            </div>\r\n            {this.renderMessage()}\r\n            {this.getSelectIdDialog()}\r\n            {this.renderListOfDevices()}\r\n        </form>;\r\n    }\r\n}\r\n\r\nGoogleSmartNames.propTypes = {\r\n    common:      PropTypes.object.isRequired,\r\n    native:      PropTypes.object.isRequired,\r\n    instance:    PropTypes.number.isRequired,\r\n    adapterName: PropTypes.string.isRequired,\r\n    onError:     PropTypes.func,\r\n    onLoad:      PropTypes.func,\r\n    onChange:    PropTypes.func,\r\n    socket:      PropTypes.object.isRequired,\r\n    themeType:   PropTypes.string.isRequired,\r\n};\r\n\r\nexport const withMediaQuery = () => Component => props =>\r\n    <Component smallDisplay={useMediaQuery('(max-width:600px)')} {...props} />;\r\n\r\nexport default withStyles(styles)(withMediaQuery()(GoogleSmartNames));\r\n","import React from 'react';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport { MuiThemeProvider } from '@material-ui/core/styles';\r\n\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport GenericApp from '@iobroker/adapter-react/GenericApp';\r\nimport Loader from '@iobroker/adapter-react/Components/Loader'\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport TabOptions from './Tabs/Options';\r\nimport TabExtended from './Tabs/Extended';\r\nimport TabServices from './Tabs/Services';\r\nimport TabEnums from './Tabs/Enums';\r\nimport TabAlexaSmartNames from './Tabs/AlexaSmartNames';\r\nimport TabAlisaSmartNames from './Tabs/AlisaSmartNames';\r\nimport TabGoogleSmartNames from './Tabs/GoogleSmartNames';\r\n\r\nconst styles = theme => ({\r\n    root: {},\r\n    tabContent: {\r\n        padding: 10,\r\n        height: 'calc(100% - 64px - 48px - 20px)',\r\n        overflow: 'auto'\r\n    },\r\n    tabContentIFrame: {\r\n        padding: 10,\r\n        height: 'calc(100% - 64px - 48px - 20px - 38px)',\r\n        overflow: 'auto'\r\n    }\r\n});\r\n\r\nclass App extends GenericApp {\r\n    constructor(props) {\r\n        const extendedProps = {...props};\r\n        extendedProps.encryptedFields = ['pass'];\r\n        extendedProps.translations = {\r\n            'en': require('./i18n/en'),\r\n            'de': require('./i18n/de'),\r\n            'ru': require('./i18n/ru'),\r\n            'pt': require('./i18n/pt'),\r\n            'nl': require('./i18n/nl'),\r\n            'fr': require('./i18n/fr'),\r\n            'it': require('./i18n/it'),\r\n            'es': require('./i18n/es'),\r\n            'pl': require('./i18n/pl'),\r\n            'zh-cn': require('./i18n/zh-cn'),\r\n        };\r\n\r\n        super(props, extendedProps);\r\n    }\r\n\r\n    onConnectionReady() {\r\n        this.socket.getState(`${this.adapterName}.${this.instance}.info.ackTempPassword`)\r\n            .then(state => {\r\n                if (!state || !state.val) {\r\n                    this.setState({showAckTempPasswordDialog: true});\r\n                }\r\n            });\r\n    }\r\n\r\n    getSelectedTab() {\r\n        const tab = this.state.selectedTab;\r\n        if (!tab || tab === 'options') {\r\n            return 0;\r\n        } else\r\n        if (tab === 'enums') {\r\n            return 1;\r\n        } else\r\n        if (tab === 'alexa') {\r\n            return 2;\r\n        } else\r\n        if (tab === 'google') {\r\n            const offset = (this.state.native.amazonAlexa ? 1 : 0);\r\n            return 2 + offset;\r\n        } else\r\n        if (tab === 'alisa') {\r\n            const offset = (this.state.native.amazonAlexa ? 1 : 0) + (this.state.native.googleHome ? 1 : 0);\r\n            return 2 + offset;\r\n        } else\r\n        if (tab === 'extended') {\r\n            const offset = (this.state.native.amazonAlexa ? 1 : 0) + (this.state.native.googleHome ? 1 : 0) + (this.state.native.yandexAlisa ? 1 : 0);\r\n            return 2 + offset;\r\n        } else\r\n        if (tab === 'services') {\r\n            const offset = (this.state.native.amazonAlexa ? 1 : 0) + (this.state.native.googleHome ? 1 : 0) + (this.state.native.yandexAlisa ? 1 : 0);\r\n            return 3 + offset;\r\n        }\r\n    }\r\n\r\n    renderAckTempPasswordDialog() {\r\n        if (!this.state.showAckTempPasswordDialog) {\r\n            return null;\r\n        } else {\r\n            return <Dialog\r\n                open={true}\r\n                onClose={() => this.setState({showAckTempPasswordDialog: false}, () => setTimeout(() => this.setState({showAckTempPasswordDialog: true}), 1000))}\r\n                aria-labelledby=\"alert-dialog-title\"\r\n                aria-describedby=\"alert-dialog-description\"\r\n            >\r\n                <DialogTitle id=\"alert-dialog-title\">{I18n.t('Information: The skill linking process was changed!')}</DialogTitle>\r\n                <DialogContent>\r\n                    <DialogContentText id=\"alert-dialog-description\">\r\n                        {I18n.t('The linking process has been changed for a few months.')}\r\n                        {I18n.t('Now there is no temporary password that will be sent by email.')}<br/><br/>\r\n                        <b>{I18n.t('The password is equal with ioBroker.pro and with password that was entered here in the settings!')}</b>\r\n                    </DialogContentText>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button\r\n                        onClick={() => this.setState({showAckTempPasswordDialog: false}, () => setTimeout(() => this.setState({showAckTempPasswordDialog: true}), 1000))} autoFocus>\r\n                        {I18n.t('Not understood')}\r\n                    </Button>\r\n                    <Button onClick={() =>\r\n                        this.socket.setState(`${this.adapterName}.${this.instance}.info.ackTempPassword`, true, true)\r\n                            .then(() =>\r\n                                this.setState({showAckTempPasswordDialog: false}))\r\n                    } color=\"primary\" >\r\n                        {I18n.t('Roger that')}\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.loaded) {\r\n            return <MuiThemeProvider theme={this.state.theme}>\r\n                <Loader theme={this.state.themeType} />\r\n            </MuiThemeProvider>\r\n        }\r\n\r\n        return (\r\n            <MuiThemeProvider theme={this.state.theme}>\r\n                <div className=\"App\" style={{background: this.state.theme.palette.background.default, color: this.state.theme.palette.text.primary}}>\r\n                    <AppBar position=\"static\">\r\n                        <Tabs value={this.getSelectedTab()} onChange={(e, index) => this.selectTab(e.target.parentNode.dataset.name, index)} scrollButtons=\"auto\">\r\n                            <Tab label={I18n.t('Options')} data-name=\"options\" />\r\n                            <Tab label={I18n.t('Smart enums')} data-name=\"enums\" />\r\n                            {this.state.native.amazonAlexa && <Tab selected={this.state.selectedTab === 'alexa'} label={I18n.t('Alexa devices')} data-name=\"alexa\" />}\r\n                            {this.state.native.googleHome && <Tab selected={this.state.selectedTab === 'google'} label={I18n.t('Google devices')} data-name=\"google\" />}\r\n                            {this.state.native.yandexAlisa && <Tab selected={this.state.selectedTab === 'alisa'} label={I18n.t('Alisa devices')} data-name=\"alisa\" />}\r\n                            <Tab label={I18n.t('Extended options')} data-name=\"extended\" />\r\n                            <Tab label={I18n.t('Services and IFTTT')} data-name=\"services\" />\r\n                        </Tabs>\r\n                    </AppBar>\r\n\r\n                    <div className={this.isIFrame ? this.props.classes.tabContentIFrame : this.props.classes.tabContent}>\r\n                        {(this.state.selectedTab === 'options' || !this.state.selectedTab) && (<TabOptions\r\n                            key=\"options\"\r\n                            common={this.common}\r\n                            socket={this.socket}\r\n                            native={this.state.native}\r\n                            onError={text => this.setState({errorText: (text || text === 0) && typeof text !== 'string' ? text.toString() : text})}\r\n                            onLoad={native => this.onLoadConfig(native)}\r\n                            instance={this.instance}\r\n                            adapterName={this.adapterName}\r\n                            changed={this.state.changed}\r\n                            onChange={(attr, value, cb) => this.updateNativeValue(attr, value, cb)}\r\n                        />)}\r\n                        {this.state.selectedTab === 'enums' && (<TabEnums\r\n                            key=\"enums\"\r\n                            common={this.common}\r\n                            socket={this.socket}\r\n                            native={this.state.native}\r\n                            onError={text => this.setState({errorText: (text || text === 0) && typeof text !== 'string' ? text.toString() : text})}\r\n                            instance={this.instance}\r\n                            adapterName={this.adapterName}\r\n                        />)}\r\n                        {this.state.selectedTab === 'alexa' && (<TabAlexaSmartNames\r\n                            key=\"alexa\"\r\n                            themeType={this.state.themeType}\r\n                            common={this.common}\r\n                            socket={this.socket}\r\n                            native={this.state.native}\r\n                            onError={text => this.setState({errorText: (text || text === 0) && typeof text !== 'string' ? text.toString() : text})}\r\n                            adapterName={this.adapterName}\r\n                            instance={this.instance}\r\n                        />)}\r\n                            {this.state.selectedTab === 'google' && (<TabGoogleSmartNames\r\n                            key=\"google\"\r\n                            themeType={this.state.themeType}\r\n                            common={this.common}\r\n                            socket={this.socket}\r\n                            native={this.state.native}\r\n                            onError={text => this.setState({errorText: (text || text === 0) && typeof text !== 'string' ? text.toString() : text})}\r\n                            adapterName={this.adapterName}\r\n                            instance={this.instance}\r\n                        />)}\r\n                        {this.state.selectedTab === 'alisa' && (<TabAlisaSmartNames\r\n                            key=\"alisa\"\r\n                            themeType={this.state.themeType}\r\n                            common={this.common}\r\n                            socket={this.socket}\r\n                            native={this.state.native}\r\n                            onError={text => this.setState({errorText: (text || text === 0) && typeof text !== 'string' ? text.toString() : text})}\r\n                            adapterName={this.adapterName}\r\n                            instance={this.instance}\r\n                        />)}\r\n                        {this.state.selectedTab === 'extended' && (<TabExtended\r\n                            key=\"extended\"\r\n                            common={this.common}\r\n                            socket={this.socket}\r\n                            native={this.state.native}\r\n                            onError={text => this.setState({errorText: (text || text === 0) && typeof text !== 'string' ? text.toString() : text})}\r\n                            instance={this.instance}\r\n                            adapterName={this.adapterName}\r\n                            onChange={(attr, value) => this.updateNativeValue(attr, value)}\r\n                        />)}\r\n                        {this.state.selectedTab === 'services' && (<TabServices\r\n                            key=\"services\"\r\n                            common={this.common}\r\n                            socket={this.socket}\r\n                            native={this.state.native}\r\n                            onError={text => this.setState({errorText: (text || text === 0) && typeof text !== 'string' ? text.toString() : text})}\r\n                            instance={this.instance}\r\n                            adapterName={this.adapterName}\r\n                            onShowError={error => this.showError(error)}\r\n                            onChange={(attr, value) => this.updateNativeValue(attr, value)}\r\n                        />)}\r\n                    </div>\r\n                    {this.renderError()}\r\n                    {this.renderSaveCloseButtons()}\r\n                    {this.renderAckTempPasswordDialog()}\r\n                </div>\r\n            </MuiThemeProvider>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(App);\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport * as Sentry from '@sentry/browser';\r\nimport * as SentryIntegrations from '@sentry/integrations';\r\nimport { MuiThemeProvider} from '@material-ui/core/styles';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport {version} from '../package.json';\r\nimport theme from '@iobroker/adapter-react/Theme';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\n\r\nwindow.adapterName = 'iot';\r\nlet themeName = Utils.getThemeName();\r\n\r\n\r\nconsole.log('iobroker.' + window.adapterName + '@' + version + ' using theme \"' + themeName + '\"');\r\n\r\nfunction build() {\r\n    return ReactDOM.render(\r\n        <MuiThemeProvider theme={theme(themeName)}>\r\n            <App\r\n                onThemeChange={_theme => {\r\n                    themeName = _theme;\r\n                    build();\r\n                }}\r\n            />\r\n        </MuiThemeProvider>,\r\n        document.getElementById('root')\r\n    );\r\n}\r\n\r\nif (window.location.host !== 'localhost:3000') {\r\n    Sentry.init({\r\n        dsn: 'https://5ad729dbed504d15aa8bde423cae9a8e@sentry.iobroker.net/57',\r\n        release: 'iobroker.' + window.adapterName + '@' + version,\r\n        integrations: [\r\n            new SentryIntegrations.Dedupe()\r\n        ]\r\n    });\r\n}\r\n\r\nbuild();\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}