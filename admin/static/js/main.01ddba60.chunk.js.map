{"version":3,"sources":["Tabs/Logo.js","Tabs/Options.js","Tabs/Extended.js","Tabs/Services.js","Tabs/Enums.js","Tabs/AlexaSmartNames.js","Tabs/AlisaSmartNames.js","Tabs/GoogleSmartNames.js","App.js","serviceWorker.js","index.js"],"names":["Logo","Component","filename","obj","el","window","document","createElement","setAttribute","encodeURIComponent","JSON","stringify","style","display","body","appendChild","click","removeChild","handleFileSelect","evt","f","target","files","r","FileReader","onload","e","contents","result","json","parse","native","common","name","this","props","onError","I18n","t","onLoad","toString","readAsText","alert","download","_id","instance","news","titleLang","desc","generateFile","upload","input","addEventListener","render","icon","src","className","classes","logo","alt","readme","Fab","size","color","aria-label","buttons","onClick","open","focus","title","withStyles","theme","marginRight","marginTop","float","padding","width","Options","constructor","super","state","inAction","forceUserCreate","showHint","toast","isInstanceAlive","socket","getObject","adapterName","then","getState","setState","enabled","val","renderInput","attr","type","TextField","label","value","onChange","margin","renderCard","Card","card","CardActionArea","CardMedia","media","image","CardContent","Utils","renderTextWithA","CardActions","textAlign","Button","resetCerts","ack","Promise","resolve","setObject","catch","err","onForceUserCreate","renderToast","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","onClose","ContentProps","message","id","action","IconButton","key","close","renderHint","text","renderCheckbox","FormControlLabel","Object","assign","paddingTop","controlElement","control","Checkbox","checked","tab","errorText","column","columnSettings","googleHome","newVal","variant","button","disabled","fontWeight","columnLogo","minHeight","minWidth","maxWidth","height","verticalAlign","ExtendedOptions","showSelectId","renderSelect","options","FormControl","Select","Input","map","item","MenuItem","FormHelperText","getSelectIdDialog","prefix","connection","selected","statesOnly","onOk","marginLeft","marginBottom","Services","running","text2commandList","nightscoutList","addValue","onKeyChangedBound","onKeyChanged","bind","getAdapterInstances","list","nsList","replace","componentWillMount","subscribeState","componentWillUnmount","unsubscribeState","reissueUrlKey","showError","onChipsDelete","chips","split","filter","a","pos","indexOf","splice","join","onChipsAdd","push","calcNightscoutSecret","email","login","secret","nightscoutPass","renderChips","chipsDiv","onKeyUp","keyCode","trim","word","Chip","onDelete","chip","fullSize","readOnly","copyToClipboard","CopyContentImg","text2command","nightscout","normalSize","amazonAlexaBlood","border","borderRadius","Enums","editId","editedSmartName","funcs","rooms","changed","loading","onEnumUpdateBound","onEnumUpdate","getEnums","res","keys","forEach","match","subscribeObject","unsubscribeObject","removeChanged","updateObjInState","informInstance","sendTo","addChanged","i","length","onToggleEnum","find","smartName","getSmartNameFromObj","disableSmartName","noCommon","removeSmartName","setTimeout","onEdit","getLanguage","en","getObjectNameFromObj","language","renderEnum","enumLine","background","enumLineName","opacity","enumLineSubName","enumLineId","Switch","enumLineEnabled","enumLineEdit","fontSize","renderEnums","renderMessage","changeSmartName","startsWith","newObj","updateSmartName","undefined","renderEditDialog","Dialog","fullWidth","handleOk","aria-labelledby","aria-describedby","DialogTitle","DialogContent","helperText","DialogActions","autoFocus","CircularProgress","columnHeader","columnDiv","overflow","position","right","top","fontStyle","palette","primary","light","contrastText","actionsMapping","turnOn","IconOn","turnOff","setTargetTemperature","IconTemperature","incrementTargetTemperature","IconUp","decrementTargetTemperature","IconDown","setPercentage","IconPercentage","incrementPercentage","decrementPercentage","setColor","IconColor","setColorTemperature","IconBulb","incrementColorTemperature","decrementColorTemperature","getTargetTemperature","IconThermometer","getTemperatureReading","setLockState","IconLock","getLockState","SMARTTYPES","AlexaSmartNames","translated","editedSmartType","editObjectName","deleteId","showConfirmation","devices","browse","expanded","lastChanged","timerChanged","browseTimer","browseTimerCount","waitForUpdateID","onReadyUpdateBound","onReadyUpdate","onResultUpdateBound","onResultUpdate","isIndicate","Date","now","lastBrowse","console","log","clearTimeout","devTimer","cb","device","dev","additionalApplianceDetails","friendlyNames","friendlyName","group","smartType","onAskDelete","renderActions","actions","sort","b","Icon","actionIcon","onExpand","lineNum","renderSelectByOn","items","devSubLineByOn","devSubLineByOnSelect","onParamsChange","devSubLineTypeTitle","byON","renderSelectTypeSelector","renderSelectType","renderChannels","channels","names","types","byONs","smarttypes","smartTypes","c","chan","hasOwnProperty","devSubLine","devLineActions","channelLineActions","devSubLineName","devSubSubLineName","devSubLineDelete","renderDevice","nameModified","devModified","devCount","ch","error","devLine","devLineNumber","devLineExpand","Badge","badgeContent","devLineNameBlock","devLineName","devLineDescription","friendlyDescription","devLineProgress","devLineEdit","devLineDelete","preventDefault","editedId","onKeyDown","defaultValue","renderConfirmDialog","renderDevices","toLowerCase","placeholder","devLineEnabled","paddingLeft","left","devSubLineEdit","OnOff","Brightness","RGB","AlisaDevices","iobID","main","getId","func","toUpperCase","devSubSubLine","setId","devSubLineSetId","attributes","description","tableIcons","Add","forwardRef","ref","Check","Clear","Delete","DetailPanel","Edit","Export","Filter","FirstPage","LastPage","NextPage","PreviousPage","ResetSearch","Search","SortArrow","ThirdStateCheck","ViewColumn","GoogleSmartNames","myTableRef","React","createRef","columns","field","editable","cellStyle","wordBreak","lookup","editComponent","cols","rows","onGHParamsChange","newData","oldData","displayTraits","Array","isArray","ghTraits","ghType","displayAttributes","ghAttributes","conv2GH","ghConv2GH","displayConv2GH","conv2iob","ghConv2iob","displayConv2iob","flex","tableRef","onRowClick","rowData","current","onTreeExpandChanged","tableData","path","parentChildData","row","element","parentId","data","icons","isLoading","actionsColumnIndex","paging","rowStyle","smartEnum","ioType","selectedRow","backgroundColor","onRowUpdate","nicknames","onRowDelete","App","GenericApp","extendedProps","encryptedFields","translations","require","port","parseInt","location","isNaN","protocol","getSelectedTab","selectedTab","amazonAlexa","yandexAlisa","loaded","AppBar","Tabs","index","selectTab","parentNode","dataset","Tab","data-name","isIFrame","tabContentIFrame","tabContent","onLoadConfig","updateNativeValue","onShowError","renderError","renderSaveCloseButtons","themeType","root","Boolean","hostname","build","ReactDOM","createTheme","onThemeChange","_theme","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.01ddba60.chunk.js","sourcesContent":["import React, {Component} from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport Fab from '@material-ui/core/Fab';\nimport PropTypes from 'prop-types';\n\nimport I18n from '@iobroker/adapter-react/i18n';\n\nimport {MdHelpOutline as IconHelp} from 'react-icons/md';\nimport {FaFileDownload as IconDownload} from 'react-icons/fa';\nimport {FaFileUpload as IconUpload} from 'react-icons/fa';\n\nconst styles = theme => ({\n    buttons: {\n        marginRight: 5,\n        marginTop: 5,\n        float: 'right'\n    },\n    logo: {\n        padding: 8,\n        width: 64\n    }\n});\n\nclass Logo extends Component {\n\n    static generateFile(filename, obj) {\n        const el = window.document.createElement('a');\n        el.setAttribute('href', 'data:application/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(obj, null, 2)));\n        el.setAttribute('download', filename);\n\n        el.style.display = 'none';\n        window.document.body.appendChild(el);\n\n        el.click();\n\n        window.document.body.removeChild(el);\n    }\n\n    handleFileSelect(evt) {\n        const f = evt.target.files[0];\n        if (f) {\n            const r = new window.FileReader();\n            r.onload = e => {\n                const contents = e.target.result;\n                try {\n                    const json = JSON.parse(contents);\n                    if (json.native && json.common) {\n                        if (json.common.name !== this.props.common.name) {\n                            this.props.onError(I18n.t('otherConfig', json.common.name));\n                        } else {\n                            this.props.onLoad(json.native);\n                        }\n                    } else {\n                        this.props.onError(I18n.t('invalidConfig'));\n                    }\n                } catch (e) {\n                    this.props.onError(e.toString());\n                }\n            };\n            r.readAsText(f);\n        } else {\n            alert('Failed to open JSON File');\n        }\n    }\n\n    download() {\n        const result = {\n            _id: 'system.adapter.' + this.props.common.name + '.' + this.props.instance,\n            common: JSON.parse(JSON.stringify(this.props.common)),\n            native: this.props.native\n        };\n        // remove unimportant information\n        if (result.common.news) {\n            delete result.common.news;\n        }\n        if (result.common.titleLang) {\n            delete result.common.titleLang;\n        }\n        if (result.common.desc) {\n            delete result.common.desc;\n        }\n\n        //window.open('data:application/iobroker; content-disposition=attachment; filename=' + result._id + '.json,' + JSON.stringify(result, null, 2));\n        Logo.generateFile(result._id + '.json', result);\n    }\n\n    upload() {\n        const input = window.document.createElement('input');\n        input.setAttribute('type', 'file');\n        input.setAttribute('id', 'files');\n        input.setAttribute('opacity', 0);\n        input.addEventListener('change', e => this.handleFileSelect(e, () => {}), false);\n        (input.click)();\n    }\n\n    render() {\n        return (<div>\n            {this.props.common.icon && (<img src={this.props.common.icon} className={this.props.classes.logo} alt=\"logo\"/>)}\n            {this.props.common.readme &&\n                (<Fab size=\"small\" color=\"primary\" aria-label=\"Help\" className={this.props.classes.buttons} onClick={() => {\n                    const win = window.open(this.props.common.readme, '_blank');\n                    win.focus();\n                }}><IconHelp /></Fab>)}\n            <Fab size=\"small\" color=\"primary\" aria-label=\"Load config\" className={this.props.classes.buttons} title={I18n.t('Load configuration from file')} onClick={() => this.upload()}><IconUpload /></Fab>\n            <Fab size=\"small\" color=\"primary\" aria-label=\"Save config\" className={this.props.classes.buttons} title={I18n.t('Save configuration to file')} onClick={() => this.download()}><IconDownload /></Fab>\n        </div>);\n    }\n}\n\nLogo.propTypes = {\n    common: PropTypes.object.isRequired,\n    native: PropTypes.object.isRequired,\n    instance: PropTypes.number.isRequired,\n    onError: PropTypes.func,\n    onLoad: PropTypes.func,\n};\n\nexport default withStyles(styles)(Logo);\n","import React, {Component} from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Utils from '@iobroker/adapter-react/Components/Utils'\n\nimport {MdRefresh as IconReload} from 'react-icons/md';\nimport {MdClose as IconClose} from 'react-icons/md';\n\nimport I18n from '@iobroker/adapter-react/i18n';\nimport Logo from './Logo';\nimport Message from '@iobroker/adapter-react/Dialogs/Message';\n\nconst styles = theme => ({\n    tab: {\n        width: '100%',\n        minHeight: '100%'\n    },\n    input: {\n        minWidth: 300\n    },\n    button: {\n        marginRight: 20,\n    },\n    card: {\n        maxWidth: 345,\n        textAlign: 'center'\n    },\n    media: {\n        height: 180,\n    },\n    column: {\n        display: 'inline-block',\n        verticalAlign: 'top',\n        marginRight: 20\n    },\n    columnLogo: {\n        width: 350,\n        marginRight: 0\n    },\n    columnSettings: {\n        width: 'calc(100% - 370px)',\n    }\n});\n\nclass Options extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            inAction: false,\n            forceUserCreate: false,\n            showHint: false,\n            toast: '',\n            isInstanceAlive: false,\n        };\n\n        this.props.socket.getObject(`system.adapter.${this.props.adapterName}.${this.props.instance}`).then(obj =>\n            this.props.socket.getState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`).then(state =>\n                this.setState({isInstanceAlive: obj && obj.common && obj.common.enabled && state && state.val})));\n\n    }\n\n    renderInput(title, attr, type) {\n        return (<TextField\n            label={I18n.t(title)}\n            className={this.props.classes.input}\n            value={this.props.native[attr]}\n            type={type || 'text'}\n            onChange={e => this.props.onChange(attr, e.target.value)}\n            margin=\"normal\"\n        />);\n    }\n\n    renderCard() {\n        return (<Card className={this.props.classes.card}>\n            <CardActionArea>\n                <CardMedia\n                    className={this.props.classes.media}\n                    image=\"alexalogo.png\"\n                    title=\"Alexa logo\"\n                />\n                <CardContent>{Utils.renderTextWithA(I18n.t('amazon link'))}</CardContent>\n            </CardActionArea>\n            <CardActions style={{textAlign: 'center'}} >\n                <Button size=\"small\" color=\"primary\" style={{textAlign: 'center'}} onClick={() => {\n                    const win = window.open('http://alexa.amazon.de/spa/index.html#skills/dp/B07L66BFF9/reviews', '_blank');\n                    win.focus();\n                }}>{I18n.t('Review')}</Button>\n            </CardActions>\n        </Card>);\n    }\n\n    resetCerts() {\n        this.setState({inAction: true});\n        this.props.socket.setState('iot.' + this.props.instance + '.certs.private', {val: '', ack: true})\n            .then(() => this.props.socket.setState('iot.' + this.props.instance + '.certs.id', {val: '', ack: true}))\n            .then(() => this.props.socket.setState('iot.' + this.props.instance + '.certs.public', {val: '', ack: true}))\n            .then(() => this.props.socket.setState('iot.' + this.props.instance + '.certs.certificate', {val: '', ack: true}))\n            .then(() => {\n                if (this.state.forceUserCreate) {\n                    return this.props.socket.setState('iot.' + this.props.instance + '.certs.forceUserCreate', {val: true, ack: true});\n                } else {\n                    return Promise.resolve();\n                }\n            })\n            // read actual instance object\n            .then(() => this.props.socket.getObject('system.adapter.iot.' + this.props.instance))\n            .then(obj => {\n                if (!obj || !obj.common || !obj.common.enabled) {\n                    // adapter is disabled, do not restart it\n                    return Promise.resolve();\n                } else {\n                    // restart adapter\n                    return this.props.socket.setObject('system.adapter.iot.' + this.props.instance, obj);\n                }\n            })\n            .then(() => this.setState({toast: I18n.t('Certificates will be updated after start')}))\n            .catch(err => this.props.onError(err))\n            .then(() => this.setState({inAction: false}));\n    }\n\n    onForceUserCreate() {\n        this.setState({forceUserCreate: !this.state.forceUserCreate, showHint: !this.state.forceUserCreate});\n    }\n\n    renderToast() {\n        if (!this.state.toast) return null;\n        return (\n            <Snackbar\n                anchorOrigin={{\n                    vertical: 'bottom',\n                    horizontal: 'left',\n                }}\n                open={true}\n                autoHideDuration={6000}\n                onClose={() => this.setState({toast: ''})}\n                ContentProps={{\n                    'aria-describedby': 'message-id',\n                }}\n                message={<span id=\"message-id\">{this.state.toast}</span>}\n                action={[\n                    <IconButton\n                        key=\"close\"\n                        aria-label=\"Close\"\n                        color=\"inherit\"\n                        className={this.props.classes.close}\n                        onClick={() => this.setState({toast: ''})}\n                    >\n                        <IconClose />\n                    </IconButton>,\n                ]}\n            />);\n    }\n\n    renderHint() {\n        if (this.state.showHint) {\n            return (<Message text={I18n.t('Click now Get new connection certificates to request new temporary password')} onClose={() => this.setState({showHint: false})}/>);\n        } else {\n            return null;\n        }\n    }\n\n    renderCheckbox(title, attr, style) {\n        return (<FormControlLabel key={attr} style={Object.assign({paddingTop: 5}, style)} className={this.props.classes.controlElement}\n              control={\n                  <Checkbox\n                      checked={this.props.native[attr]}\n                      onChange={() => this.props.onChange(attr, !this.props.native[attr])}\n                      color=\"primary\"\n                  />\n              }\n              label={I18n.t(title)}\n        />);\n    }\n\n    render() {\n        return (\n            <form className={this.props.classes.tab}>\n                <Logo\n                    instance={this.props.instance}\n                    common={this.props.common}\n                    native={this.props.native}\n                    onError={text => this.setState({errorText: text})}\n                    onLoad={this.props.onLoad}\n                />\n                <div className={this.props.classes.column + ' ' + this.props.classes.columnSettings}>\n                    {this.renderInput('ioBroker.pro Login', 'login')}<br/>\n                    {this.renderInput('ioBroker.pro Password', 'pass', 'password')}<br/>\n                    {this.renderCheckbox('Amazon Alexa', 'amazonAlexa', {marginTop: 10})}<br/>\n                    <FormControlLabel key=\"googleHome\" style={{paddingTop: 5}} className={this.props.classes.controlElement}\n                        control={\n                          <Checkbox\n                              checked={this.props.native.googleHome}\n                              onChange={() => {\n                                  // activate alexa if google home is on (temporary)\n                                  const newVal = !this.props.native.googleHome;\n                                  this.props.onChange('googleHome', newVal, () =>\n                                      newVal && this.props.onChange('amazonAlexa', true));\n                              }}\n                              color=\"primary\"\n                          />\n                        }\n                        label={I18n.t('Google Home')}\n                    />\n                    {/*this.renderCheckbox('Google Home', 'googleHome', {marginTop: 10})*/}<br/>\n                    {this.renderCheckbox('Yandex ', 'yandexAlisa', {marginTop: 10})}<br/>\n                    <br/>\n                    <Button variant=\"outlined\"\n                            className={this.props.classes.button}\n                            disabled={this.state.inAction || !this.state.isInstanceAlive}\n                            title={!this.state.isInstanceAlive ? I18n.t('Instance must be enabled') : ''}\n                            onClick={() => this.resetCerts()}>\n                        <IconReload/>{I18n.t('Get new connection certificates')}\n                    </Button>\n                    <FormControlLabel\n                        control={\n                            <Checkbox\n                                checked={this.state.forceUserCreate}\n                                onChange={() => this.onForceUserCreate()}\n                                color=\"primary\"\n                            />\n                        }\n                        label={I18n.t('Request email with password one more time')}\n                    />\n                    <p style={{fontWeight: 'bold'}}>{Utils.renderTextWithA(I18n.t('help_tip'))}</p>\n                    <p style={{fontWeight: 'bold', paddingTop: 20}}>{Utils.renderTextWithA(I18n.t('help_link_tip1'))}</p>\n                    <p style={{fontWeight: 'bold'}}>{Utils.renderTextWithA(I18n.t('help_link_tip2'))}</p>\n                    <p style={{fontWeight: 'bold', color: 'red'}}>{Utils.renderTextWithA(I18n.t('help_link_tip3'))}</p>\n                </div>\n                <div className={this.props.classes.column + ' ' + this.props.classes.columnLogo}>{this.renderCard()}</div>\n                {this.renderHint()}\n                {this.renderToast()}\n            </form>\n        );\n    }\n}\n\nOptions.propTypes = {\n    common: PropTypes.object.isRequired,\n    native: PropTypes.object.isRequired,\n    instance: PropTypes.number.isRequired,\n    adapterName: PropTypes.string.isRequired,\n    onError: PropTypes.func,\n    onLoad: PropTypes.func,\n    onChange: PropTypes.func,\n    socket: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Options);\n","import React, {Component} from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Input from '@material-ui/core/Input';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Fab from '@material-ui/core/Fab';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\n\nimport {MdAdd as IconAdd} from 'react-icons/md';\n\nimport I18n from '@iobroker/adapter-react/i18n';\nimport DialogSelectID from '@iobroker/adapter-react/Dialogs/SelectID';\nimport Utils from '@iobroker/adapter-react/Components/Utils'\n\nconst styles = theme => ({\n    tab: {\n        width: '100%',\n        minHeight: '100%'\n    },\n    input: {\n        marginTop: 0,\n        minWidth: 400\n    },\n    button: {\n        marginRight: 20,\n    },\n    card: {\n        maxWidth: 345,\n        textAlign: 'center'\n    },\n    media: {\n        height: 180,\n    },\n    column: {\n        display: 'inline-block',\n        verticalAlign: 'top',\n        marginRight: 20\n    },\n    columnLogo: {\n        width: 350,\n        marginRight: 0\n    },\n    columnSettings: {\n        width: 'calc(100% - 370px)',\n    },\n    controlElement: {\n        //background: '#d2d2d2',\n        marginBottom: 5\n    }\n});\n\nclass ExtendedOptions extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            showSelectId: false,\n        };\n\n    }\n    \n    renderInput(title, attr, type) {\n        return (<TextField\n            label={I18n.t(title)}\n            className={this.props.classes.input + ' ' + this.props.classes.controlElement}\n            value={this.props.native[attr]}\n            type={type || 'text'}\n            onChange={e => this.props.onChange(attr, e.target.value)}\n            margin=\"normal\"\n        />);\n    }\n\n    renderSelect(title, attr, options, style) {\n        return (<FormControl className={this.props.classes.input + ' ' + this.props.classes.controlElement} style={Object.assign({paddingTop: 5}, style)}>\n            <Select\n                value={this.props.native[attr] || '_'}\n                onChange={e => this.props.onChange(attr, e.target.value === '_' ? '' : e.target.value)}\n                input={<Input name={attr} id={attr + '-helper'} />}\n            >\n                {options.map(item => (<MenuItem key={'key-' + item.value} value={item.value || '_'}>{I18n.t(item.title)}</MenuItem>))}\n            </Select>\n            <FormHelperText>{I18n.t(title)}</FormHelperText>\n        </FormControl>);\n    }\n\n    renderCheckbox(title, attr, style) {\n        return (<FormControlLabel key={attr} style={Object.assign({paddingTop: 5}, style)} className={this.props.classes.controlElement}\n            control={\n                <Checkbox\n                    checked={this.props.native[attr]}\n                    onChange={() => this.props.onChange(attr, !this.props.native[attr])}\n                    color=\"primary\"\n                />\n            }\n            label={I18n.t(title)}\n        />);\n    }\n\n    getSelectIdDialog(attr) {\n        if (this.state.showSelectId) {\n            return (<DialogSelectID\n                key=\"dialogSelectID2\"\n                prefix={'../..'}\n                connection={this.props.socket}\n                selected={this.props.native[attr]}\n                statesOnly={true}\n                onClose={() => this.setState({showSelectId: false})}\n                onOk={selected => {\n                    this.setState({showSelectId: false});\n                    this.props.onChange(attr, selected);\n                }}\n            />);\n        } else {\n            return null;\n        }\n    }\n\n    render() {\n        return (\n            <form className={this.props.classes.tab}>\n                {this.renderInput('Cloud URL', 'cloudUrl')}<br/>\n                {this.renderSelect('Language', 'language', [\n                    {title: 'default', value: ''},\n                    {title: 'english', value: 'en'},\n                    {title: 'Deutsch', value: 'de'},\n                    {title: '', value: 'ru'}\n                ], {marginTop: 10})}<br/>\n                {this.renderCheckbox('Place function in names first', 'functionFirst', {marginTop: 10})}<br/>\n                {this.renderInput('Concatenate words with', 'concatWord')}<br/>\n                {this.renderInput('Replace in names', 'replaces')}<br/>\n                <div className={this.props.classes.controlElement} style={{marginTop: 15}}>\n                    {this.renderInput('OFF level for switches in %', 'deviceOffLevel')}\n                    <FormHelperText>{I18n.t('(Set to 0 if behavior not desired)')}</FormHelperText>\n                </div>\n                <div className={this.props.classes.controlElement}>\n                    {this.renderInput('Write response to', 'responseOID')}\n                    <Fab size=\"small\" color=\"secondary\" onClick={() => this.setState({showSelectId: true})} aria-label=\"Add\" style={{marginLeft: 5, marginTop: 10}}><IconAdd /></Fab><br/>\n                </div>\n                <div className={this.props.classes.controlElement}>\n                    {this.renderCheckbox('Personal settings (only pro)', 'noCommon')}\n                    <FormHelperText>{Utils.renderTextWithA(I18n.t('help_tip'))}</FormHelperText><br/>\n                </div>\n                {this.renderCheckbox('Debug outputs', 'debug')}\n                {this.getSelectIdDialog('responseOID')}\n            </form>\n        );\n    }\n}\n\nExtendedOptions.propTypes = {\n    common: PropTypes.object.isRequired,\n    native: PropTypes.object.isRequired,\n    instance: PropTypes.number.isRequired,\n    onError: PropTypes.func,\n    onLoad: PropTypes.func,\n    onChange: PropTypes.func,\n    socket: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(ExtendedOptions);\n","import React, {Component} from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Input from '@material-ui/core/Input';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Fab from '@material-ui/core/Fab';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Chip from '@material-ui/core/Chip';\nimport {MdRefresh as IconRefresh} from 'react-icons/md';\nimport {MdClose as IconClose} from 'react-icons/md';\nimport {MdAdd as IconAdd} from 'react-icons/md';\n\nimport CopyContentImg from '@iobroker/adapter-react/assets/copy-content.svg';\nimport I18n from '@iobroker/adapter-react/i18n';\nimport Utils from '@iobroker/adapter-react/Components/Utils';\nimport DialogSelectID from \"@iobroker/adapter-react/Dialogs/SelectID\";\n\nconst styles = theme => ({\n    tab: {\n        width: '100%',\n        minHeight: '100%'\n    },\n    input: {\n        marginTop: 0,\n        minWidth: 400\n    },\n    fullSize: {\n        width: 'calc(100% - 64px)'\n    },\n    normalSize: {\n        width: 'calc(30% - 64px)',\n        marginLeft: 10\n    },\n    button: {\n        marginRight: 20,\n    },\n    card: {\n        maxWidth: 345,\n        textAlign: 'center'\n    },\n    media: {\n        height: 180,\n    },\n    column: {\n        display: 'inline-block',\n        verticalAlign: 'top',\n        marginRight: 20\n    },\n    columnLogo: {\n        width: 350,\n        marginRight: 0\n    },\n    columnSettings: {\n        width: 'calc(100% - 370px)',\n    },\n    controlElement: {\n        //background: '#d2d2d2',\n        marginBottom: 5\n    },\n    chips: {\n        border: '1px solid #DDD',\n        borderRadius: 1,\n        width: 'calc(100% - 250px)',\n        display: 'inline-block',\n        padding: 5,\n        minHeight: 32,\n        marginLeft: 10,\n        marginTop: 20\n    },\n    chip: {\n        marginRight: 5\n    }\n});\n\nclass Services extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            running: false,\n            toast: '',\n            showSelectId: false,\n            text2commandList: [],\n            nightscoutList: [],\n            addValue: '',\n            isInstanceAlive: false\n        };\n        this.onKeyChangedBound = this.onKeyChanged.bind(this);\n\n        this.props.socket.getAdapterInstances('text2command')\n            .then(list =>\n                this.props.socket.getAdapterInstances('nightscout')\n                    .then(nsList => this.setState({\n                        nightscoutList: nsList.map(obj => obj._id.replace('system.adapter.nightscout.', '')),\n                        text2commandList: list.map(obj => obj._id.replace('system.adapter.text2command.', ''))\n                    })));\n    }\n\n    componentWillMount() {\n        this.props.socket.subscribeState('iot.' + this.props.instance + '.certs.urlKey', this.onKeyChangedBound);\n\n        this.props.socket.getObject(`system.adapter.${this.props.adapterName}.${this.props.instance}`).then(obj =>\n            this.props.socket.getState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`).then(state =>\n                this.setState({isInstanceAlive: obj && obj.common && obj.common.enabled && state && state.val})));\n    }\n\n    componentWillUnmount() {\n        this.props.socket.unsubscribeState('iot.' + this.props.instance + '.certs.urlKey', this.onKeyChangedBound);\n    }\n\n    onKeyChanged(id, state) {\n        state && this.setState({key: state.val});\n    }\n\n    renderInput(title, attr, type) {\n        return (<TextField\n            label={I18n.t(title)}\n            className={this.props.classes.input + ' ' + this.props.classes.controlElement}\n            value={this.props.native[attr]}\n            type={type || 'text'}\n            onChange={e => this.props.onChange(attr, e.target.value)}\n            margin=\"normal\"\n        />);\n    }\n\n    reissueUrlKey() {\n        this.setState({running: true});\n        return this.props.socket.setState('iot.' + this.props.instance + '.certs.urlKey', {val: '', ack: true})\n            .then(() => this.props.socket.getObject('system.adapter.iot.' + this.props.instance))\n            .then(obj => {\n                if (!obj || !obj.common || !obj.common.enabled) {\n                    this.setState({running: false, toast: I18n.t('Key will be updated after start')});\n                } else {\n                    return this.props.socket.setObject('system.adapter.iot.' + this.props.instance, obj);\n                }\n            })\n            .then(() => this.setState({running: false, toast: I18n.t('Certificates will be updated after initiated restart')}))\n            .catch(err => {\n                this.setState({running: false});\n                this.props.showError(err);\n            });\n    }\n\n    renderToast() {\n        if (!this.state.toast) return null;\n        return (\n            <Snackbar\n                anchorOrigin={{\n                    vertical: 'bottom',\n                    horizontal: 'left',\n                }}\n                open={true}\n                autoHideDuration={6000}\n                onClose={() => this.setState({toast: ''})}\n                ContentProps={{\n                    'aria-describedby': 'message-id',\n                }}\n                message={<span id=\"message-id\">{this.state.toast}</span>}\n                action={[\n                    <IconButton\n                        key=\"close\"\n                        aria-label=\"Close\"\n                        color=\"inherit\"\n                        className={this.props.classes.close}\n                        onClick={() => this.setState({toast: ''})}\n                    >\n                        <IconClose />\n                    </IconButton>,\n                ]}\n            />);\n    }\n\n    onChipsDelete(attr, value) {\n        const chips = (this.props.native[attr] || '').split(/[,;\\s]/).filter(a => !!a);\n        const pos = chips.indexOf(value);\n        if (pos !== -1) {\n            chips.splice(pos, 1);\n            this.props.onChange(attr, chips.join(' '));\n        }\n    }\n\n    onChipsAdd(attr) {\n        const chips = (this.props.native[attr] || '').split(/[,;\\s]/).filter(a => !!a);\n        const pos = chips.indexOf(this.state.addValue);\n        if (pos === -1) {\n            chips.push(this.state.addValue);\n            this.setState({addValue: ''}, () => this.props.onChange(attr, chips.join(' ')));\n        }\n    }\n\n    calcNightscoutSecret() {\n        const email = this.props.native.login.replace(/[^\\w\\d-_]/g, '_');\n        const secret = this.props.native.nightscoutPass;\n        return email + (secret ? '-' + secret : '');\n    }\n\n    getSelectIdDialog(attr) {\n        if (this.state.showSelectId) {\n            return (<DialogSelectID\n                key=\"dialogSelectID3\"\n                prefix={'../..'}\n                connection={this.props.socket}\n                selected={this.props.native[attr]}\n                statesOnly={true}\n                onClose={() => this.setState({showSelectId: false})}\n                onOk={selected => {\n                    this.setState({showSelectId: false});\n                    this.props.onChange(attr, selected);\n                }}\n            />);\n        } else {\n            return null;\n        }\n    }\n\n    renderChips(label, attr) {\n        return (<div className={this.props.classes.chipsDiv}>\n            <FormHelperText>{Utils.renderTextWithA(I18n.t(label))}</FormHelperText>\n            <TextField\n                label={I18n.t('Add service')}\n                style={{width: 150}}\n                type={'text'}\n                value={this.state.addValue}\n                onKeyUp={e => e.keyCode === 13 && this.onChipsAdd(attr)}\n                onChange={e => this.setState({addValue: e.target.value.trim()})}\n                margin=\"normal\"\n            />\n\n            <Fab size=\"small\" color=\"secondary\" disabled={!this.state.addValue} onClick={() => this.onChipsAdd(attr)} style={{marginLeft: 5, marginTop: -15}}><IconAdd /></Fab>\n\n            <div className={this.props.classes.chips}>\n                {(this.props.native[attr] || '').split(/[,;\\s]/).filter(a => !!a)\n                .map(word =>\n                    (<Chip\n                        key={word}\n                        size=\"small\"\n                        label={word}\n                        onDelete={() => this.onChipsDelete(attr, word)}\n                        className={this.props.classes.chip}\n                    />))}\n            </div>\n        </div>);\n    }\n\n    render() {\n        return (\n            <form className={this.props.classes.tab}>\n                <Button\n                    variant=\"outlined\"\n                    disabled={!this.state.isInstanceAlive || this.state.running}\n                    color=\"primary\"\n                    title={!this.state.isInstanceAlive ? I18n.t('Instance must be enabled') : ''}\n                    onClick={() => this.reissueUrlKey()}>\n                    <IconRefresh />{I18n.t('Get new service URL key')}\n                </Button><br/>\n\n                {this.renderInput('IFTTT key', 'iftttKey')}<br/>\n\n                <TextField\n                    style={{marginTop: 10}}\n                    label={I18n.t('Use following link for IFTTT')}\n                    className={this.props.classes.input + ' ' + this.props.classes.controlElement + ' ' + this.props.classes.fullSize}\n                    value={`https://service.iobroker.in/v1/iotService?service=ifttt&key=${this.state.key}&user=${encodeURIComponent(this.props.native.login)}`}\n                    type=\"text\"\n                    readOnly={true}\n                    margin=\"normal\"\n                />\n                <Fab size=\"small\" style={{marginTop: 10, marginLeft: 5}} onClick={() => Utils.copyToClipboard(`https://service.iobroker.in/v1/iotService?service=ifttt&key=${this.state.key}&user=${encodeURIComponent(this.props.native.login)}`)} ><img src={CopyContentImg} alt=\"Copy\" /></Fab><br/>\n                <br/>\n\n                {this.renderChips('White list for services', 'allowedServices')}<br/>\n\n                <TextField\n                    style={{marginTop: 10}}\n                    label={I18n.t('Use following link for custom service')}\n                    className={this.props.classes.input + ' ' + this.props.classes.controlElement + ' ' + this.props.classes.fullSize}\n                    value={`https://service.iobroker.in/v1/iotService?service=custom_<SERVICE_NAME>&key=${this.state.key}&user=${encodeURIComponent(this.props.native.login)}&data=<SOME_TEXT>`}\n                    type=\"text\"\n                    readOnly={true}\n                    margin=\"normal\"\n                />\n                <Fab size=\"small\" style={{marginTop: 10, marginLeft: 5}} onClick={() => Utils.copyToClipboard(`https://service.iobroker.in/v1/iotService?service=custom_<SERVICE_NAME>&key=${this.state.key}&user=${encodeURIComponent(this.props.native.login)}&data=<SOME_TEXT>`)}><img src={CopyContentImg} alt=\"Copy\" /></Fab><br/>\n\n                <FormControl className={this.props.classes.input + ' ' + this.props.classes.controlElement} style={{paddingTop: 20}}>\n                    <Select\n                        value={this.props.native.text2command || '_'}\n                        onChange={e => this.props.onChange('text2command', e.target.value === '_' ? '' : e.target.value)}\n                        input={<Input name=\"text2command\" id=\"text2command-helper\" />}\n                    >\n                        <MenuItem key=\"key-default\" value={'_'}>{I18n.t('disabled')}</MenuItem>\n                        {this.state.text2commandList.map(item => (<MenuItem key={'key-' + item} value={item}>text2command.{item}</MenuItem>))}\n                    </Select>\n                    <FormHelperText>{I18n.t('Use text2command instance')}</FormHelperText>\n                </FormControl>\n                <br/>\n                <FormControl className={this.props.classes.input + ' ' + this.props.classes.controlElement} style={{paddingTop: 20}}>\n                    <Select\n                        value={this.props.native.nightscout || '_'}\n                        onChange={e => this.props.onChange('nightscout', e.target.value === '_' ? '' : e.target.value)}\n                        input={<Input name=\"nightscout\" id=\"nightscout-helper\" />}\n                    >\n                        <MenuItem key=\"key-default\" value={'_'}>{I18n.t('disabled')}</MenuItem>\n                        {this.state.nightscoutList.map(item => (<MenuItem key={'key-' + item} value={item}>nightscout.{item}</MenuItem>))}\n                    </Select>\n                    <FormHelperText>{I18n.t('Use Nightscout instance')}</FormHelperText>\n                </FormControl>\n                {this.props.native.nightscout ? (<TextField\n                    style={{marginTop: 3.5}}\n                    label={I18n.t('Nightscout password')}\n                    onChange={e => this.props.onChange('nightscoutPass', e.target.value.replace(/[^\\w\\d-_]/g, '_'))}\n                    className={this.props.classes.input + ' ' + this.props.classes.controlElement + ' ' + this.props.classes.normalSize}\n                    value={this.props.native.nightscoutPass}\n                    type=\"text\"\n                    margin=\"normal\"\n                />) : null}\n                <br/>\n                <br/>\n                <div className={this.props.classes.controlElement}>\n                    <TextField\n                        label={I18n.t('Read blood sugar from')}\n                        className={this.props.classes.input + ' ' + this.props.classes.controlElement}\n                        value={this.props.native.amazonAlexaBlood || ''}\n                        type=\"text\"\n                        onChange={e => this.props.onChange('amazonAlexaBlood', e.target.value)}\n                        margin=\"normal\"\n                    />\n                    <Fab size=\"small\" color=\"secondary\" onClick={() => this.setState({showSelectId: true})} aria-label=\"Add\" style={{marginLeft: 5, marginTop: 10}}><IconAdd /></Fab><br/>\n                </div>\n                <br/>\n                {this.renderToast()}\n                {this.getSelectIdDialog('amazonAlexaBlood')}\n            </form>\n        );\n    }\n}\n\nServices.propTypes = {\n    common: PropTypes.object.isRequired,\n    native: PropTypes.object.isRequired,\n    instance: PropTypes.number.isRequired,\n    adapterName: PropTypes.string.isRequired,\n    onError: PropTypes.func,\n    onLoad: PropTypes.func,\n    onChange: PropTypes.func,\n    socket: PropTypes.object.isRequired,\n    onShowError: PropTypes.func,\n};\n\nexport default withStyles(styles)(Services);\n","import React, {Component} from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Switch from '@material-ui/core/Switch';\nimport {MdEdit as IconEdit} from 'react-icons/md';\n\nimport Utils from '@iobroker/adapter-react/Components/Utils'\nimport I18n from '@iobroker/adapter-react/i18n';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Dialog from '@material-ui/core/Dialog';\nimport MessageDialog from '@iobroker/adapter-react/Dialogs/Message';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst CHANGED_COLOR = '#e7000040';\n\nconst styles = theme => ({\n    tab: {\n        width: '100%',\n        height: '100%'\n    },\n    column: {\n        display: 'inline-block',\n        verticalAlign: 'top',\n        marginRight: 20,\n        height: '100%',\n        overflow: 'hidden',\n        width: 'calc(50% - 20px)',\n        minWidth: 300,\n        maxWidth: 450\n    },\n    columnDiv: {\n        height: 'calc(100% - 60px)',\n        overflow: 'auto',\n        minWidth: 300\n    },\n    enumLineEnabled: {\n        position: 'absolute',\n        right: 0,\n        top: 0,\n    },\n    enumLineEdit: {\n        //float: 'right'\n        position: 'absolute',\n        top: 5,\n        right: 50\n    },\n    enumLineName: {\n\n    },\n    enumLineSubName:{\n        fontStyle: 'italic',\n    },\n    enumLine: {\n        height: 48,\n        width: '100%',\n        position: 'relative'\n    },\n    enumLineId: {\n        display: 'block',\n        fontStyle: 'italic',\n        fontSize: 12\n    },\n    columnHeader: {\n        background: theme.palette.primary.light,\n        padding: 10,\n        color: theme.palette.primary.contrastText\n    }\n});\n\nclass Enums extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            inAction: false,\n            editId: '',\n            editedSmartName: '',\n            funcs: [],\n            rooms: [],\n            changed: [],\n            message: '',\n            loading: true,\n        };\n\n        this.onEnumUpdateBound = this.onEnumUpdate.bind(this);\n\n        this.props.socket.getEnums()\n            .then(res => {\n                const funcs = [];\n                const rooms = [];\n                Object.keys(res).forEach(id => {\n                    if (id.match(/^enum\\.rooms\\./)) {\n                        rooms.push(res[id]);\n                    } else\n                    if (id.match(/^enum\\.functions\\./)) {\n                        funcs.push(res[id]);\n                    }\n                });\n\n                this.setState({funcs, rooms, loading: false});\n                return this.props.socket.subscribeObject('enum.*', this.onEnumUpdateBound);\n            });\n    }\n\n    componentWillUnmount() {\n        this.props.socket.unsubscribeObject('enum.*', this.onEnumUpdateBound).then(() => {});\n    }\n\n    onEnumUpdate(id, obj) {\n        this.removeChanged(id);\n        this.updateObjInState(id, obj);\n    }\n\n    informInstance(id) {\n        this.props.socket.sendTo(this.props.adapterName + '.' + this.props.instance, 'update', id);\n    }\n\n    addChanged(id) {\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\n        if (changed.indexOf(id) === -1) {\n            changed.push(id);\n            this.setState({changed});\n        }\n    }\n\n    removeChanged(id) {\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\n        const pos = changed.indexOf(id);\n\n        if (pos !== -1) {\n            changed.splice(pos, 1);\n            this.setState({changed});\n        }\n    }\n\n    updateObjInState(id, obj) {\n        // update obj\n        if (id.match(/^enum\\.functions\\./)) {\n            for (let i = this.state.funcs.length - 1; i >= 0 ; i--) {\n                if (this.state.funcs[i]._id === id) {\n                    const funcs = JSON.parse(JSON.stringify(this.state.funcs));\n                    if (obj) {\n                        funcs[i] = obj;\n                    } else {\n                        funcs.splice(i, 1);\n                    }\n                    this.setState({funcs});\n                    break;\n                }\n            }\n        } else\n        if (id.match(/^enum\\.rooms\\./)) {\n            for (let i = this.state.rooms.length - 1; i >= 0; i--) {\n                if (this.state.rooms[i]._id === id) {\n                    const rooms = JSON.parse(JSON.stringify(this.state.rooms));\n                    if (obj) {\n                        rooms[i] = obj;\n                    } else {\n                        rooms.splice(i, 1);\n                    }\n                    this.setState({rooms});\n                    break;\n                }\n            }\n        }\n    }\n\n    onToggleEnum(id) {\n        let obj = this.state.funcs.find(e => e._id === id) || this.state.rooms.find(e => e._id === id);\n\n        let smartName = Utils.getSmartNameFromObj(obj);\n        obj = JSON.parse(JSON.stringify(obj));\n        if (smartName !== false) {\n            Utils.disableSmartName(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n        } else {\n            Utils.removeSmartName(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n        }\n\n        this.addChanged(id);\n\n        this.props.socket.setObject(id, obj)\n            .then(() => {\n                // update obj\n                this.updateObjInState(id, obj);\n                this.informInstance(id);\n\n                setTimeout(() => this.removeChanged(id), 500);\n            });\n    }\n\n    onEdit(id) {\n        const obj = this.state.funcs.find(e => e._id === id) || this.state.rooms.find(e => e._id === id);\n        let smartName = Utils.getSmartNameFromObj(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n        if (typeof smartName === 'object' && smartName) {\n            smartName = smartName[I18n.getLanguage()] || smartName.en;\n        }\n        smartName = smartName || Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()});\n        this.setState({editId: id, editedSmartName: smartName});\n    }\n\n    renderEnum(obj) {\n        let smartName = Utils.getSmartNameFromObj(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n        // convert old format\n        if (smartName && typeof smartName === 'object') {\n            smartName = smartName[I18n.getLanguage()] || smartName.en || '';\n        }\n        let name = Utils.getObjectNameFromObj(obj);\n\n        return (<div key={obj._id} className={this.props.classes.enumLine} style={{background: this.state.changed.indexOf(obj._id) !== -1 ? CHANGED_COLOR : 'inherit'}}>\n            <span className={this.props.classes.enumLineName} style={{opacity: smartName === false ? 0.5: 1}}>{smartName || null}{smartName ? (<span className={this.props.classes.enumLineSubName}> ({name})</span>) : name}</span>\n            <span className={this.props.classes.enumLineId} style={{opacity: smartName === false ? 0.5: 1}}>{obj._id}</span>\n            <Switch\n                className={this.props.classes.enumLineEnabled}\n                checked={smartName !== false}\n                onChange={() => this.onToggleEnum(obj._id)}\n            />\n            <IconButton aria-label=\"Edit\" className={this.props.classes.enumLineEdit} onClick={() => this.onEdit(obj._id)}>\n                <IconEdit fontSize=\"small\" />\n            </IconButton>\n\n        </div>);\n    }\n\n    renderEnums(name) {\n        return this.state[name].map(e => this.renderEnum(e));\n    }\n\n    renderMessage() {\n        if (this.state.message) {\n            return (<MessageDialog text={this.state.message} onClose={() => this.setState({message: ''})}/>);\n        } else {\n            return null;\n        }\n    }\n\n    changeSmartName() {\n        // Check if the name is duplicate\n        let enums = this.state.editId.startsWith('enum.functions.') ? this.state.funcs : this.state.rooms;\n        if (enums.find(obj =>\n            this.state.editId !== obj._id && (\n            this.state.editedSmartName === Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()}) ||\n            this.state.editedSmartName === Utils.getSmartNameFromObj(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon)))) {\n            this.setState({message: I18n.t('Duplicate name')});\n        } else {\n            this.addChanged(this.state.editId);\n            setTimeout(() => this.removeChanged(this.state.editId), 500);\n            const id = this.state.editId;\n            this.setState({editId: ''});\n            let newObj;\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    Utils.updateSmartName(obj, this.state.editedSmartName, undefined, undefined, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n                    newObj = obj;\n                    return this.props.socket.setObject(id, obj);\n                })\n                .then(() => {\n                    // update obj\n                    this.updateObjInState(id, newObj);\n                    this.informInstance(id);\n                })\n                .catch(err => this.props.onError(err));\n        }\n    }\n\n    renderEditDialog() {\n        if (this.state.editId) {\n            const obj = this.state.funcs.find(e => e._id === this.state.editId) || this.state.rooms.find(e => e._id === this.state.editId);\n\n            return (<Dialog\n                open={true}\n                maxWidth=\"sm\"\n                fullWidth={true}\n                onClose={() => this.handleOk()}\n                aria-labelledby=\"message-dialog-title\"\n                aria-describedby=\"message-dialog-description\"\n            >\n                <DialogTitle id=\"message-dialog-title\">{this.props.title || I18n.t('Smart name for %s', Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()}))}</DialogTitle>\n                <DialogContent>\n                    <TextField\n                        style={{width: '100%'}}\n                        label={I18n.t('Smart name')}\n                        onChange={e => this.setState({editedSmartName: e.target.value})}\n                        value={this.state.editedSmartName}\n                        helperText={I18n.t('You can enter several names divided by comma')}\n                        margin=\"normal\"\n                    />\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => this.changeSmartName()} color=\"primary\" autoFocus>{I18n.t('Ok')}</Button>\n                    <Button onClick={() => this.setState({editId: ''})}>{I18n.t('Cancel')}</Button>\n                </DialogActions>\n            </Dialog>)\n        } else {\n            return null;\n        }\n    }\n\n    render() {\n        if (this.state.loading) {\n            return (<CircularProgress />);\n        }\n        return (\n            <form className={this.props.classes.tab}>\n                <div className={this.props.classes.column}>\n                    <h5 className={this.props.classes.columnHeader}>{I18n.t('Rooms')}</h5>\n                    <div className={this.props.classes.columnDiv}>{this.renderEnums('rooms')}</div>\n                </div>\n                <div className={this.props.classes.column}>\n                    <h5 className={this.props.classes.columnHeader}>{I18n.t('Functions')}</h5>\n                    <div className={this.props.classes.columnDiv}>{this.renderEnums('funcs')}</div>\n                </div>\n                {this.renderMessage()}\n                {this.renderEditDialog()}\n            </form>\n        );\n    }\n}\n\nEnums.propTypes = {\n    common: PropTypes.object.isRequired,\n    native: PropTypes.object.isRequired,\n    instance: PropTypes.number.isRequired,\n    adapterName: PropTypes.string.isRequired,\n    onError: PropTypes.func,\n    onLoad: PropTypes.func,\n    onChange: PropTypes.func,\n    socket: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Enums);\n","import React, {Component} from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Fab from '@material-ui/core/Fab';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Input from '@material-ui/core/Input';\nimport Badge from '@material-ui/core/Badge';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\n\nimport {MdEdit as IconEdit} from 'react-icons/md';\nimport {MdAdd as IconAdd} from 'react-icons/md';\nimport {MdRefresh as IconRefresh} from 'react-icons/md';\nimport {MdClear as IconClear} from 'react-icons/md';\nimport {MdDelete as IconDelete} from 'react-icons/md';\nimport {MdFormatAlignJustify as IconExpand} from 'react-icons/md';\nimport {MdDragHandle as IconCollapse} from 'react-icons/md';\n\nimport {FaPowerOff as IconOn} from 'react-icons/fa';\nimport {FaThermometerHalf as IconTemperature} from 'react-icons/fa';\nimport {FaLongArrowAltUp as IconUp} from 'react-icons/fa';\nimport {FaLongArrowAltDown as IconDown} from 'react-icons/fa';\nimport {FaPercentage as IconPercentage} from 'react-icons/fa';\nimport {FaPalette as IconColor} from 'react-icons/fa';\nimport {FaLightbulb as IconBulb} from 'react-icons/fa';\nimport {FaLockOpen as IconLock} from 'react-icons/fa';\nimport {FaThermometer as IconThermometer} from 'react-icons/fa';\n\nimport Utils from '@iobroker/adapter-react/Components/Utils'\nimport I18n from '@iobroker/adapter-react/i18n';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Dialog from '@material-ui/core/Dialog';\nimport MessageDialog from '@iobroker/adapter-react/Dialogs/Message';\nimport DialogSelectID from '@iobroker/adapter-react/Dialogs/SelectID';\n\nconst colorOn = '#aba613';\nconst colorOff = '#444';\nconst colorSet = '#00c6ff';\nconst colorRead = '#00bc00';\nconst CHANGED_COLOR = '#e7000040';\nconst DEFAULT_CHANNEL_COLOR = '#e9e9e9';\nconst LAST_CHANGED_COLOR = '#b4ffbe';\n\nconst actionsMapping = {\n    turnOn: {color: colorOn, icon: IconOn, desc: 'Turn on'},\n    turnOff: {color: colorOff, icon: IconOn, desc: 'Turn off'},\n\n    setTargetTemperature: {color: colorSet, icon: IconTemperature, desc: 'Set target temperature'},\n    incrementTargetTemperature: {color: colorOn, icon: IconUp, desc: 'Increment target temperature'},\n    decrementTargetTemperature: {color: colorOff, icon: IconDown, desc: 'Decrement target temperature'},\n\n    setPercentage: {color: colorSet, icon: IconPercentage, desc: 'Set percentage'},\n    incrementPercentage: {color: colorOn, icon: IconUp, desc: 'Increment percentage'},\n    decrementPercentage: {color: colorOff, icon: IconDown, desc: 'Decrement percentage'},\n\n    setColor: {color: colorSet, icon: IconColor, desc: 'Set color'},\n\n    setColorTemperature: {color: colorSet, icon: IconBulb, desc: 'Set color temperature'},\n    incrementColorTemperature: {color: colorOn, icon: IconUp, desc: 'Increment color temperature'},\n    decrementColorTemperature: {color: colorOff, icon: IconDown, desc: 'Decrement color temperature'},\n\n    getTargetTemperature: {color: colorRead, icon: IconThermometer, desc: 'Get target temperature'},\n    getTemperatureReading: {color: colorRead, icon: IconThermometer, desc: 'Get actual temperature'},\n\n    setLockState: {color: colorSet, icon: IconLock, desc: 'Set lock state'},\n    getLockState: {color: colorRead, icon: IconLock, desc: 'Read lock state'},\n};\n\nconst SMARTTYPES = ['LIGHT', 'SWITCH', 'THERMOSTAT', 'ACTIVITY_TRIGGER', 'SCENE_TRIGGER', 'SMARTPLUG', 'SMARTLOCK', 'CAMERA'];\n\nconst styles = theme => ({\n    tab: {\n        width: '100%',\n        height: '100%'\n    },\n    column: {\n        display: 'inline-block',\n        verticalAlign: 'top',\n        marginRight: 20,\n        height: '100%',\n        overflow: 'hidden'\n    },\n    columnDiv: {\n        height: 'calc(100% - 40px)',\n        overflow: 'auto',\n        minWidth: 300\n    },\n    filter: {\n        margin: 0\n    },\n    button: {\n        marginRight: 20\n    },\n    devLineExpand: {\n        marginRight: 10,\n    },\n    devLineEnabled: {\n        position: 'absolute',\n        right: 0,\n        top: 0,\n    },\n    devLineEdit: {\n        position: 'absolute',\n        top: 5,\n        right: 50\n    },\n    devLineDelete: {\n        position: 'absolute',\n        top: 5,\n        right: 0\n    },\n    devLineName: {\n\n    },\n    devLineNumber:{\n        display: 'inline-block',\n        verticalAlign: 'middle',\n        width: 15,\n    },\n    editedId: {\n        fontStyle: 'italic'\n    },\n    enumLineSubName:{\n        fontStyle: 'italic',\n    },\n    devLine: {\n        height: 48,\n        width: '100%',\n        position: 'relative'\n    },\n    devLineDescription: {\n        display: 'block',\n        fontStyle: 'italic',\n        fontSize: 12\n    },\n    devLineActions: {\n        fontStyle: 'italic',\n        fontSize: 12,\n        paddingLeft: 50,\n        display: 'inline-block',\n    },\n    devLineProgress: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n    },\n    channelLineActions: {\n        width: 80\n    },\n    devLineNameBlock: {\n        display: 'inline-block',\n        width: 'calc(100% - 350px)'\n    },\n    columnHeader: {\n        background: theme.palette.primary.light,\n        padding: 10,\n        color: theme.palette.primary.contrastText\n    },\n    devModified: {\n        fontStyle: 'italic'\n    },\n    actionIcon: {\n        width: 16\n    },\n\n    devSubLine: {\n        position: 'relative',\n        height: 48\n    },\n    devSubLineName: {\n        marginLeft: 5,\n        marginTop: 14,\n        display: 'inline-block',\n        fontSize: 13,\n        width: 'calc(100% - 400px)'\n    },\n    devSubSubLineName:  {\n        fontSize: 8,\n        fontStyle: 'italic',\n        display: 'block'\n    },\n    devSubLineByOn: {\n        marginLeft: 5\n    },\n    devSubLineDelete: {\n        position: 'absolute',\n        top: 12,\n        right: 12,\n        padding: 0\n    },\n    devSubLineEdit: {\n        position: 'absolute',\n        top: 12,\n        right: 62,\n        padding: 0\n    },\n    devSubLineTypeTitle: {\n        marginTop: 0\n    }\n});\n\nclass AlexaSmartNames extends Component {\n    constructor(props) {\n        super(props);\n\n        if (!actionsMapping.translated) {\n            Object.keys(actionsMapping).forEach(a => actionsMapping[a].desc = I18n.t(actionsMapping[a].desc));\n            actionsMapping.translated = true;\n        }\n\n        this.state = {\n            editedSmartName: '',\n            editId: '',\n            editedSmartType: null,\n            editObjectName: '',\n            deleteId: '',\n\n            showSelectId: false,\n            showConfirmation: '',\n            changed: [],\n            devices: [],\n            message: '',\n            filter: '',\n            loading: true,\n            browse: false,\n            expanded: [],\n            lastChanged: ''\n        };\n\n        this.timerChanged = null;\n        this.browseTimer = null;\n        this.browseTimerCount = 0;\n        this.editedSmartName = '';\n\n        this.waitForUpdateID = null;\n        this.onReadyUpdateBound = this.onReadyUpdate.bind(this);\n        this.onResultUpdateBound = this.onResultUpdate.bind(this);\n\n        this.props.socket.getObject(`system.adapter.${this.props.adapterName}.${this.props.instance}`).then(obj => {\n            this.props.socket.getState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`).then(state => {\n                if (!obj || !obj.common || (!obj.common.enabled && (!state || !state.val))) {\n                    this.setState({message: I18n.t('Instance must be enabled'), loading: false, devices: []});\n                } else {\n                    this.browse();\n                }\n            });\n        });\n    }\n\n    browse(isIndicate) {\n        if (Date.now() - this.lastBrowse < 500) return;\n        this.lastBrowse = Date.now();\n        if (isIndicate) {\n            this.setState({loading: true, browse: true});\n        } else {\n            this.setState({browse: true});\n        }\n        console.log('Send BROWSE!');\n        this.browseTimer = setTimeout(() => {\n            console.log('Browse timeout!');\n            this.browseTimer = null;\n            this.browseTimerCount++;\n            if (this.browseTimerCount < 5) {\n                this.browse(isIndicate);\n            } else {\n                this.setState({message: I18n.t('Cannot read devices!')});\n            }\n        }, 10000);\n\n        this.props.socket.sendTo(this.props.adapterName + '.' + this.props.instance, 'browse', null, list => {\n            this.browseTimer && clearTimeout(this.browseTimer);\n            this.browseTimerCount = 0;\n            this.browseTimer = null;\n            if (this.waitForUpdateID) {\n                if (!this.onEdit(this.waitForUpdateID, list)) {\n                    this.setState({message: I18n.t('Device %s was not added', this.waitForUpdateID)});\n                }\n                this.waitForUpdateID = null;\n            }\n            console.log('BROWSE received.');\n\n            this.setState({devices: list, loading: false, changed: [], browse: false});\n        });\n    }\n\n    onReadyUpdate(id, state) {\n        console.log('Update ' + id + ' ' + (state ? state.val + '/' + state.ack : 'null'));\n        if (state && state.ack === true && state.val === true) {\n            this.devTimer && clearTimeout(this.devTimer);\n            this.devTimer = setTimeout(() => {\n                this.devTimer = null;\n                this.browse();\n            }, 300);\n        }\n    }\n\n    onResultUpdate(id, state) {\n        state && state.ack === true && state.val && this.setState({message: state.val});\n    }\n\n    componentWillMount() {\n        this.props.socket.subscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updates`, this.onReadyUpdateBound);\n        this.props.socket.subscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updatesResult`, this.onResultUpdateBound);\n    }\n\n    componentWillUnmount() {\n        this.props.socket.unsubscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updates`, this.onReadyUpdateBound);\n        this.props.socket.unsubscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updatesResult`, this.onResultUpdateBound);\n        if (this.timerChanged) {\n            clearTimeout(this.timerChanged);\n            this.timerChanged = null;\n        }\n    }\n\n    informInstance(id) {\n        this.props.socket.sendTo(this.props.adapterName + '.' + this.props.instance, 'update', id);\n    }\n\n    addChanged(id, cb) {\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\n        if (changed.indexOf(id) === -1) {\n            changed.push(id);\n            this.setState({changed}, () => cb && cb());\n        } else {\n            cb && cb();\n        }\n    }\n\n    removeChanged(id) {\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\n        const pos = changed.indexOf(id);\n\n        if (pos !== -1) {\n            changed.splice(pos, 1);\n            this.setState({changed});\n        }\n    }\n\n    onEdit(id, devices) {\n        devices = devices || this.state.devices;\n        const device = devices.find(dev => dev.additionalApplianceDetails.id === id);\n        if (device) {\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    let smartName = device.additionalApplianceDetails.friendlyNames ? device.additionalApplianceDetails.friendlyNames : device.friendlyName;\n                    if (typeof smartName === 'object' && smartName) {\n                        smartName = smartName[I18n.getLanguage()] || smartName.en;\n                    }\n                    this.editedSmartName = smartName;\n                    let editedSmartType = null;\n                    if (!device.additionalApplianceDetails.group) {\n                        editedSmartType = device.additionalApplianceDetails.smartType;\n                    }\n\n                    this.setState({editId: id, editedSmartType, editedSmartName: smartName, editObjectName: Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()})});\n                });\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    onAskDelete(deleteId) {\n        this.setState({deleteId, showConfirmation: true});\n    }\n\n    onDelete() {\n        let id = this.state.deleteId;\n        // const device = this.state.devices.find(dev => dev.additionalApplianceDetails.id === id);\n        this.addChanged(id, () => {\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    Utils.disableSmartName(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n                    return this.props.socket.setObject(id, obj);\n                })\n                .then(() => {\n                    this.setState({deleteId: '', showConfirmation: false, lastChanged: id});\n\n                    this.timerChanged && clearTimeout(this.timerChanged);\n                    this.timerChanged = setTimeout(() => {\n                        this.setState({lastChanged: ''});\n                        this.timerChanged = null;\n                    }, 30000);\n\n                    // update obj\n                    this.informInstance(id);\n                })\n                .catch(err => this.props.onError(err));\n        });\n    }\n\n    renderActions(dev) {\n        // Type\n        const actions = [];\n        if (!dev.actions) {\n            console.log('Something went wrong');\n            return null;\n        }\n        dev.actions.sort((a, b) => {\n            if (a === b) return 0;\n            if (a === 'turnOn') return -1;\n            if (b === 'turnOn') return 1;\n\n            if (a === 'turnOff') return -1;\n            if (b === 'turnOff') return 1;\n            return 0;\n        });\n\n        Object.keys(actionsMapping).forEach(action => {\n            if (dev.actions.indexOf(action) !== -1) {\n                const Icon = actionsMapping[action].icon;\n                actions.push((<span key={action} title={actionsMapping[action].desc}><Icon className={this.props.classes.actionIcon} style={{color: actionsMapping[action].color}}/></span>));\n            }\n        });\n        // add unknown actions\n        for (let a = 0; a < dev.actions.length; a++) {\n            if (!actionsMapping[dev.actions[a]]) {\n                actions.push((<span key={dev.actions[a]}>{dev.actions[a]}</span>));\n            }\n        }\n        return actions;\n    }\n\n    onExpand(lineNum) {\n        const expanded = JSON.parse(JSON.stringify(this.state.expanded));\n        const pos = expanded.indexOf(this.state.devices[lineNum].friendlyName);\n        if (pos === -1) {\n            expanded.push(this.state.devices[lineNum].friendlyName);\n        } else {\n            expanded.splice(pos, 1);\n        }\n        this.setState({expanded});\n    }\n\n    renderSelectByOn(dev, lineNum, id, type) {\n        // type = '-', 'stored', false or number [5-100]\n        if (type !== false) {\n            const items = [\n                (<MenuItem key=\"_\" value=\"\"><em>{I18n.t('Default')}</em></MenuItem>),\n                (<MenuItem key=\"last\" value=\"stored\">{I18n.t('last value')}</MenuItem>)\n            ];\n            for (let i = 5; i <= 100; i += 5) {\n                items.push((<MenuItem  key={i.toString()} value={i.toString()}>{i}%</MenuItem>));\n            }\n            return (<FormControl className={this.props.classes.devSubLineByOn}>\n                <Select className={this.props.classes.devSubLineByOnSelect} value={(type || '').toString()} onChange={e => this.onParamsChange(id, e.target.value)}>{items}</Select>\n                <FormHelperText className={this.props.classes.devSubLineTypeTitle}>{I18n.t('by ON')}</FormHelperText>\n            </FormControl>);\n        } else {\n            return null;\n        }\n    }\n\n    onParamsChange(id, byON, type) {\n        this.addChanged(id, () => {\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    Utils.updateSmartName(obj, undefined, byON, type, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n\n                    if (this.state.lastChanged !== id) {\n                        this.setState({lastChanged: id});\n                        this.timerChanged && clearTimeout(this.timerChanged);\n                        this.timerChanged = setTimeout(() => {\n                            this.setState({lastChanged: ''});\n                            this.timerChanged = null;\n                        }, 30000);\n                    }\n\n                    return this.props.socket.setObject(id, obj);\n                })\n                .then(() => {\n                    // update obj\n                    this.informInstance(id);\n                })\n                .catch(err => this.props.onError(err));\n        });\n    }\n\n    renderSelectTypeSelector(type, onChange) {\n        if (type !== false) {\n            const items = [\n                (<MenuItem key=\"_\" value=\"_\"><em>{I18n.t('no type')}</em></MenuItem>)\n            ];\n            for (let i = 0; i < SMARTTYPES.length; i++) {\n                items.push((<MenuItem  key={SMARTTYPES[i]} value={SMARTTYPES[i]}><em>{I18n.t(SMARTTYPES[i])}</em></MenuItem>));\n            }\n            return (\n                <FormControl>\n                    <Select value={type || '_'} onChange={e => onChange(e.target.value === '_' ? '' : e.target.value)}>{items}</Select>\n                    <FormHelperText className={this.props.classes.devSubLineTypeTitle}>{I18n.t('Types')}</FormHelperText>\n                </FormControl>);\n        } else {\n            return '';\n        }\n    }\n\n    renderSelectType(dev, lineNum, id, type) {\n        return this.renderSelectTypeSelector(type, value => this.onParamsChange(id, undefined, value));\n    }\n\n    renderChannels(dev, lineNum) {\n        const result = [];\n        const classes = this.props.classes;\n\n        if (dev.additionalApplianceDetails.group) {\n            const channels   = dev.additionalApplianceDetails.channels;\n            const names      = dev.additionalApplianceDetails.names;\n            const types      = dev.additionalApplianceDetails.byONs;\n            const smarttypes = dev.additionalApplianceDetails.smartTypes;\n\n            let c = 0;\n            for (const chan in channels) {\n                if (channels.hasOwnProperty(chan)) {\n                    for (let i = 0; i < channels[chan].length; i++) {\n                        const id = channels[chan][i].id;\n                        let background = this.state.changed.indexOf(id) !== -1 ? CHANGED_COLOR : DEFAULT_CHANNEL_COLOR;\n                        if (this.state.lastChanged === id && background === DEFAULT_CHANNEL_COLOR) {\n                            background = LAST_CHANGED_COLOR;\n                        }\n                        result.push((<div key={'sub' + id} className={classes.devSubLine} style={(c % 2) ? {} : {background}}>\n                            <div className={this.props.classes.devLineActions + ' ' + this.props.classes.channelLineActions}>{this.renderActions(channels[chan][i])}</div>\n                            <div className={classes.devSubLineName} title={id}>{(names[id] || id)}\n                                {id !== names[id] ? (<span className={classes.devSubSubLineName}>{id}</span>) : null}\n                            </div>\n                            {this.renderSelectType(dev, lineNum, id, smarttypes[id])}\n                            {this.renderSelectByOn(dev, lineNum, id, types[id])}\n                            <IconButton aria-label=\"Delete\" className={this.props.classes.devSubLineDelete} onClick={() => this.onAskDelete(id, lineNum)}><IconDelete fontSize=\"middle\" /></IconButton>\n                        </div>));\n                        c++;\n                    }\n                }\n            }\n        } else {\n            const id = dev.additionalApplianceDetails.id;\n            const name = dev.additionalApplianceDetails.name || id;\n            let background = this.state.changed.indexOf(id) !== -1 ? CHANGED_COLOR : DEFAULT_CHANNEL_COLOR;\n            if (this.state.lastChanged === id && background === DEFAULT_CHANNEL_COLOR) {\n                background = LAST_CHANGED_COLOR;\n            }\n            result.push((<div key={'sub' + id} className={classes.devSubLine} style={{background}}>\n                <div className={this.props.classes.devLineActions + ' ' + this.props.classes.channelLineActions} style={{width: 80}}>{this.renderActions(dev)}</div>\n                <div className={classes.devSubLineName} title={(id || '')}>{name}</div>\n                {this.renderSelectType(dev, lineNum, id, dev.additionalApplianceDetails.smartType)}\n                {this.renderSelectByOn(dev, lineNum, id, dev.additionalApplianceDetails.byON)}\n            </div>));\n        }\n        return result;\n    }\n\n    renderDevice(dev, lineNum) {\n        let friendlyName = dev.friendlyName;\n        let title;\n        if (!dev.additionalApplianceDetails.group && dev.additionalApplianceDetails.nameModified) {\n            title = friendlyName;\n        } else {\n            title = (<span className={this.props.classes.devModified} title={I18n.t('modified')}>{friendlyName}</span>);\n        }\n\n        let devCount = 0;\n        for (const ch in dev.additionalApplianceDetails.channels) {\n            if (dev.additionalApplianceDetails.channels.hasOwnProperty(ch)) {\n                devCount += dev.additionalApplianceDetails.channels[ch].length;\n            }\n        }\n        devCount = devCount || 1;\n        const expanded = this.state.expanded.indexOf(friendlyName) !== -1;\n        const id = dev.additionalApplianceDetails.id;\n\n        let background = (lineNum % 2) ? '#f1f1f1' : 'inherit';\n        const changed = this.state.changed.indexOf(id) !== -1;\n        if (changed) {\n            background = CHANGED_COLOR;\n        } else if (id === this.state.lastChanged) {\n            background = LAST_CHANGED_COLOR;\n        }\n\n        // If some of sub channels in change list or in last changed\n        if (dev.additionalApplianceDetails.group && !changed && id !== this.state.lastChanged) {\n            const channels = dev.additionalApplianceDetails.channels;\n            try {\n                channels && Object.keys(channels).forEach(chan =>\n                    chan && channels[chan].forEach(el => {\n                        if (this.state.changed.indexOf(el.id) !== -1) {\n                            background = CHANGED_COLOR;\n                        } else if (this.state.lastChanged === el.id) {\n                            background = LAST_CHANGED_COLOR;\n                        }\n                    })\n                );\n            } catch (error) {\n                console.log(error)\n            }\n        }\n\n        return [\n            (<div key={'line' + lineNum} className={this.props.classes.devLine} style={{background}}>\n                <div className={this.props.classes.devLineNumber}>{lineNum + 1}.</div>\n                <IconButton className={this.props.classes.devLineExpand} onClick={() => this.onExpand(lineNum)}>\n                    {devCount > 1 ?\n                        (<Badge badgeContent={devCount} color=\"primary\">\n                            {expanded ? (<IconCollapse/>) : (<IconExpand />)}\n                        </Badge>) :\n                        (expanded ? (<IconCollapse/>) : (<IconExpand />))}\n                </IconButton>\n                <div className={this.props.classes.devLineNameBlock} style={{display: 'inline-block', position: 'relative'}}>\n                    <span className={this.props.classes.devLineName}>{title}</span>\n                    <span className={this.props.classes.devLineDescription}>{dev.friendlyDescription}</span>\n                    {changed ? (<CircularProgress className={this.props.classes.devLineProgress} size={20}/>) : null}\n                </div>\n                <span className={this.props.classes.devLineActions}>{this.renderActions(dev)}</span>\n                {!dev.additionalApplianceDetails.group ?\n                    (<IconButton aria-label=\"Edit\" className={this.props.classes.devLineEdit} onClick={() => this.onEdit(id)}><IconEdit fontSize=\"middle\" /></IconButton>) : null}\n                {!dev.additionalApplianceDetails.group ?\n                    (<IconButton aria-label=\"Delete\" className={this.props.classes.devLineDelete} onClick={() => this.onAskDelete(id)}><IconDelete fontSize=\"middle\" /></IconButton>) : null}\n            </div>),\n            expanded ? this.renderChannels(dev, lineNum) : null\n        ];\n    }\n\n    renderMessage() {\n        if (this.state.message) {\n            return (<MessageDialog text={this.state.message} onClose={() => this.setState({message: ''})}/>);\n        } else {\n            return null;\n        }\n    }\n\n    changeSmartName(e) {\n        e && e.preventDefault();\n        // Check if the name is duplicate\n        this.addChanged(this.state.editId, () => {\n            const id = this.state.editId;\n            const editedSmartType = this.state.editedSmartType;\n\n            this.setState({editId: '', editObjectName: '', lastChanged: id, editedSmartType: null});\n\n            this.timerChanged && clearTimeout(this.timerChanged);\n            this.timerChanged = setTimeout(() => {\n                this.setState({lastChanged: ''});\n                this.timerChanged = null;\n            }, 30000);\n\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    Utils.updateSmartName(obj, this.editedSmartName, undefined, editedSmartType === null ? undefined : editedSmartType, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n\n                    return this.props.socket.setObject(id, obj);\n                })\n                .then(() => {\n                    // update obj\n                    this.informInstance(id);\n                })\n                .catch(err => this.props.onError(err));\n        });\n    }\n\n    renderEditDialog() {\n        if (this.state.editId) {\n            return (<Dialog\n                open={true}\n                maxWidth=\"sm\"\n                fullWidth={true}\n                onClose={() => this.handleOk()}\n                aria-labelledby=\"message-dialog-title\"\n                aria-describedby=\"message-dialog-description\"\n            >\n                <DialogTitle id=\"message-dialog-title\">{this.props.title || I18n.t('Smart name for %s', this.state.editObjectName)}</DialogTitle>\n                <DialogContent>\n                    <p><span>ID:</span> <span className={this.props.classes.editedId}>{this.state.editId}</span></p>\n                    <TextField\n                        style={{width: '100%'}}\n                        label={I18n.t('Smart name')}\n                        onKeyDown={e =>\n                            e.keyCode === 13 && this.changeSmartName(e)}\n                        onChange={e => this.editedSmartName = e.target.value}\n                        defaultValue={this.state.editedSmartName}\n                        helperText={I18n.t('You can enter several names divided by comma')}\n                        margin=\"normal\"\n                    />\n                    {this.state.editedSmartType !== null ? this.renderSelectTypeSelector(this.state.editedSmartType, value => this.setState({editedSmartType: value})) : null}\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => this.changeSmartName()} color=\"primary\" autoFocus>{I18n.t('Ok')}</Button>\n                    <Button onClick={() => {\n                        this.editedSmartName = null;\n                        this.setState({editId: '', editedSmartName: ''});\n                    }}>{I18n.t('Cancel')}</Button>\n                </DialogActions>\n            </Dialog>)\n        } else {\n            return null;\n        }\n    }\n\n    renderConfirmDialog() {\n        if (this.state.showConfirmation) {\n            return (<Dialog\n                open={true}\n                maxWidth=\"sm\"\n                fullWidth={true}\n                onClose={() => this.handleOk()}\n                aria-labelledby=\"confirmation-dialog-title\"\n                aria-describedby=\"confirmation-dialog-description\"\n            >\n                <DialogTitle id=\"confirmation-dialog-title\">{this.props.title || I18n.t('Device will be disabled.')}</DialogTitle>\n                <DialogContent>\n                    <p>{I18n.t('Are you sure?')}</p>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => this.onDelete()} color=\"primary\" autoFocus>{I18n.t('Ok')}</Button>\n                    <Button onClick={() => this.setState({showConfirmation: ''})}>{I18n.t('Cancel')}</Button>\n                </DialogActions>\n            </Dialog>)\n        } else {\n            return null;\n        }\n    }\n\n    getSelectIdDialog() {\n        if (this.state.showSelectId) {\n            return (<DialogSelectID\n                key=\"dialogSelectID1\"\n                prefix={'../..'}\n                connection={this.props.socket}\n                selected={''}\n                statesOnly={true}\n                onClose={() => this.setState({showSelectId: false})}\n                onOk={(selected, name) => {\n                    this.setState({showSelectId: false});\n\n                    this.props.socket.getObject(selected)\n                        .then(obj => {\n                            if (obj) {\n                                const name = Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()});\n                                Utils.updateSmartName(obj, (name || I18n.t('Device name')).replace(/[-_.]+/g, ' '), undefined, undefined, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n                                this.addChanged(obj._id);\n                                this.waitForUpdateID = obj._id;\n\n                                if (this.state.lastChanged !== obj._id) {\n                                    this.setState({lastChanged: obj._id});\n                                    this.timerChanged && clearTimeout(this.timerChanged);\n                                    this.timerChanged = setTimeout(() => {\n                                        this.setState({lastChanged: ''});\n                                        this.timerChanged = null;\n                                    }, 30000);\n                                }\n\n                                this.props.socket.setObject(obj._id, obj)\n                                    .then(() => this.informInstance(obj._id))\n                                    .catch(err => this.setState({message: err}));\n                            } else {\n                                this.setState({message: I18n.t('Invalid ID')});\n                            }\n                        });\n                }}\n            />);\n        } else {\n            return null;\n        }\n    }\n\n    renderDevices() {\n        const filter = this.state.filter.toLowerCase();\n        const result = [];\n        for (let i = 0; i < this.state.devices.length; i++) {\n            if (this.state.filter && this.state.devices[i].friendlyName.toLowerCase().indexOf(filter) === -1 ) continue;\n            result.push(this.renderDevice(this.state.devices[i], i));\n        }\n        return (<div key=\"listDevices\" className={this.props.classes.columnDiv}>{result}</div>);\n    }\n\n    render() {\n        if (this.state.loading) {\n            return (<CircularProgress  key=\"alexaProgress\" />);\n        }\n\n        return (\n            <form key=\"alexa\" className={this.props.classes.tab}>\n                <Fab size=\"small\" color=\"secondary\" aria-label=\"Add\" className={this.props.classes.button} onClick={() => this.setState({showSelectId: true})}><IconAdd /></Fab>\n                <Fab size=\"small\" color=\"primary\" aria-label=\"Refresh\" className={this.props.classes.button}\n                      onClick={() => this.browse(true)} disabled={this.state.browse}>{this.state.browse ? (<CircularProgress size={20} />) : (<IconRefresh/>)}</Fab>\n\n                <Input\n                    placeholder={I18n.t('Filter')}\n                    className={this.state.filter}\n                    value={this.state.filter}\n                    onChange={e => this.setState({filter: e.target.value})}\n                />\n                <IconButton aria-label=\"Clear\" className={this.props.classes.button} onClick={() => this.setState({filter: ''})}><IconClear fontSize=\"large\" /></IconButton>\n                {this.renderDevices()}\n                {this.renderMessage()}\n                {this.renderEditDialog()}\n                {this.getSelectIdDialog()}\n                {this.renderConfirmDialog()}\n            </form>\n        );\n    }\n}\n\nAlexaSmartNames.propTypes = {\n    common: PropTypes.object.isRequired,\n    native: PropTypes.object.isRequired,\n    instance: PropTypes.number.isRequired,\n    adapterName: PropTypes.string.isRequired,\n    onError: PropTypes.func,\n    onLoad: PropTypes.func,\n    onChange: PropTypes.func,\n    socket: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(AlexaSmartNames);\n","import React, {Component} from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Fab from '@material-ui/core/Fab';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Input from '@material-ui/core/Input';\nimport Badge from '@material-ui/core/Badge';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\n\nimport {MdEdit as IconEdit} from 'react-icons/md';\nimport {MdAdd as IconAdd} from 'react-icons/md';\nimport {MdRefresh as IconRefresh} from 'react-icons/md';\nimport {MdClear as IconClear} from 'react-icons/md';\nimport {MdDelete as IconDelete} from 'react-icons/md';\nimport {MdFormatAlignJustify as IconExpand} from 'react-icons/md';\nimport {MdDragHandle as IconCollapse} from 'react-icons/md';\n\nimport {FaPowerOff as IconOn} from 'react-icons/fa';\nimport {FaThermometerHalf as IconTemperature} from 'react-icons/fa';\nimport {FaLongArrowAltUp as IconUp} from 'react-icons/fa';\nimport {FaLongArrowAltDown as IconDown} from 'react-icons/fa';\nimport {FaPercentage as IconPercentage} from 'react-icons/fa';\nimport {FaPalette as IconColor} from 'react-icons/fa';\nimport {FaLightbulb as IconBulb} from 'react-icons/fa';\nimport {FaLockOpen as IconLock} from 'react-icons/fa';\nimport {FaThermometer as IconThermometer} from 'react-icons/fa';\n\nimport Utils from '@iobroker/adapter-react/Components/Utils'\nimport I18n from '@iobroker/adapter-react/i18n';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Dialog from '@material-ui/core/Dialog';\nimport MessageDialog from '@iobroker/adapter-react/Dialogs/Message';\nimport DialogSelectID from '@iobroker/adapter-react/Dialogs/SelectID';\n\nconst colorOn = '#aba613';\nconst colorOff = '#444';\nconst colorSet = '#00c6ff';\nconst colorRGB = '#ff7ee3';\nconst colorRead = '#00bc00';\nconst CHANGED_COLOR = '#e7000040';\nconst DEFAULT_CHANNEL_COLOR = '#e9e9e9';\nconst LAST_CHANGED_COLOR = '#b4ffbe';\n\nconst actionsMapping = {\n    OnOff: {color: colorOn, icon: IconOn, desc: 'On/Off'},\n    Brightness: {color: colorSet, icon: IconBulb, desc: 'Dimmer'},\n    RGB: {color: colorRGB, icon: IconBulb, desc: 'Set color'},\n\n    setTargetTemperature: {color: colorSet, icon: IconTemperature, desc: 'Set target temperature'},\n    incrementTargetTemperature: {color: colorOn, icon: IconUp, desc: 'Increment target temperature'},\n    decrementTargetTemperature: {color: colorOff, icon: IconDown, desc: 'Decrement target temperature'},\n\n    incrementPercentage: {color: colorOn, icon: IconUp, desc: 'Increment percentage'},\n    decrementPercentage: {color: colorOff, icon: IconDown, desc: 'Decrement percentage'},\n\n    setColor: {color: colorSet, icon: IconColor, desc: 'Set color'},\n\n    incrementColorTemperature: {color: colorOn, icon: IconUp, desc: 'Increment color temperature'},\n    decrementColorTemperature: {color: colorOff, icon: IconDown, desc: 'Decrement color temperature'},\n\n    getTargetTemperature: {color: colorRead, icon: IconThermometer, desc: 'Get target temperature'},\n    getTemperatureReading: {color: colorRead, icon: IconThermometer, desc: 'Get actual temperature'},\n\n    setLockState: {color: colorSet, icon: IconLock, desc: 'Set lock state'},\n    getLockState: {color: colorRead, icon: IconLock, desc: 'Read lock state'},\n};\n\nconst SMARTTYPES = ['LIGHT', 'SWITCH', 'THERMOSTAT', 'ACTIVITY_TRIGGER', 'SCENE_TRIGGER', 'SMARTPLUG', 'SMARTLOCK', 'CAMERA'];\n\nconst styles = theme => ({\n    tab: {\n        width: '100%',\n        height: '100%'\n    },\n    column: {\n        display: 'inline-block',\n        verticalAlign: 'top',\n        marginRight: 20,\n        height: '100%',\n        overflow: 'hidden'\n    },\n    columnDiv: {\n        height: 'calc(100% - 40px)',\n        overflow: 'auto',\n        minWidth: 300\n    },\n    filter: {\n        margin: 0\n    },\n    button: {\n        marginRight: 20\n    },\n    devLineExpand: {\n        marginRight: 10,\n    },\n    devLineEnabled: {\n        position: 'absolute',\n        right: 0,\n        top: 0,\n    },\n    devLineEdit: {\n        position: 'absolute',\n        top: 5,\n        right: 50\n    },\n    devLineDelete: {\n        position: 'absolute',\n        top: 5,\n        right: 0\n    },\n    devLineName: {\n\n    },\n    devLineNumber:{\n        display: 'inline-block',\n        verticalAlign: 'middle',\n        width: 15,\n    },\n    editedId: {\n        fontStyle: 'italic'\n    },\n    enumLineSubName:{\n        fontStyle: 'italic',\n    },\n    devLine: {\n        height: 48,\n        width: '100%',\n        position: 'relative'\n    },\n    devLineDescription: {\n        display: 'block',\n        fontStyle: 'italic',\n        fontSize: 12\n    },\n    devLineActions: {\n        fontStyle: 'italic',\n        fontSize: 12,\n        paddingLeft: 50,\n        display: 'inline-block',\n    },\n    devLineProgress: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n    },\n    channelLineActions: {\n        width: 80\n    },\n    devLineNameBlock: {\n        display: 'inline-block',\n        width: 'calc(100% - 350px)'\n    },\n    columnHeader: {\n        background: theme.palette.primary.light,\n        padding: 10,\n        color: theme.palette.primary.contrastText\n    },\n    devModified: {\n        fontStyle: 'italic'\n    },\n    actionIcon: {\n        width: 16\n    },\n\n    devSubLine: {\n        position: 'relative',\n        height: 48\n    },\n    devSubLineName: {\n        marginLeft: 5,\n        marginTop: 14,\n        minWidth: 100,\n        display: 'inline-block',\n        fontSize: 13,\n        paddingLeft: 70,\n        //width: 'calc(100% - 400px)'\n    },\n    devSubSubLine:  {\n        fontSize: 10,\n        fontStyle: 'italic',\n        display: 'inline-block',\n        marginLeft: 15\n    },\n    devSubLineSetId:  {\n        fontStyle: 'italic',\n        display: 'block',\n        color: '#999'\n    },\n    devSubLineByOn: {\n        marginLeft: 5\n    },\n    devSubLineDelete: {\n        position: 'absolute',\n        top: 12,\n        right: 12,\n        padding: 0\n    },\n    devSubLineEdit: {\n        position: 'absolute',\n        top: 12,\n        right: 62,\n        padding: 0\n    },\n    devSubLineTypeTitle: {\n        marginTop: 0\n    }\n});\n\nclass AlisaDevices extends Component {\n    constructor(props) {\n        super(props);\n\n        if (!actionsMapping.translated) {\n            Object.keys(actionsMapping).forEach(a => actionsMapping[a].desc = I18n.t(actionsMapping[a].desc));\n            actionsMapping.translated = true;\n        }\n\n        this.state = {\n            editedSmartName: '',\n            editId: '',\n            editObjectName: '',\n            deleteId: '',\n\n            showSelectId: false,\n            showConfirmation: '',\n            changed: [],\n            devices: [],\n            message: '',\n            filter: '',\n            loading: true,\n            browse: false,\n            expanded: [],\n            lastChanged: ''\n        };\n\n        this.timerChanged = null;\n        this.browseTimer = null;\n        this.browseTimerCount = 0;\n        this.editedSmartName = '';\n\n        this.waitForUpdateID = null;\n        this.onReadyUpdateBound = this.onReadyUpdate.bind(this);\n        this.onResultUpdateBound = this.onResultUpdate.bind(this);\n\n        this.props.socket.getObject(`system.adapter.${this.props.adapterName}.${this.props.instance}`).then(obj => {\n            this.props.socket.getState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`).then(state => {\n                if (!obj || !obj.common || (!obj.common.enabled && (!state || !state.val))) {\n                    this.setState({message: I18n.t('Instance must be enabled'), loading: false, devices: []});\n                } else {\n                    this.browse();\n                }\n            });\n        });\n    }\n\n    browse(isIndicate) {\n        if (Date.now() - this.lastBrowse < 500) return;\n\n        this.lastBrowse = Date.now();\n        if (isIndicate) {\n            this.setState({loading: true, browse: true});\n        } else {\n            this.setState({browse: true});\n        }\n\n        console.log('Send BROWSE!');\n\n        this.browseTimer = setTimeout(() => {\n            console.log('Browse timeout!');\n            this.browseTimer = null;\n            this.browseTimerCount++;\n            if (this.browseTimerCount < 5) {\n                this.browse(isIndicate);\n            } else {\n                this.setState({message: I18n.t('Cannot read devices!')});\n            }\n        }, 10000);\n\n        this.props.socket.sendTo(this.props.adapterName + '.' + this.props.instance, 'browseAlisa', null, list => {\n            this.browseTimer && clearTimeout(this.browseTimer);\n            this.browseTimerCount = 0;\n            this.browseTimer = null;\n\n            if (this.waitForUpdateID) {\n                if (!this.onEdit(this.waitForUpdateID, list)) {\n                    this.setState({message: I18n.t('Device %s was not added', this.waitForUpdateID)});\n                }\n                this.waitForUpdateID = null;\n            }\n\n            console.log('BROWSE received.');\n\n            this.setState({devices: list, loading: false, changed: [], browse: false});\n        });\n    }\n\n    onReadyUpdate(id, state) {\n        console.log('Update ' + id + ' ' + (state ? state.val + '/' + state.ack : 'null'));\n        if (state && state.ack === true && state.val === true) {\n            if (this.devTimer) clearTimeout(this.devTimer);\n            this.devTimer = setTimeout(() => {\n                this.devTimer = null;\n                this.browse();\n            }, 300);\n        }\n    }\n\n    onResultUpdate(id, state) {\n        state && state.ack === true && state.val && this.setState({message: state.val});\n    }\n\n    componentWillMount() {\n        this.props.socket.subscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updates`, this.onReadyUpdateBound);\n        this.props.socket.subscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updatesResult`, this.onResultUpdateBound);\n    }\n\n    componentWillUnmount() {\n        this.props.socket.unsubscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updates`, this.onReadyUpdateBound);\n        this.props.socket.unsubscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updatesResult`, this.onResultUpdateBound);\n        if (this.timerChanged) {\n            clearTimeout(this.timerChanged);\n            this.timerChanged = null;\n        }\n    }\n\n    informInstance(id) {\n        this.props.socket.sendTo(this.props.adapterName + '.' + this.props.instance, 'update', id);\n    }\n\n    addChanged(id, cb) {\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\n        if (changed.indexOf(id) === -1) {\n            changed.push(id);\n            this.setState({changed}, () => cb && cb());\n        } else {\n            cb && cb();\n        }\n    }\n\n    removeChanged(id) {\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\n        const pos = changed.indexOf(id);\n\n        if (pos !== -1) {\n            changed.splice(pos, 1);\n            this.setState({changed});\n        }\n    }\n\n    onEdit(id, devices) {\n        devices = devices || this.state.devices;\n        const device = devices.find(dev => dev.iobID === id);\n        if (device) {\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    let smartName = device.name;\n                    if (typeof smartName === 'object' && smartName) {\n                        smartName = smartName[I18n.getLanguage()] || smartName.en;\n                    }\n                    this.editedSmartName = smartName;\n                    this.setState({editId: id, editedSmartName: smartName, editObjectName:smartName/* Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()})*/});\n                });\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    onAskDelete(deleteId) {\n        this.setState({deleteId, showConfirmation: true});\n    }\n\n    onDelete() {\n        let id = this.state.deleteId;\n        // const device = this.state.devices.find(dev => dev.additionalApplianceDetails.id === id);\n        this.addChanged(id, () => {\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    Utils.disableSmartName(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n                    return this.props.socket.setObject(id, obj);\n                })\n                .then(() => {\n                    this.setState({deleteId: '', showConfirmation: false, lastChanged: id});\n\n                    this.timerChanged && clearTimeout(this.timerChanged);\n                    this.timerChanged = setTimeout(() => {\n                        this.setState({lastChanged: ''});\n                        this.timerChanged = null;\n                    }, 30000);\n\n                    // update obj\n                    this.informInstance(id);\n                })\n                .catch(err => this.props.onError(err));\n        });\n    }\n\n    renderActions(dev) {\n        // Type\n        const actions = [];\n        if (!dev.actions) {\n            console.log('Something went wrong');\n            return null;\n        }\n\n        dev.actions.sort((a, b) => {\n            if (a === b) return 0;\n            if (a === 'OnOff') return -1;\n            if (b === 'OnOff') return 1;\n            return 0;\n        });\n\n        Object.keys(actionsMapping).forEach(action => {\n            if (dev.actions.indexOf(action) !== -1) {\n                const Icon = actionsMapping[action].icon;\n                actions.push((<span key={action} title={actionsMapping[action].desc}><Icon className={this.props.classes.actionIcon} style={{color: actionsMapping[action].color}}/></span>));\n            }\n        });\n        // add unknown actions\n        for (let a = 0; a < dev.actions.length; a++) {\n            if (!actionsMapping[dev.actions[a]]) {\n                actions.push((<span key={dev.actions[a]}>{dev.actions[a]}</span>));\n            }\n        }\n        return actions;\n    }\n\n    onExpand(lineNum) {\n        const expanded = JSON.parse(JSON.stringify(this.state.expanded));\n        const pos = expanded.indexOf(this.state.devices[lineNum].name);\n        if (pos === -1) {\n            expanded.push(this.state.devices[lineNum].name);\n        } else {\n            expanded.splice(pos, 1);\n        }\n        this.setState({expanded});\n    }\n\n    onParamsChange(id, byON, type) {\n        this.addChanged(id, () => {\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    Utils.updateSmartName(obj, undefined, byON, type, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n\n                    if (this.state.lastChanged !== id) {\n                        this.setState({lastChanged: id});\n                        this.timerChanged && clearTimeout(this.timerChanged);\n                        this.timerChanged = setTimeout(() => {\n                            this.setState({lastChanged: ''});\n                            this.timerChanged = null;\n                        }, 30000);\n                    }\n\n                    return this.props.socket.setObject(id, obj);\n                })\n                .then(() => {\n                    // update obj\n                    this.informInstance(id);\n                })\n                .catch(err => this.props.onError(err));\n        });\n    }\n\n    renderSelectType(dev, lineNum, id, type) {\n        if (type !== false) {\n            const items = [\n                (<MenuItem key=\"_\" value=\"_\"><em>{I18n.t('no type')}</em></MenuItem>)\n            ];\n            for (let i = 0; i < SMARTTYPES.length; i++) {\n                items.push((<MenuItem  key={SMARTTYPES[i]} value={SMARTTYPES[i]}><em>{I18n.t(SMARTTYPES[i])}</em></MenuItem>));\n            }\n            return (\n                <FormControl>\n                    <Select value={type || '_'} onChange={e => this.onParamsChange(id, undefined, e.target.value)}>{items}</Select>\n                    <FormHelperText className={this.props.classes.devSubLineTypeTitle}>{I18n.t('Types')}</FormHelperText>\n                </FormControl>);\n        } else {\n            return '';\n        }\n    }\n\n    renderChannels(dev, lineNum) {\n        const result = [];\n        const classes = this.props.classes;\n\n        const id = dev.main.getId;\n        const name = dev.func;\n        let background = DEFAULT_CHANNEL_COLOR;/*this.state.changed.indexOf(id) !== -1 ? CHANGED_COLOR : DEFAULT_CHANNEL_COLOR;\n        if (this.state.lastChanged === id && background === DEFAULT_CHANNEL_COLOR) {\n            background = LAST_CHANGED_COLOR;\n        }*/\n        result.push((<div key={'sub' + id} className={classes.devSubLine} style={{background}}>\n            <div className={classes.devSubLineName}>{name.toUpperCase()}</div>\n            <div className={classes.devSubSubLine}>\n                <div>{dev.main.getId}</div>\n                {dev.main.setId && dev.main.setId !== dev.main.getId ? (<div className={classes.devSubLineSetId}>{dev.main.setId}</div>) : null}\n            </div>\n\n        </div>));\n\n        dev.attributes.forEach(attr => {\n            result.push((<div key={'sub' + attr.getId} className={classes.devSubLine} style={{background}}>\n                <div className={classes.devSubLineName}>{attr.name.toUpperCase()}</div>\n                <div className={classes.devSubSubLine}>\n                    <div>{attr.getId}</div>\n                    {attr.setId && attr.setId !== attr.getId ? (<div className={classes.devSubLineSetId}>{attr.setId}</div>) : null}\n                </div>\n            </div>));\n        });\n\n        /*if (dev.additionalApplianceDetails.group) {\n            const channels   = dev.additionalApplianceDetails.channels;\n            const names      = dev.additionalApplianceDetails.names;\n            const types      = dev.additionalApplianceDetails.byONs;\n            const smarttypes = dev.additionalApplianceDetails.smartTypes;\n\n            let c = 0;\n            for (const chan in channels) {\n                if (channels.hasOwnProperty(chan)) {\n                    for (let i = 0; i < channels[chan].length; i++) {\n                        const id = channels[chan][i].id;\n                        let background = this.state.changed.indexOf(id) !== -1 ? CHANGED_COLOR : DEFAULT_CHANNEL_COLOR;\n                        if (this.state.lastChanged === id && background === DEFAULT_CHANNEL_COLOR) {\n                            background = LAST_CHANGED_COLOR;\n                        }\n                        result.push((<div key={'sub' + id} className={classes.devSubLine} style={(c % 2) ? {} : {background}}>\n                            <div className={this.props.classes.devLineActions + ' ' + this.props.classes.channelLineActions}>{this.renderActions(channels[chan][i])}</div>\n                            <div className={classes.devSubLineName} title={id}>{(names[id] || id)}\n                                {id !== names[id] ? (<span className={classes.devSubSubLineName}>{id}</span>) : null}\n                            </div>\n                            {this.renderSelectType(dev, lineNum, id, smarttypes[id])}\n                            {this.renderSelectByOn(dev, lineNum, id, types[id])}\n                            <IconButton aria-label=\"Delete\" className={this.props.classes.devSubLineDelete} onClick={() => this.onAskDelete(id, lineNum)}><IconDelete fontSize=\"middle\" /></IconButton>\n                        </div>));\n                        c++;\n                    }\n                }\n            }\n        } else {\n        }*/\n        return result;\n    }\n\n    renderDevice(dev, lineNum) {\n        //return (<div key={lineNum}>{JSON.stringify(dev)}</div>);\n        const expanded = this.state.expanded.indexOf(dev.name) !== -1;\n        let background = (lineNum % 2) ? '#f1f1f1' : 'inherit';\n        const changed = this.state.changed.indexOf(dev.iobID) !== -1;\n        if (changed) {\n            background = CHANGED_COLOR;\n        } else if (dev.iobID === this.state.lastChanged) {\n            background = LAST_CHANGED_COLOR;\n        }\n\n        //const isComplex = dev.\n\n        return [\n            (<div key={'line' + lineNum} className={this.props.classes.devLine} style={{background}}>\n                <div className={this.props.classes.devLineNumber}>{lineNum + 1}.</div>\n                <IconButton className={this.props.classes.devLineExpand} onClick={() => this.onExpand(lineNum)}>\n                    {dev.attributes.length ?\n                        (<Badge badgeContent={dev.attributes.length} color=\"primary\">{expanded ? (<IconCollapse/>) : (<IconExpand />)}</Badge>) :\n                        (expanded ? (<IconCollapse/>) : (<IconExpand />))}\n                </IconButton>\n                <div className={this.props.classes.devLineNameBlock} style={{display: 'inline-block', position: 'relative'}}>\n                    <span className={this.props.classes.devLineName}>{dev.name}</span>\n                    <span className={this.props.classes.devLineDescription}>{dev.description}</span>\n                    {changed ? (<CircularProgress className={this.props.classes.devLineProgress} size={20}/>) : null}\n                </div>\n                <span className={this.props.classes.devLineActions}>{this.renderActions(dev)}</span>\n                <IconButton aria-label=\"Edit\" className={this.props.classes.devLineEdit} onClick={() => this.onEdit(dev.iobID)}><IconEdit fontSize=\"middle\" /></IconButton>\n                <IconButton aria-label=\"Delete\" className={this.props.classes.devLineDelete} onClick={() => this.onAskDelete(dev.iobID)}><IconDelete fontSize=\"middle\" /></IconButton>\n\n            </div>),\n            expanded ? this.renderChannels(dev, lineNum) : null\n        ];\n    }\n\n    renderMessage() {\n        if (this.state.message) {\n            return (<MessageDialog text={this.state.message} onClose={() => this.setState({message: ''})}/>);\n        } else {\n            return null;\n        }\n    }\n\n    changeSmartName(e) {\n        e && e.preventDefault();\n        // Check if the name is duplicate\n        this.addChanged(this.state.editId, () => {\n            const id = this.state.editId;\n            this.setState({editId: '', editObjectName: '', lastChanged: id});\n\n            this.timerChanged && clearTimeout(this.timerChanged);\n            this.timerChanged = setTimeout(() => {\n                this.setState({lastChanged: ''});\n                this.timerChanged = null;\n            }, 30000);\n\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    Utils.updateSmartName(obj, this.editedSmartName, undefined, undefined, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n                    return this.props.socket.setObject(id, obj);\n                })\n                .then(() => {\n                    // update obj\n                    this.informInstance(id);\n                })\n                .catch(err => this.props.onError(err));\n        });\n    }\n\n    renderEditDialog() {\n        if (this.state.editId) {\n            return (<Dialog\n                open={true}\n                maxWidth=\"sm\"\n                fullWidth={true}\n                onClose={() => this.handleOk()}\n                aria-labelledby=\"message-dialog-title\"\n                aria-describedby=\"message-dialog-description\"\n            >\n                <DialogTitle id=\"message-dialog-title\">{this.props.title || I18n.t('Smart name for %s', this.state.editObjectName)}</DialogTitle>\n                <DialogContent>\n                    <p><span>ID:</span> <span className={this.props.classes.editedId}>{this.state.editId}</span></p>\n                    <TextField\n                        style={{width: '100%'}}\n                        label={I18n.t('Smart name')}\n                        onKeyDown={e =>\n                            e.keyCode === 13 && this.changeSmartName(e)}\n                        onChange={e => this.editedSmartName = e.target.value}\n                        defaultValue={this.state.editedSmartName}\n                        helperText={I18n.t('You can enter several names divided by comma')}\n                        margin=\"normal\"\n                    />\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => this.changeSmartName()} color=\"primary\" autoFocus>{I18n.t('Ok')}</Button>\n                    <Button onClick={() => {\n                        this.editedSmartName = null;\n                        this.setState({editId: '', editedSmartName: ''});\n                    }}>{I18n.t('Cancel')}</Button>\n                </DialogActions>\n            </Dialog>)\n        } else {\n            return null;\n        }\n    }\n\n    renderConfirmDialog() {\n        if (this.state.showConfirmation) {\n            return (<Dialog\n                open={true}\n                maxWidth=\"sm\"\n                fullWidth={true}\n                onClose={() => this.handleOk()}\n                aria-labelledby=\"confirmation-dialog-title\"\n                aria-describedby=\"confirmation-dialog-description\"\n            >\n                <DialogTitle id=\"confirmation-dialog-title\">{this.props.title || I18n.t('Device will be disabled.')}</DialogTitle>\n                <DialogContent>\n                    <p>{I18n.t('Are you sure?')}</p>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => this.onDelete()} color=\"primary\" autoFocus>{I18n.t('Ok')}</Button>\n                    <Button onClick={() => this.setState({showConfirmation: ''})}>{I18n.t('Cancel')}</Button>\n                </DialogActions>\n            </Dialog>)\n        } else {\n            return null;\n        }\n    }\n\n    getSelectIdDialog() {\n        if (this.state.showSelectId) {\n            return (<DialogSelectID\n                key=\"dialogSelectID1\"\n                prefix={'../..'}\n                connection={this.props.socket}\n                selected={''}\n                statesOnly={true}\n                onClose={() => this.setState({showSelectId: false})}\n                onOk={(selected, name) => {\n                    this.setState({showSelectId: false});\n\n                    this.props.socket.getObject(selected)\n                        .then(obj => {\n                            if (obj) {\n                                const name = Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()});\n                                Utils.updateSmartName(obj, (name || I18n.t('Device name')).replace(/[-_.]+/g, ' '), undefined, undefined, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n                                this.addChanged(obj._id);\n                                this.waitForUpdateID = obj._id;\n\n                                if (this.state.lastChanged !== obj._id) {\n                                    this.setState({lastChanged: obj._id});\n                                    this.timerChanged && clearTimeout(this.timerChanged);\n                                    this.timerChanged = setTimeout(() => {\n                                        this.setState({lastChanged: ''});\n                                        this.timerChanged = null;\n                                    }, 30000);\n                                }\n\n                                this.props.socket.setObject(obj._id, obj)\n                                    .then(() => this.informInstance(obj._id))\n                                    .catch(err => this.setState({message: err}));\n                            } else {\n                                this.setState({message: I18n.t('Invalid ID')});\n                            }\n                        });\n                }}\n            />);\n        } else {\n            return null;\n        }\n    }\n\n    renderDevices() {\n        const filter = this.state.filter.toLowerCase();\n        const result = [];\n        for (let i = 0; i < this.state.devices.length; i++) {\n            if (this.state.filter && this.state.devices[i].name.toLowerCase().indexOf(filter) === -1 ) continue;\n            result.push(this.renderDevice(this.state.devices[i], i));\n        }\n        return (<div key=\"listDevices\" className={this.props.classes.columnDiv}>{result}</div>);\n    }\n\n    render() {\n        if (this.state.loading) {\n            return (<CircularProgress  key=\"alexaProgress\" />);\n        }\n\n        return (\n            <form key=\"alexa\" className={this.props.classes.tab}>\n                <Fab size=\"small\" color=\"secondary\" aria-label=\"Add\" className={this.props.classes.button} onClick={() => this.setState({showSelectId: true})}><IconAdd /></Fab>\n                <Fab size=\"small\" color=\"primary\" aria-label=\"Refresh\" className={this.props.classes.button}\n                      onClick={() => this.browse(true)} disabled={this.state.browse}>{this.state.browse ? (<CircularProgress size={20} />) : (<IconRefresh/>)}</Fab>\n\n                <Input\n                    placeholder={I18n.t('Filter')}\n                    className={this.state.filter}\n                    value={this.state.filter}\n                    onChange={e => this.setState({filter: e.target.value})}\n                />\n                <IconButton aria-label=\"Clear\" className={this.props.classes.button} onClick={() => this.setState({filter: ''})}><IconClear fontSize=\"large\" /></IconButton>\n                {this.renderDevices()}\n                {this.renderMessage()}\n                {this.renderEditDialog()}\n                {this.getSelectIdDialog()}\n                {this.renderConfirmDialog()}\n            </form>\n        );\n    }\n}\n\nAlisaDevices.propTypes = {\n    common: PropTypes.object.isRequired,\n    native: PropTypes.object.isRequired,\n    instance: PropTypes.number.isRequired,\n    adapterName: PropTypes.string.isRequired,\n    onError: PropTypes.func,\n    onLoad: PropTypes.func,\n    onChange: PropTypes.func,\n    socket: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(AlisaDevices);\n","import React, {Component, forwardRef} from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport Utils from '@iobroker/adapter-react/Components/Utils'\nimport Fab from '@material-ui/core/Fab';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\n\nimport {MdAdd as IconAdd} from 'react-icons/md';\nimport {MdRefresh as IconRefresh} from 'react-icons/md';\n\n\nimport I18n from '@iobroker/adapter-react/i18n';\nimport MessageDialog from '@iobroker/adapter-react/Dialogs/Message';\nimport DialogSelectID from '@iobroker/adapter-react/Dialogs/SelectID';\n\nimport MaterialTable from 'material-table';\nimport AddBox from '@material-ui/icons/AddBox';\nimport ArrowUpward from '@material-ui/icons/ArrowUpward';\nimport Check from '@material-ui/icons/Check';\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport Clear from '@material-ui/icons/Clear';\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\nimport Edit from '@material-ui/icons/Edit';\nimport FilterList from '@material-ui/icons/FilterList';\nimport FirstPage from '@material-ui/icons/FirstPage';\nimport LastPage from '@material-ui/icons/LastPage';\nimport Remove from '@material-ui/icons/Remove';\nimport SaveAlt from '@material-ui/icons/SaveAlt';\nimport Search from '@material-ui/icons/Search';\nimport ViewColumn from '@material-ui/icons/ViewColumn';\n\n \nconst tableIcons = {\n    Add: forwardRef((props, ref) => <AddBox {...props} ref={ref} />),\n    Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\n    Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n    Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\n    DetailPanel: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n    Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\n    Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\n    Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\n    FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\n    LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\n    NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n    PreviousPage: forwardRef((props, ref) => <ChevronLeft {...props} ref={ref} />),\n    ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n    Search: forwardRef((props, ref) => <Search {...props} ref={ref} />),\n    SortArrow: forwardRef((props, ref) => <ArrowUpward {...props} ref={ref} />),\n    ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\n    ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />)\n  };\n\nconst styles = () => ({})\n\nclass GoogleSmartNames extends Component {\n    constructor(props) {\n        super(props);\n        this.myTableRef =  React.createRef();\n        this.state = {\n            editedSmartName: '',\n            editId: '',\n            editObjectName: '',\n            deleteId: '',\n\n            showSelectId: false,\n            showConfirmation: '',\n            changed: [],\n            devices: [],\n            message: '',\n            filter: '',\n            loading: true,\n            browse: false,\n            expanded: [],\n            lastChanged: '',\n            columns: [\n                { title: 'Id', field: 'id' , editable: 'never' ,   cellStyle: {\n                    maxWidth: \"12rem\",\n                    overflow: \"hidden\",\n                    wordBreak: \"break-all\"\n                  }},\n                { title: 'Smartnames', field: 'name.nicknames' },\n                { title: 'ioBType', field: 'ioType',editable: 'never', cellStyle: {\n                    maxWidth: \"4rem\",\n                    overflow: \"hidden\",\n                    wordBreak: \"break-all\"\n                  }},\n                { title: 'Type', field: 'type' ,  lookup: { \n                    \"action.devices.types.AC_UNIT\": 'Air conditioning unit\t', \n                    \"action.devices.types.AIRFRESHENER\": 'Air Freshener' ,\n                    \"action.devices.types.AIRPURIFIER\": 'Air purifier' ,\n                    \"action.devices.types.AWNING\": 'Awning' ,\n                    \"action.devices.types.BLINDS\": 'Blinds' ,\n                    \"action.devices.types.BOILER\": 'Boiler' ,\n                    \"action.devices.types.CAMERA\": 'Camera' ,\n                    \"action.devices.types.COFFEE_MAKER\": 'Coffee maker' ,\n                    \"action.devices.types.CURTAIN\": 'Curtain' ,\n                    \"action.devices.types.DISHWASHER\": 'Dishwasher' ,\n                    \"action.devices.types.DOOR\": 'Door' ,\n                    \"action.devices.types.DRYER\": 'Dryer' ,\n                    \"action.devices.types.FAN\": 'Fan' ,\n                    \"action.devices.types.FIREPLACE\": 'Fireplace' ,\n                    \"action.devices.types.GARAGE\": 'Garage' ,\n                    \"action.devices.types.GATE\": 'Gate' ,\n                    \"action.devices.types.HEATER\": 'Heater' ,\n                    \"action.devices.types.HOOD\": 'Hood' ,\n                    \"action.devices.types.KETTLE\": 'Kettle' ,\n                    \"action.devices.types.LIGHT\": 'Light' ,\n                    \"action.devices.types.LOCK\": 'Lock' ,\n                    \"action.devices.types.MOP\": 'Mop' ,\n                    \"action.devices.types.MICROWAVE\": 'Microwave' ,\n                    \"action.devices.types.OUTLET\": 'Outlet' ,\n                    \"action.devices.types.OVEN\": 'Oven' ,\n                    \"action.devices.types.PERGOLA\": 'Pergola' ,\n                    \"action.devices.types.REFRIGERATOR\": 'Refrigerator' ,\n                    \"action.devices.types.SCENE\": 'Scene' ,\n                    \"action.devices.types.SECURITYSYSTEM\": 'Security System' ,\n                    \"action.devices.types.SENSOR\": 'Sensor' ,\n                    \"action.devices.types.SHUTTER\": 'Shutter' ,\n                    \"action.devices.types.SHOWER\": 'Shower' ,\n                    \"action.devices.types.SPEAKER\": 'Speaker' ,\n                    \"action.devices.types.SPRINKLER\": 'Sprinkler' ,\n                    \"action.devices.types.SWITCH\": 'Switch' ,\n                    \"action.devices.types.THERMOSTAT\": 'Thermostat' ,\n                    \"action.devices.types.VACUUM\": 'Vacuum' ,\n                    \"action.devices.types.VALVE\": 'Valve' ,\n                    \"action.devices.types.WASHER\": 'Washer' ,\n                    \"action.devices.types.WATERHEATER\": 'Water heater' ,\n                    \"action.devices.types.WINDOW\": 'Window' \n                }},\n                { title: 'Funktion/Trait', field: 'displayTraits' ,  lookup: { \n                    // \"action.devices.traits.ArmDisarm\":'ArmDisarm',\n                    \"action.devices.traits.Brightness\":'Brightness',\n                    // \"action.devices.traits.CameraStream\":'CameraStream',\n                    \"action.devices.traits.ColorSetting_temperature\":'ColorSetting_Temperature',\n                    \"action.devices.traits.ColorSetting_spectrumRGB\":'ColorSetting_RGB',\n                    // \"action.devices.traits.Dock\":'Dock',\n                    \"action.devices.traits.FanSpeed\":'FanSpeed',\n                    // \"action.devices.traits.LightEffects\":'LightEffects',\n                    // \"action.devices.traits.Locator\":'Locator',\n                    \"action.devices.traits.LockUnlock\":'LockUnlock',\n                    \"action.devices.traits.Modes\":'Modes',\n                    \"action.devices.traits.OnOff\":'OnOff',\n                    \"action.devices.traits.OpenClose\":'OpenClose',\n                    // \"action.devices.traits.RunCycle\":'RunCycle',\n                    \"action.devices.traits.Scene\":'Scene',\n                    // \"action.devices.traits.Sensor\":'Sensor',\n                    \"action.devices.traits.StartStop\":'StartStop',\n                    \"action.devices.traits.TemperatureControl_temperatureSetpointCelsius\":'Oven_SetTemp',\n                    \"action.devices.traits.TemperatureControl_temperatureAmbientCelsius\":'Oven_StatusTemp',\n                    \"action.devices.traits.TemperatureSetting_thermostatMode\":'Thermostat_Mode',\n                    \"action.devices.traits.TemperatureSetting_thermostatTemperatureSetpoint\":'Thermostat_SetTemp',\n                    \"action.devices.traits.TemperatureSetting_thermostatTemperatureAmbient\":'Thermostat_StatusTemp',\n                    \"action.devices.traits.TemperatureSetting_thermostatHumidityAmbient\":'Thermostat_StatusHumidity',\n                    // \"action.devices.traits.Timer\":'Timer',\n                    \"action.devices.traits.Toggles\":'Toggles',\n                    \"action.devices.traits.Volume\":'Volume',\n                    }},\n\n                { title: 'Attributes', field: 'displayAttributes' ,   cellStyle: {\n                    maxWidth: \"12rem\",\n                    overflow: \"hidden\",\n                    wordBreak: \"break-all\"\n                  },  \n                editComponent: props => (\n                    <textarea cols=\"40\" rows=\"20\"\n                      value={props.value}\n                      onChange={e => props.onChange(e.target.value)}\n                    />\n                  )},\n                { title: 'Room', field: 'roomHint', editable: 'never' },\n                { title: 'Automatisch', field: 'smartEnum', editable: 'never',cellStyle: {\n                    maxWidth: \"3rem\",\n                    overflow: \"hidden\",\n                    wordBreak: \"break-all\"\n                  } },\n                  { title: 'Conversation to GH', field: 'displayConv2GH' ,  cellStyle: {\n                    maxWidth: \"4rem\",\n                    overflow: \"hidden\",\n                    wordBreak: \"break-all\"\n                  },  \n                  editComponent: props => (\n                    <div>Conversation to Google Home = function(value)&#123; <br></br>\n                     <textarea cols=\"40\" rows=\"20\"\n                        value={props.value}\n                        onChange={e => props.onChange(e.target.value)}\n                      />     &#125;</div>\n                )}, { title: 'Conversation to ioB', field: 'displayConv2iob' , cellStyle: {\n                    maxWidth: \"4rem\",\n                    overflow: \"hidden\",\n                    wordBreak: \"break-all\"\n                    },  \n                    editComponent: props => (\n                        <div>Conversation to ioBroker = function(value)&#123; <br></br>\n                        <textarea cols=\"40\" rows=\"20\"\n                        value={props.value}\n                        onChange={e => props.onChange(e.target.value)}\n                        />     &#125;</div>\n                    )},  \n                  \n              ]\n        };\n\n        this.timerChanged = null;\n        this.browseTimer = null;\n        this.browseTimerCount = 0;\n        this.editedSmartName = '';\n\n        this.waitForUpdateID = null;\n        this.onReadyUpdateBound = this.onReadyUpdate.bind(this);\n        this.onResultUpdateBound = this.onResultUpdate.bind(this);\n\n        this.props.socket.getObject(`system.adapter.${this.props.adapterName}.${this.props.instance}`).then(obj => {\n            this.props.socket.getState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`).then(state => {\n                if (!obj || !obj.common || (!obj.common.enabled && (!state || !state.val))) {\n                    this.setState({message: I18n.t('Instance must be enabled'), loading: false, devices: []});\n                } else {\n                    this.browse();\n                }\n            });\n        });\n    }\n    browse(isIndicate) {\n        if (Date.now() - this.lastBrowse < 500) return;\n        this.lastBrowse = Date.now();\n        if (isIndicate) {\n            this.setState({loading: true, browse: true});\n        } else {\n            this.setState({browse: true});\n        }\n        console.log('Send BROWSE!');\n        this.browseTimer = setTimeout(() => {\n            console.log('Browse timeout!');\n            this.browseTimer = null;\n            this.browseTimerCount++;\n            if (this.browseTimerCount < 5) {\n                this.browse(isIndicate);\n            } else {\n                this.setState({message: I18n.t('Cannot read devices!')});\n            }\n        }, 10000);\n\n        this.props.socket.sendTo(this.props.adapterName + '.' + this.props.instance, 'browseGH', null, list => {\n            this.browseTimer && clearTimeout(this.browseTimer);\n            this.browseTimerCount = 0;\n            this.browseTimer = null;\n            if (this.waitForUpdateID) {\n                if (!this.onEdit(this.waitForUpdateID, list)) {\n                    this.setState({message: I18n.t('Device %s was not added', this.waitForUpdateID)});\n                }\n                this.waitForUpdateID = null;\n            }\n            console.log('BROWSE received.');\n\n            this.setState({devices: list, loading: false, changed: [], browse: false});\n        });\n    }\n\n    onReadyUpdate(id, state) {\n        console.log(`Update ${id} ${state ? state.val + '/' + state.ack : 'null'}`);\n        if (state && state.ack === true && state.val === true) {\n            if (this.devTimer) clearTimeout(this.devTimer);\n            this.devTimer = setTimeout(() => {\n                this.devTimer = null;\n                this.browse();\n            }, 10);\n        }\n    }\n\n    onResultUpdate(state) {\n        state && state.ack === true && state.val && this.setState({message: state.val});\n    }\n\n    componentWillMount() {\n        this.props.socket.subscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updatesGH`, this.onReadyUpdateBound);\n        this.props.socket.subscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updatesResult`, this.onResultUpdateBound);\n    }\n\n    componentWillUnmount() {\n        this.props.socket.unsubscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updatesGH`, this.onReadyUpdateBound);\n        this.props.socket.unsubscribeState(`${this.props.adapterName}.${this.props.instance}.smart.updatesResult`, this.onResultUpdateBound);\n        if (this.timerChanged) {\n            clearTimeout(this.timerChanged);\n            this.timerChanged = null;\n        }\n    }\n\n    informInstance(id) {\n        this.props.socket.sendTo(this.props.adapterName + '.' + this.props.instance, 'update', id);\n    }\n\n    addChanged(id, cb) {\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\n        if (changed.indexOf(id) === -1) {\n            changed.push(id);\n            this.setState({changed}, () => cb && cb());\n        } else {\n            cb && cb();\n        }\n    }\n\n    removeChanged(id) {\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\n        const pos = changed.indexOf(id);\n\n        if (pos !== -1) {\n            changed.splice(pos, 1);\n            this.setState({changed});\n        }\n    }\n\n     onEdit(id, devices) {\n        devices = devices || this.state.devices;\n        const device = devices.find(dev => dev.id === id);\n        if (device) {\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    let smartName = device.common.smartName  ?  device.common.smartName  : device._id;\n                    if (typeof smartName === 'object' && smartName) {\n                        smartName = smartName[I18n.getLanguage()] || smartName.en;\n                    }\n                    this.editedSmartName = smartName;\n                    this.setState({editId: id, editedSmartName: smartName, editObjectName: Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()})});\n                });\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    onDelete() {\n        let id = this.state.deleteId;\n        // const device = this.state.devices.find(dev => dev.additionalApplianceDetails.id === id);\n        this.addChanged(id, () => {\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    Utils.disableSmartName(obj, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n                    return this.props.socket.setObject(id, obj);\n                })\n                .then(() => {\n                    this.setState({deleteId: '', showConfirmation: false, lastChanged: id});\n\n                    this.timerChanged && clearTimeout(this.timerChanged);\n                    this.timerChanged = setTimeout(() => {\n                        this.setState({lastChanged: ''});\n                        this.timerChanged = null;\n                    }, 30000);\n\n                    // update obj\n                    this.informInstance(id);\n                })\n                .catch(err => this.props.onError(err));\n        });\n    }\n\n\n   \n\n    renderSelectByOn(id, type) {\n        // type = '-', 'stored', false or number [5-100]\n        if (type !== false) {\n            const items = [\n                (<MenuItem key=\"_\" value=\"\"><em>{I18n.t('Default')}</em></MenuItem>),\n                (<MenuItem key=\"last\" value=\"stored\">{I18n.t('last value')}</MenuItem>)\n            ];\n            for (let i = 5; i <= 100; i += 5) {\n                items.push((<MenuItem  key={i.toString()} value={i.toString()}>{i}%</MenuItem>));\n            }\n            return (<FormControl className={this.props.classes.devSubLineByOn}>\n                <Select className={this.props.classes.devSubLineByOnSelect} value={(type || '').toString()} onChange={e => this.onParamsChange(id, e.target.value)}>{items}</Select>\n                <FormHelperText className={this.props.classes.devSubLineTypeTitle}>{I18n.t('by ON')}</FormHelperText>\n            </FormControl>);\n        } else {\n            return null;\n        }\n    }\n\n    onParamsChange(id, byON, type) {\n        this.addChanged(id, () => {\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    Utils.updateSmartName(obj, undefined, byON, type, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n\n                    if (this.state.lastChanged !== id) {\n                        this.setState({lastChanged: id});\n                        this.timerChanged && clearTimeout(this.timerChanged);\n                        this.timerChanged = setTimeout(() => {\n                            this.setState({lastChanged: ''});\n                            this.timerChanged = null;\n                        }, 30000);\n                    }\n\n                    return this.props.socket.setObject(id, obj);\n                })\n                .then(() => {\n                    // update obj\n                    this.informInstance(id);\n                })\n                .catch(err => this.props.onError(err));\n        });\n    }\n\n    \n    onGHParamsChange(newData, oldData) {\n        this.addChanged(newData.id, () => {\n            this.props.socket.getObject(newData.id)\n                .then(obj => {\n                  //  id, newData.type, newData.displayTraits, newData.displayAttributes\n                    Utils.updateSmartName(obj, this.editedSmartName, undefined, undefined, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n                    if (JSON.stringify(newData.displayTraits) !== JSON.stringify(oldData.displayTraits)) {\n                        if (!Array.isArray(newData.displayTraits)) {\n                            newData.displayTraits=[newData.displayTraits]\n                        }\n\n                        obj.common.smartName.ghTraits = newData.displayTraits;\n                    }\n                    if (newData.type !== oldData.type) {\n                        obj.common.smartName.ghType = newData.type;\n                    }\n                    if (newData.displayAttributes !== oldData.displayAttributes ) {\n                        obj.common.smartName.ghAttributes = newData.displayAttributes\n                        try {\n                            if(obj.common.smartName.ghAttributes) {\n                            JSON.parse(obj.common.smartName.ghAttributes)\n                        }\n                        } catch (error) {\n                            this.setState({message: I18n.t('Attributes has not correct JSON format.')})\n                        }\n                    }\n                    if (newData.conv2GH) {\n                        obj.common.smartName.ghConv2GH = newData.displayConv2GH;\n                    }\n                    if (newData.conv2iob) {\n                        obj.common.smartName.ghConv2iob = newData.displayConv2iob;\n                    }\n                    return this.props.socket.setObject(newData.id, obj);\n                })\n                .then(() => {\n                    // update obj\n                    this.informInstance(newData.id);\n                })\n                .catch(err => this.props.onError(err));\n        });\n    }\n   \n\n    renderMessage() {\n        if (this.state.message) {\n            return (<MessageDialog text={this.state.message} onClose={() => this.setState({message: ''})}/>);\n        } else {\n            return null;\n        }\n    }\n\n    changeSmartName(e) {\n        e && e.preventDefault();\n        // Check if the name is duplicate\n        this.addChanged(this.state.editId, () => {\n            const id = this.state.editId;\n            this.setState({editId: '', editObjectName: '', lastChanged: id});\n\n            this.timerChanged && clearTimeout(this.timerChanged);\n            this.timerChanged = setTimeout(() => {\n                this.setState({lastChanged: ''});\n                this.timerChanged = null;\n            }, 30000);\n\n            this.props.socket.getObject(id)\n                .then(obj => {\n                    Utils.updateSmartName(obj, this.editedSmartName, undefined, undefined, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n                    return this.props.socket.setObject(id, obj);\n                })\n                .then(() => {\n                    // update obj\n                    this.informInstance(id);\n                })\n                .catch(err => this.props.onError(err));\n        });\n    }\n\n    getSelectIdDialog() {\n        if (this.state.showSelectId) {\n            return (<DialogSelectID\n                key=\"dialogSelectID1\"\n                prefix={'../..'}\n                connection={this.props.socket}\n                selected={''}\n                statesOnly={true}\n                onClose={() => this.setState({showSelectId: false})}\n                onOk={(selected) => {\n                    this.setState({showSelectId: false});\n\n                    this.props.socket.getObject(selected)\n                        .then(obj => {\n                            if (obj) {\n                                const name = Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()});\n                                Utils.updateSmartName(obj, (name || I18n.t('Device name')).replace(/[-_.]+/g, ' '), undefined, undefined, this.props.adapterName + '.' + this.props.instance, this.props.native.noCommon);\n                                this.addChanged(obj._id);\n                                this.waitForUpdateID = obj._id;\n\n                                if (this.state.lastChanged !== obj._id) {\n                                    this.setState({lastChanged: obj._id});\n                                    this.timerChanged && clearTimeout(this.timerChanged);\n                                    this.timerChanged = setTimeout(() => {\n                                        this.setState({lastChanged: ''});\n                                        this.timerChanged = null;\n                                    }, 30000);\n                                }\n                                \n                                if (!obj.common.smartName) {\n\n                                    obj.common.smartName = {ghType:\"action.devices.types.LIGHT\"}\n                                    obj.common.smartName = {ghTraits:[\"action.devices.traits.OnOff\"]}\n                                } else {\n\n                                    obj.common.smartName.ghType=\"action.devices.types.LIGHT\"\n                                    obj.common.smartName.ghTraits=[\"action.devices.traits.OnOff\"];\n                                }\n                                \n                                this.props.socket.setObject(obj._id, obj)\n                                    .then(() => {\n                                        this.informInstance(obj._id);\n                                        this.setState({message: I18n.t('Please add type and trait to complete the Google Home state.')});})\n                                    .catch(err => this.setState({message: err}));\n                            } else {\n                                this.setState({message: I18n.t('Invalid ID')});\n                            }\n                        });\n                }}\n            />);\n        } else {\n            return null;\n        }\n    }\n\n    \n\n    render() {\n        if (this.state.loading) {\n            return (<CircularProgress  key=\"alexaProgress\" />);\n        }\n\n        return (\n            <form key=\"gh\" className={this.props.classes.tab}>\n                <Fab size=\"small\" color=\"secondary\" aria-label=\"Add\" className={this.props.classes.button} onClick={() => this.setState({showSelectId: true})}><IconAdd /></Fab>\n                <Fab \n                style ={{marginLeft:\"1rem\"}} size=\"small\" color=\"primary\" aria-label=\"Refresh\" className={this.props.classes.button}\n                      onClick={() => this.browse(true)} disabled={this.state.browse}>{this.state.browse ? (<CircularProgress size={20} />) : (<IconRefresh/>)}</Fab>\n\n            \n                {this.renderMessage()}\n                {this.getSelectIdDialog()}\n                <div style={{marginTop:\"4rem\",display: \"flex\"}}>\n                <div style={{ flex: \"50%\"}}><div style={{fontWeight:\"bold\"}}> Auto Mode</div>\n                <div style={{marginTop:\"0.8rem\",marginRight:\"0.8rem\",}}>{I18n.t('To auto detect devices please assign a room and function to the channel if no channel available than assign to a device. Not only to the state or device. And enable them under SmartEnum/Intelligente Aufzhlung')}</div>\n              \n                </div>\n                <div style={{ flex: \"50%\"}}><div style={{fontWeight:\"bold\"}}>Manuell Mode</div>\n                <span>{Utils.renderTextWithA(I18n.t(\"Please select a  <a target='_blank' rel='noopener noreferrer' href='https://developers.google.com/actions/smarthome/guides/'>TYPE</a> and a\"))}</span>\n                <span>{Utils.renderTextWithA(I18n.t(\"<a target='_blank' rel='noopener noreferrer' href='https://developers.google.com/actions/smarthome/traits/' > TRAIT</a> after adding a state.   To add multiple traits add a different id and trait but same smartname, type and room. Comma separated for mutiple smartnames.  To assign a room please use the ioBroker Enums/Aufzhlungen.  With attributes you can for example set a range for the color temperature \"))}</span>\n                <span>  {Utils.renderTextWithA(I18n.t(\"<a target='_blank' rel='noopener noreferrer' href='https://developers.google.com/actions/smarthome/traits/colorsetting'> Infos about Attributes you can find here.</a> Empty attribute is {}\"))}</span>\n                </div>\n\n                </div>\n                <br></br>\n                <div style={{ flex: \"100%\"}}><div style={{fontWeight:\"bold\"}}>{Utils.renderTextWithA(I18n.t(\"For help use this forum <a target='_blank' rel='noopener noreferrer' href='https://forum.iobroker.net/topic/24061/google-home-assistant-iobroker-einrichten-nutzen/'>thread</a>\"))}</div></div>\n             \n                \n                <div>\n                <MaterialTable\n                style ={{marginTop:\"1rem\",display: \"inline-block\"}}\n                title=\"\"\n                tableRef={this.myTableRef}\n                onRowClick={(e, rowData) => {\n                    this.myTableRef.current.onTreeExpandChanged(rowData.tableData.path, rowData)\n                }\n            }\n           \n                columns={this.state.columns}\n                parentChildData={(row, rows) => {\n                    const result = rows.find(function(element) {\n                        if (element.id && row.parentId && element.id === row.parentId) {\n                            console.log(row.parentId)\n                            return true;\n                        };\n                      })\n                      console.log(result)\n                      return result\n                }} \n                data={this.state.devices}\n                icons={tableIcons}\n                isLoading={this.state.browse }\n                options={{\n                    actionsColumnIndex: -1,\n                    paging: false, \n                    rowStyle: (rowData) => {\n                        let background = '#FFF'\n                        if (rowData.smartEnum) {\n                            background = '#F7FFEA'\n                        }\n                        if (rowData.ioType === \"channel\" ||rowData.ioType === \"device\") {\n                            if (rowData.smartEnum) {\n                                background = '#eafff2'\n                            } else {\n                                background = '#E2FFFF'\n                            }\n                            \n                        }\n                        if  (this.state.selectedRow && this.state.selectedRow.tableData.id === rowData.tableData.id) {\n                            background =  '#EEE'\n                        }\n\n\n                        return {backgroundColor:  background}\n                      }\n                  }}\n               \n                editable={{\n                    \n                    onRowUpdate: (newData, oldData) => {\n                        if (newData.name.nicknames && Array.isArray(newData.name.nicknames)) {\n                            newData.name.nicknames = newData.name.nicknames.join(\",\");\n                        }\n                        this.editedSmartName = newData.name.nicknames\n                        this.setState({editId: newData.id});\n                       \n                    return new Promise(resolve => {\n                        this.setState({browse:true})\n                        setTimeout(() => {\n                            if(!newData.type || !newData.displayTraits) {\n                                this.setState({message: I18n.t('Please add action and trait to complete the Google Home state.')});\n                            }\n                        \n                        this.onGHParamsChange(newData, oldData);\n                        resolve();\n                        const devices = [...this.state.devices];\n                        devices[devices.indexOf(oldData)] = newData;\n                        this.setState({ ...this.state, devices });\n                        }, 500);\n                    })},\n                    onRowDelete: (oldData) => {\n                    // if smartenum set smartname on false if not delete/reset smartname content\n                    if (oldData.smartEnum=== \"X\") {\n                        this.setState({deleteId: oldData.id});\n                    } else {\n                        this.props.socket.getObject(oldData.id)\n                        .then(obj => {\n                            if (obj.common[\"smartName\"]) {\n                                delete obj.common[\"smartName\"][\"ghTraits\"]\n                                delete obj.common[\"smartName\"][\"ghType\"]\n                                delete obj.common[\"smartName\"][\"ghAttributes\"]\n                            }\n                            \n                            return this.props.socket.setObject(oldData.id, obj);\n                        })\n                    }\n                    return new Promise(resolve => {\n                        setTimeout(() => {\n                            if (this.state.deleteId) {\n                                this.onDelete();\n                            } else {\n\n                            this.informInstance(oldData.id);\n                            }\n                            resolve();\n                            const devices = [...this.state.devices];\n                            devices.splice(devices.indexOf(oldData), 1);\n                            this.setState({ ...this.state, devices });\n                        }, 600);\n                    })\n                    }\n                }}\n                /></div>\n\n            </form>\n        );\n    }\n}\n\nGoogleSmartNames.propTypes = {\n    common: PropTypes.object.isRequired,\n    native: PropTypes.object.isRequired,\n    instance: PropTypes.number.isRequired,\n    adapterName: PropTypes.string.isRequired,\n    onError: PropTypes.func,\n    onLoad: PropTypes.func,\n    onChange: PropTypes.func,\n    socket: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(GoogleSmartNames);\n","import React from 'react';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport GenericApp from '@iobroker/adapter-react/GenericApp';\r\nimport Loader from '@iobroker/adapter-react/Components/Loader'\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport TabOptions from './Tabs/Options';\r\nimport TabExtended from './Tabs/Extended';\r\nimport TabServices from './Tabs/Services';\r\nimport TabEnums from './Tabs/Enums';\r\nimport TabAlexaSmartNames from './Tabs/AlexaSmartNames';\r\nimport TabAlisaSmartNames from './Tabs/AlisaSmartNames';\r\nimport TabGoogleSmartNames from './Tabs/GoogleSmartNames';\r\n\r\nconst styles = theme => ({\r\n    root: {},\r\n    tabContent: {\r\n        padding: 10,\r\n        height: 'calc(100% - 64px - 48px - 20px)',\r\n        overflow: 'auto'\r\n    },\r\n    tabContentIFrame: {\r\n        padding: 10,\r\n        height: 'calc(100% - 64px - 48px - 20px - 38px)',\r\n        overflow: 'auto'\r\n    }\r\n});\r\n\r\nclass App extends GenericApp {\r\n    constructor(props) {\r\n        const extendedProps = {...props};\r\n        extendedProps.encryptedFields = ['pass'];\r\n        extendedProps.translations = {\r\n            'en': require('./i18n/en'),\r\n            'de': require('./i18n/de'),\r\n            'ru': require('./i18n/ru'),\r\n            'pt': require('./i18n/pt'),\r\n            'nl': require('./i18n/nl'),\r\n            'fr': require('./i18n/fr'),\r\n            'it': require('./i18n/it'),\r\n            'es': require('./i18n/es'),\r\n            'pl': require('./i18n/pl'),\r\n            'zh-cn': require('./i18n/zh-cn'),\r\n        };\r\n        // get actual port\r\n        extendedProps.socket = extendedProps.socket || {};\r\n        extendedProps.socket.port = parseInt(window.location.port, 10);\r\n        if (isNaN(extendedProps.socket.port)) {\r\n            switch (window.location.protocol) {\r\n                case 'https:':\r\n                    extendedProps.socket.port = 443;\r\n                    break;\r\n                case 'http:':\r\n                    extendedProps.socket.port = 80;\r\n                    break;\r\n            }\r\n        }\r\n        // for debug and fallback purposes\r\n        if (!extendedProps.socket.port || extendedProps.socket.port === 3000) {\r\n            extendedProps.socket.port = 8081;\r\n        }\r\n\r\n        super(extendedProps);\r\n    }\r\n\r\n    getSelectedTab() {\r\n        const tab = this.state.selectedTab;\r\n        if (!tab || tab === 'options') {\r\n            return 0;\r\n        } else\r\n        if (tab === 'enums') {\r\n            return 1;\r\n        } else\r\n        if (tab === 'alexa') {\r\n            return 2;\r\n        } else\r\n        if (tab === 'google') {\r\n            const offset = (this.state.native.amazonAlexa ? 1 : 0);\r\n            return 2 + offset;\r\n        }\r\n        if (tab === 'alisa') {\r\n            const offset = (this.state.native.amazonAlexa ? 1 : 0) + (this.state.native.googleHome ? 1 : 0);\r\n            return 2 + offset;\r\n        } else\r\n        if (tab === 'extended') {\r\n            const offset = (this.state.native.amazonAlexa ? 1 : 0) + (this.state.native.googleHome ? 1 : 0) + (this.state.native.yandexAlisa ? 1 : 0);\r\n            return 2 + offset;\r\n        } else\r\n        if (tab === 'services') {\r\n            const offset = (this.state.native.amazonAlexa ? 1 : 0) + (this.state.native.googleHome ? 1 : 0) + (this.state.native.yandexAlisa ? 1 : 0);\r\n            return 3 + offset;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.loaded) {\r\n            return (<Loader theme={this.state.themeType}/>);\r\n        }\r\n\r\n        return (\r\n            <div className=\"App\">\r\n                <AppBar position=\"static\">\r\n                    <Tabs value={this.getSelectedTab()} onChange={(e, index) => this.selectTab(e.target.parentNode.dataset.name, index)}>\r\n                        <Tab label={I18n.t('Options')} data-name=\"options\" />\r\n                        <Tab label={I18n.t('Smart enums')} data-name=\"enums\" />\r\n                        {this.state.native.amazonAlexa && <Tab selected={this.state.selectedTab === 'alexa'} label={I18n.t('Alexa devices')} data-name=\"alexa\" />}\r\n                        {this.state.native.googleHome && <Tab selected={this.state.selectedTab === 'google'} label={I18n.t('Google devices')} data-name=\"google\" />}\r\n                        {this.state.native.yandexAlisa && <Tab selected={this.state.selectedTab === 'alisa'} label={I18n.t('Alisa devices')} data-name=\"alisa\" />}\r\n                        <Tab label={I18n.t('Extended options')} data-name=\"extended\" />\r\n                        <Tab label={I18n.t('Services and IFTTT')} data-name=\"services\" />\r\n                    </Tabs>\r\n                </AppBar>\r\n\r\n                <div className={this.isIFrame ? this.props.classes.tabContentIFrame : this.props.classes.tabContent}>\r\n                    {(this.state.selectedTab === 'options' || !this.state.selectedTab) && (<TabOptions\r\n                        key=\"options\"\r\n                        common={this.common}\r\n                        socket={this.socket}\r\n                        native={this.state.native}\r\n                        onError={text => this.setState({errorText: text})}\r\n                        onLoad={native => this.onLoadConfig(native)}\r\n                        instance={this.instance}\r\n                        adapterName={this.adapterName}\r\n                        onChange={(attr, value, cb) => this.updateNativeValue(attr, value, cb)}\r\n                    />)}\r\n                    {this.state.selectedTab === 'enums' && (<TabEnums\r\n                        key=\"enums\"\r\n                        common={this.common}\r\n                        socket={this.socket}\r\n                        native={this.state.native}\r\n                        onError={text => this.setState({errorText: text})}\r\n                        instance={this.instance}\r\n                        adapterName={this.adapterName}\r\n                    />)}\r\n                    {this.state.selectedTab === 'alexa' && (<TabAlexaSmartNames\r\n                        key=\"alexa\"\r\n                        common={this.common}\r\n                        socket={this.socket}\r\n                        native={this.state.native}\r\n                        onError={text => this.setState({errorText: text})}\r\n                        adapterName={this.adapterName}\r\n                        instance={this.instance}\r\n                    />)}\r\n                        {this.state.selectedTab === 'google' && (<TabGoogleSmartNames\r\n                        key=\"google\"\r\n                        common={this.common}\r\n                        socket={this.socket}\r\n                        native={this.state.native}\r\n                        onError={text => this.setState({errorText: text})}\r\n                        adapterName={this.adapterName}\r\n                        instance={this.instance}\r\n                    />)}\r\n                    {this.state.selectedTab === 'alisa' && (<TabAlisaSmartNames\r\n                        key=\"alisa\"\r\n                        common={this.common}\r\n                        socket={this.socket}\r\n                        native={this.state.native}\r\n                        onError={text => this.setState({errorText: text})}\r\n                        adapterName={this.adapterName}\r\n                        instance={this.instance}\r\n                    />)}\r\n                    {this.state.selectedTab === 'extended' && (<TabExtended\r\n                        key=\"extended\"\r\n                        common={this.common}\r\n                        socket={this.socket}\r\n                        native={this.state.native}\r\n                        onError={text => this.setState({errorText: text})}\r\n                        instance={this.instance}\r\n                        adapterName={this.adapterName}\r\n                        onChange={(attr, value) => this.updateNativeValue(attr, value)}\r\n                    />)}\r\n                    {this.state.selectedTab === 'services' && (<TabServices\r\n                        key=\"services\"\r\n                        common={this.common}\r\n                        socket={this.socket}\r\n                        native={this.state.native}\r\n                        onError={text => this.setState({errorText: text})}\r\n                        instance={this.instance}\r\n                        adapterName={this.adapterName}\r\n                        onShowError={error => this.showError(error)}\r\n                        onChange={(attr, value) => this.updateNativeValue(attr, value)}\r\n                    />)}\r\n                </div>\r\n                {this.renderError()}\r\n                {this.renderSaveCloseButtons()}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(App);\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { MuiThemeProvider} from '@material-ui/core/styles';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport createTheme from '@iobroker/adapter-react/createTheme';\n\nlet theme = 'light';\n\nfunction build() {\n    return ReactDOM.render(<MuiThemeProvider theme={createTheme(theme)}>\n        <App onThemeChange={_theme => {\n            theme = _theme;\n            build();\n        }}/>\n    </MuiThemeProvider>, document.getElementById('root'));\n}\n\n\nbuild();\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}