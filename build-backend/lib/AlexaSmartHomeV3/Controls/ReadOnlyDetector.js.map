{"version":3,"file":"ReadOnlyDetector.js","sourceRoot":"","sources":["../../../../src/lib/AlexaSmartHomeV3/Controls/ReadOnlyDetector.ts"],"names":[],"mappings":";;;;;AAAA,2EAAmD;AACnD,wDAAgC;AAIhC,MAAqB,gBAAiB,SAAQ,iBAAO;IACjD,IAAI,UAAU;QACV,OAAO,SAAS,CAAC;IACrB,CAAC;IAED,gBAAgB;QACZ,MAAM,MAAM,GAAG,CAAC,IAAI,CAAC,UAAW,CAAC,CAAC;QAClC,KAAK,MAAM,QAAQ,IAAI,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC;YAC7D,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,uBAAuB,EAAE,CAAC,CAAC;QAClD,CAAC;QACD,OAAO,MAAM,CAAC;IAClB,CAAC;IAED,KAAK,CAAC,MAAM,CAAC,KAAqB;QAC9B,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,qCAAqC,IAAI,CAAC,IAAI,UAAU,CAAC,CAAC;QAEzE,2EAA2E;QAC3E,OAAO,OAAO,CAAC,MAAM,CACjB,uBAAa,CAAC,8BAA8B,CACxC,IAAI,CAAC,IAAI,EACT,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,EAChC,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,EAChC,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,cAAc,CACxC,CAAC,GAAG,EAAE,CACV,CAAC;IACN,CAAC;CACJ;AA1BD,mCA0BC","sourcesContent":["import AlexaResponse from '../Alexa/AlexaResponse';\nimport Control from './Control';\nimport type { Base as CapabilitiesBase } from '../Alexa/Capabilities/Base';\nimport type { AlexaV3Request } from '../types';\n\nexport default class ReadOnlyDetector extends Control {\n    get capability(): CapabilitiesBase | undefined {\n        return undefined;\n    }\n\n    initCapabilities(): CapabilitiesBase[] {\n        const result = [this.capability!];\n        for (const property of result.flatMap(item => item.properties)) {\n            property.init(this.detectedStateInitObject());\n        }\n        return result;\n    }\n\n    async handle(event: AlexaV3Request): Promise<AlexaResponse> {\n        this.log.error(`Setting value is not supported by ${this.name} control`);\n\n        // eslint-disable-next-line @typescript-eslint/prefer-promise-reject-errors\n        return Promise.reject(\n            AlexaResponse.directiveNotSupportedByControl(\n                this.name,\n                event.directive.header.namespace,\n                event.directive.header.messageId,\n                event.directive.header.payloadVersion,\n            ).get(),\n        );\n    }\n}\n"]}